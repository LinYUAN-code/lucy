import{_ as q,u as z,a as J,b as K,r as d,c as k,A as O,w as y,d as p,o as T,e as C,f as s,g as m,t as w,m as x,h as i,p as Q,v as U,s as b,F as W,j as X,B as Y}from"./index-5b4ceb49.js";import{R as Z,L as N}from"./RightTips-2a16fb7c.js";import{C as V}from"./Header-76ad2377.js";/* empty css                                                                    */import{D as I}from"./D3Graph-81b80683.js";const nn={class:"dfa-container"},rn={class:"analysis"},an={class:"argument"},on={class:"el-dropdown-link"},tn={class:"control-btn"},en={__name:"Automaton",setup(sn){const l=z(),F=J();K({}),d(!1);const u=d(null),D=k(()=>l.getters["grammarStore/getStartTNonTer"]),g=d([]),S=d([]),B=r=>{let t=[];r!=null&&r.length&&(r.forEach(e=>{var a;(a=e==null?void 0:e.edges)!=null&&a.length&&e.edges.forEach(n=>{var _,A,h,R,f;g.value=[...g.value,((_=n==null?void 0:n.next)==null?void 0:_.id)===-1?`id [label="Accept" shape="none" style="none" ] id${e.id} -> id [ xlabel="${n==null?void 0:n.tocken}"]`:`id${(A=n==null?void 0:n.next)==null?void 0:A.id} [label="S${(h=n==null?void 0:n.next)==null?void 0:h.id}
${(R=n==null?void 0:n.next)==null?void 0:R.items.join(`
`)}"] id${e.id} -> id${(f=n==null?void 0:n.next)==null?void 0:f.id} [ xlabel="${n==null?void 0:n.tocken}"]`],n!=null&&n.next&&(t=[...t,n==null?void 0:n.next])})}),S.value=t)},L=k(()=>l.getters["grammarStore/getNonTerminal"]),j=()=>{const r=l.getters["grammarStore/getLRParser"],t=l.getters["grammarStore/getGrammar"],e=l.getters["grammarStore/getTerminal"];r.generateState(t,D.value,L.value,e);const a=r.stateGraph;l.commit("grammarStore/updateArgument",a==null?void 0:a.items[0]),console.log(a),g.value=[`id${a==null?void 0:a.id} [label="S${a==null?void 0:a.id}
${a==null?void 0:a.items.join(`
`)}"] `],S.value=[a];let n=0;for(;S.value.length&&!(n>=5);)B(S.value),n+=1;l.commit("grammarStore/updateGraph",g.value)},v=k(()=>l.getters["grammarStore/getGraph"]),E=k(()=>l.getters["grammarStore/getArgument"]),o=d(1),P=()=>{var r;o.value<=0||(o.value=o.value-1,u.value.setDotIndexForGraph(o.value),(r=u.value)==null||r.render(c.value))},H=()=>{var r;o.value>=v.value.length||(o.value=o.value+1,u.value.setDotIndexForGraph(o.value),(r=u.value)==null||r.render(c.value))};O(()=>{var r,t;(r=v.value)!=null&&r.length?(t=u.value)==null||t.render(c.value):j()});const M=r=>{c.value=r},G=["自动播放","手动播放","不播放"],c=d(2);return y(()=>D,(r,t)=>{r.value?t==null&&setTimeout(()=>{var e;(e=u.value)==null||e.render(c.value)},1e3):F.push(N[1].route)},{immediate:!0,deep:!0}),y([()=>v.value,c],([r,t],[e,a])=>{var n,_;r.length&&t!=null&&(o.value=1,(n=u.value)==null||n.setDotIndexForGraph(o.value),(_=u.value)==null||_.render(t,r))},{deep:!0}),(r,t)=>{const e=p("arrow-down"),a=p("el-icon"),n=p("el-dropdown-item"),_=p("el-dropdown-menu"),A=p("el-dropdown"),h=p("el-button"),R=p("ArrowRight");return T(),C("div",nn,[s(Z,{type:"grammar",showArgument:!0}),m("div",rn,[s(V,{step:1,type:"LR0"}),m("div",an,[m("span",null,"增广语法产生式："+w(x(E)),1),s(A,{onCommand:M},{dropdown:i(()=>[s(_,null,{default:i(()=>[(T(),C(W,null,X(G,(f,$)=>s(n,{key:f,command:$,disabled:c.value===$},{default:i(()=>[b(w(f),1)]),_:2},1032,["command","disabled"])),64))]),_:1})]),default:i(()=>[m("span",on,[b(w(G[c.value])+" ",1),s(a,{class:"el-icon--right"},{default:i(()=>[s(e)]),_:1})])]),_:1})]),s(I,{ref_key:"D3GrapghRef",ref:u,graph:x(v),dotIndex:o.value},null,8,["graph","dotIndex"]),Q(m("div",tn,[s(h,{text:"",icon:x(Y),onClick:P,disabled:o.value<=1},{default:i(()=>[b("上一步")]),_:1},8,["icon","disabled"]),s(h,{text:"",onClick:H,disabled:o.value>=x(v).length},{default:i(()=>[b(" 下一步"),s(a,{class:"el-icon--right"},{default:i(()=>[s(R)]),_:1})]),_:1},8,["disabled"]),b(" "+w(o.value)+" / "+w(x(v).length),1)],512),[[U,c.value===1]])])])}}},vn=q(en,[["__scopeId","data-v-3b5f2e28"]]);export{vn as default};
