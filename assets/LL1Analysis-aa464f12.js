import{_ as B,s as D,u as R,r as $,c as m,a as g,x as I,y as j,b as d,d as k,e as F,h as r,f as o,l as z,t as E,g as U,w as L,k as P,p as q,m as G,z as x}from"./index-dc83c4b8.js";/* empty css                                                                    */import H from"./LL1Table-29a45501.js";import{T as J}from"./index-6a57f040.js";const K=f=>(q("data-v-da03491f"),f=f(),G(),f),M={class:"analysis"},O={class:"container"},Q={class:"content"},W={class:"input-string"},X={class:"first"},Y={class:"parser-string"},Z=K(()=>o("div",{class:"ast"},[o("h4",null,"抽象语法树"),o("div",{id:"astNodeContainer"})],-1)),ee={__name:"LL1Analysis",setup(f){D();const c=R();$({});const _=m(()=>c.getters["grammarStore/getStartTNonTer"]),i=m(()=>c.getters["grammarStore/getLL1ParserString"]),S=m(()=>c.getters["grammarStore/getLL1Parser"]),h=m(()=>{const e=c.getters["grammarStore/getFirstSet"],a=c.getters["grammarStore/getFollowSet"];return S.value.getPredictTable(e,a)});m(()=>[...c.getters["grammarStore/getTerminal"],"$"]);const T=g([]),v=g([]),y=e=>{new J("#astNodeContainer",{data:[e]})},A=()=>{if(!i.value||!_.value)return[];let e;try{e=S.value.getPredictProcess(i.value,_.value,h.value),x(()=>{y(e.astNode)})}catch(t){console.error(t)}const a=e.map((t,p)=>{var n,l,s;return{Step:p+1,Stack:(s=(l=(n=t.parseStack)==null?void 0:n.slice())==null?void 0:l.reverse())==null?void 0:s.join(""),Input:t.remainingInput+"$",Action:t.parseAction}});T.value=a,v.value=a},u=g(!1),N=()=>{u.value=!u.value},b=g(),w=()=>{if(!i.value||!_.value||!h.value)return[];const e=S.value.getPredictProcessProgressive(i.value,_.value,h.value);y(e.next().value.astNode),b.value=setInterval(()=>{const a=e.next();a.done?u.value=!1:a.value.length&&(v.value=a.value.map((t,p)=>{var n,l,s;return{Step:p+1,Stack:(s=(l=(n=t.parseStack)==null?void 0:n.slice())==null?void 0:l.reverse())==null?void 0:s.join(""),Input:t.remainingInput+"$",Action:t.parseAction}}),x(()=>{y(a.value.astNode)}))},2e3)};I(()=>u,e=>{clearInterval(b.value),e.value?(v.value=[],w()):v.value=T.value},{deep:!0}),j(()=>{clearInterval(b.value)});const C=g(!1);return I([()=>i.value,_],([e,a],[t,p])=>{!e||!a?C.value=!0:A()},{immediate:!0,deep:!0}),(e,a)=>{const t=d("VideoPlay"),p=d("CircleClose"),n=d("el-icon"),l=d("el-tooltip"),s=d("el-table-column"),V=d("el-table");return k(),F("div",M,[r(H),o("div",O,[o("div",Q,[o("div",W,[o("div",X,[z(" LL(1)预测分析 "),o("span",Y,E(U(i)),1),r(l,{class:"box-item",effect:"dark",content:u.value?"退出播放":"播放",placement:"top"},{default:L(()=>[r(n,{onClick:N},{default:L(()=>[u.value?(k(),P(p,{key:1})):(k(),P(t,{key:0}))]),_:1})]),_:1},8,["content"])])]),r(V,{data:v.value,stripe:"",style:{width:"100%"},border:"",class:"table"},{default:L(()=>[r(s,{prop:"Step",label:"Step",align:"center"}),r(s,{prop:"Stack",label:"Stack",align:"center"}),r(s,{prop:"Input",label:"Input",align:"center"}),r(s,{prop:"Action",label:"Action",align:"center"})]),_:1},8,["data"])]),Z])])}}},oe=B(ee,[["__scopeId","data-v-da03491f"]]);export{oe as default};
