"use strict";function e(e,t){return t.map((e=>e.replaceAll(/\s/g,""))).map((t=>{const n=t.split(/(=>)|(->)/).filter((e=>"=>"!==e&&"->"!==e&&e)),r=n[1].split("|").filter((e=>e&&"|"!==e)).map((t=>e.splitDerivation(t)));return{nonTerminal:n[0],derivations:r}}))}function t(e){switch(e){case"+":case"*":case"(":case")":return`\\${e}`;default:return e}}const n="ε",r="$";var i;!function(e){e[e.Normal=0]="Normal",e[e.Warnning=1]="Warnning",e[e.Error=2]="Error",e[e.None=3]="None"}(i||(i={}));let o=i.Normal;o=i.Error;var s=new class{logLevel;logChannel;constructor(e=i.Normal,t=console){this.logLevel=e,this.logChannel=t}log(...e){this.logLevel<=i.Normal&&this.logChannel.log("[normal]",...e)}warn(...e){this.logLevel<=i.Warnning&&this.logChannel.warn("[warn]",...e)}error(...e){this.logLevel<=i.Error&&this.logChannel.error("[error]",...e)}logTo(e){this.logChannel=e}}(o);function l(t,r){s.log("[generateFirstSet start]");const i=e(t,r);s.log("[grammers after transferString2Grammers]",i);const o=new Array(...i.map((e=>({tocken:e.nonTerminal,terminals:new Set})))),l=new Map;i.forEach((e=>{l.set(e.nonTerminal,e.derivations)})),o.push(...t.terminals.map((e=>({tocken:e[0],terminals:new Set([e[0]]),isTerminal:!0})))),o.forEach((e=>{if(!e.isTerminal)for(let t of l.get(e.tocken))1!==t.length||t[0]!==n||e.terminals.has(n)||e.terminals.add(n)}));const a=new Map;for(let e of o)a.set(e.tocken,e);for(;;){let e=!1;if(o.forEach((r=>{if(!r.isTerminal)for(let i of l.get(r.tocken))for(let o=0;o<i.length;o++){const l=i[o];if(t.isTerminal(l)){if(r.terminals.has(l)||(s.log(l),e=!0,r.terminals.add(l)),l!==n)break}else{const t=a.get(l);if(t.terminals.forEach((t=>{t!==n&&(r.terminals.has(t)||(e=!0,r.terminals.add(t)))})),!t.terminals.has(n))break}o===i.length-1&&r.terminals.add(n)}})),!e)break}return o.filter((e=>!e.isTerminal)).sort(((e,t)=>e.tocken<t.tocken?-1:1)).map((e=>(e.terminals=new Set(Array.from(e.terminals).sort(((e,t)=>e<t?-1:1))),e)))}function a(e,t,r){const i=new Set;for(let o=0;o<t.length;o++){const s=t[o];if(e.isTerminal(s)){if(s!==n){i.add(s);break}}else if(r.get(s)?.terminals.forEach((e=>{i.add(e)})),!r.get(s).terminals.has(n))break;o===t.length-1&&i.add(n)}return{tocken:t.join(""),terminals:i}}function c(t,i,o){s.log("[generateFllowSet start]"),o=o?Array.from(o):l(t,i);const a=e(t,i);s.log("[grammers after transferString2Grammers]",a);const c=new Array(...a.map((e=>({tocken:e.nonTerminal,terminals:new Set([r])})))),m=new Map;a.forEach((e=>{m.set(e.nonTerminal,e.derivations)})),c.push(...t.terminals.map((e=>({tocken:e[0],terminals:new Set([r]),isTerminal:!0}))));const f=new Map;for(let e of c)f.set(e.tocken,e);o.push(...t.terminals.map((e=>({tocken:e[0],terminals:new Set([e[0]]),isTerminal:!0}))));const h=new Map;for(let e of o)h.set(e.tocken,e);for(;;){let e=!1;if(a.forEach((t=>{for(let r of t.derivations)for(let t=r.length-2;t>=0;t--){const i=f.get(r[t]);for(let o=t+1;o<r.length;o++){const t=h.get(r[o]).terminals;for(let r of t)r!==n&&(i?.terminals.has(r)||(e=!0,i?.terminals.add(r)));if(!t.has(n))break}}})),a.forEach((t=>{const r=f.get(t.nonTerminal);for(let i of t.derivations)for(let t=i.length-1;t>=0;t--){const o=i[t],s=f.get(o);for(let t of r.terminals)t!==n&&(s?.terminals.has(t)||(e=!0,s?.terminals.add(t)));if(!h.get(o).terminals.has(n))break}})),!e)break}return c.filter((e=>!e.isTerminal)).sort(((e,t)=>e.tocken<t.tocken?-1:1)).map((e=>(e.terminals=new Set(Array.from(e.terminals).sort(((e,t)=>e<t?-1:1))),e)))}class m{nonTerminals;terminals;currentLine=0;currentColumn=0;source="";constructor(e,t){this.nonTerminals=[...t],this.terminals=[...e]}setSource(e){this.source=e,this.currentLine=0,this.currentColumn=0}remainString(){return this.source.slice(this.currentColumn)}next(){if(this.currentColumn>=this.source.length)return{tocken:r,origin:r};for(let e of this.terminals){const t=this.source.slice(this.currentColumn).match(e[1]);if(t)return{tocken:e[0],origin:t[0]}}throw new Error(`[lexer next]: match next Terminal error \n sourecInput: ${this.source}\n remainString: ${this.source.slice(this.currentColumn)}`)}pop(){try{const e=this.next();return e.tocken!==r&&(this.currentColumn+=e.origin.length),e}catch(e){throw e}}nextNotEmptyTerminal(){for(;;){const e=this.next();if("whiteSpace"!==e.tocken)return e;this.currentColumn+=e.origin.length}}nextNotEmpty(e){const t=this.currentColumn;for(let t=0;t<e-1;t++)this.popNotEmptyTerminal();const n=this.nextNotEmptyTerminal();return this.currentColumn=t,n}popNotEmptyTerminal(){const e=this.nextNotEmptyTerminal();return e.tocken!==r&&(this.currentColumn+=e.origin.length),e}isTerminal(e){let t=!0;return this.nonTerminals.some((n=>n===e&&(t=!1,!0))),t}splitDerivation(e){const n=[];let r=0;const i=e;for(;e.length;){for(let t of this.nonTerminals){const r=e.match(new RegExp("^"+t));if(r){n.push(t),e=e.slice(r[0].length);break}}for(let r of this.terminals){const i=e.match(new RegExp("^"+t(r[0])));if(i){n.push(r[0]),e=e.slice(i[0].length);break}}if(r++,r>5e4)throw new Error(`[splitDerivation] error: excute over MAX_EXCUTE str: ${i}  remaining str: ${e} `)}return n}getNewNonTerminal(e){let t=e;for(;;)if(t+="'",-1===this.nonTerminals.indexOf(t))return this.nonTerminals.unshift(t),t}}function f(t,r,i,o){const l=e(t,r),c=[],m=new Map;t.nonTerminals.forEach((e=>{const t={nonTerminal:e,terminal2Derivation:new Map};m.set(e,t),c.push(t)}));const f=new Map,h=new Map;for(let e of o)h.set(e.tocken,e);for(let e of i)f.set(e.tocken,e);return l.forEach((e=>{for(let r of e.derivations){const i=a(t,r,f),o=m.get(e.nonTerminal);s.log(i);let l=new Map;for(let t of i.terminals){if(t===n)continue;let i=o?.terminal2Derivation.get(t);l.set(t,!0),i||(i={nonTerminal:e.nonTerminal,derivations:[]},o?.terminal2Derivation.set(t,i)),i.derivations.push(r)}if(i.terminals.has(n))for(let t of h.get(e.nonTerminal).terminals){if(l.has(t))continue;let n=o?.terminal2Derivation.get(t);n||(n={nonTerminal:e.nonTerminal,derivations:[]},o?.terminal2Derivation.set(t,n)),n.derivations.push(r)}}})),c}function h(e,t){for(let n of e.terminals){const e=n[0];t.forEach((t=>{const n=t.terminal2Derivation.get(e);if(n&&n.derivations.length>1)return!1}))}return!0}const g=/^[A-Z]'*/,p=/[a-z|\u0391-\u03C9]/;function u(e){const t=new Set,n=new Set;return e.forEach((e=>{const r=e.replaceAll(/\s/g,"").split(/(=>)|(->)/).filter((e=>"=>"!==e&&"->"!==e&&e)),i=r[0];t.add(i),r[1].split("|").filter((e=>e&&"|"!==e)).forEach((e=>{for(;e.length;){let r=null;if(r=e.match(g),r)t.add(r[0]),e=e.slice(r[0].length);else{if(r=e.match(p),!r)throw new Error(`[getTockFromSimpleGrammers error] cant recognize the character remaining: ${e}`);n.add(JSON.stringify([r[0],"^"+r[0]])),e=e.slice(r[0].length)}}}))})),{nonTerminals:Array.from(t).sort(((e,t)=>t.length-e.length)),terminals:Array.from(n).map((e=>{const t=JSON.parse(e);return t[1]=new RegExp(t[1]),t}))}}function d(e){e=e.sort(((e,t)=>e<t?-1:1));let t="";for(let n of e)t+=` ${T(n)}`;return t}function T(e){let t=`${e.nonTerminal} => `;for(let n=0;n<e.derivation.length;n++)n===e.matchPoint&&(n||(t+=" "),t+="· "),n===e.derivation.length-1?t+=`${e.derivation[n]}`:t+=`${e.derivation[n]} `;return t}function k(e,t,n){for(let r=0;r<e.length;r++){const i=e[r],o=i.derivation[i.matchPoint];if(n.isTerminal(o))continue;t.get(o)?.forEach((t=>{let n=!1;for(let r of e)if(r.nonTerminal===o&&0===r.matchPoint){if(r.derivation.length!==t.length)continue;let e=!0;for(let n=0;n<t.length;n++)if(r.derivation[n]!==t[n]){e=!1;break}if(e){n=!0;break}}n||e.push({nonTerminal:o,matchPoint:0,derivation:t})}))}}exports.LL1Parser=class{lexer;textGrammers;constructor(e,t,n){this.lexer=new m(e,t),this.textGrammers=n}getFirstSet(){return l(this.lexer,this.textGrammers)}getFollowSet(e){return e||(e=this.getFirstSet()),c(this.lexer,this.textGrammers,e)}getPredictTable(e,t){return e||(e=this.getFirstSet()),t||(t=this.getFollowSet(e)),f(this.lexer,this.textGrammers,e,t)}getPredictProcess(e,t,i){return i||(i=f(this.lexer,this.textGrammers,this.getFirstSet(),this.getFollowSet())),function(e,t,i,o){let l=i.replaceAll(/\s/g,"");const a=[];let c={parseStack:[r,o],remainingInput:i,parseAction:""};e.setSource(l);const m=new Map;t.forEach((e=>{m.set(e.nonTerminal,e)}));try{for(;;){const t=c.parseStack[c.parseStack.length-1];if(e.isTerminal(t)){const n=e.next();if(t!==n.tocken)throw new Error(`[predict error] terminal match error tocken: ${t} stack: ${c.parseStack} remainingInput: ${e.remainString()}`);if(c.parseAction=`match ${n.tocken} ${n.origin}`,a.push(c),c=JSON.parse(JSON.stringify(c)),e.pop(),c.parseAction="",c.remainingInput=e.remainString(),c.parseStack.pop(),0===c.parseStack.length)break;continue}const r=e.next(),i=m.get(t).terminal2Derivation.get(r.tocken);if(1!==i.derivations.length)throw new Error(`[predict error] parse input fail \n terminal: ${r} \n  remainingInput: ${e.remainString()} \n grammer: ${i} `);c.parseAction=`Predict ${i.nonTerminal} => ${i.derivations[0].join(" ")}`,s.log("[predict State]",c),a.push(c),c=JSON.parse(JSON.stringify(c)),c.parseStack.pop(),c.parseStack.push(...i.derivations[0].filter((e=>e!==n)).reverse()),c.parseAction="",c.remainingInput=e.remainString()}}catch(e){return console.error(e),a}return a}(this.lexer,i,e,t)}checkPredickTableIsValid(e){return h(this.lexer,e)}checkIsLL0(){return h(this.lexer,this.getPredictTable())}getFirstSetProgressive(){return function*(t,r){yield["1. 如果X式一个终结符号，那么FIRST(X) = X ","2. 如果 X => ε 是一个产生式，那么将e加人到 FIRST（X)中。","3. A => B0B1B2B3\n            i = 0\n            FIRST(Bi) - EmptyCharacter 加入到 FIRST(A)中\n            如果FIRST(B1)不含有EmptyCharacter退出循环\n            若B0 - B3均含有EmptyCharacter 将EmptyCharacter加入到FIRST(A)中\n        ","4. 去除所有终结符号的表项"],s.log("[generateFirstSet start]");const i=e(t,r);s.log("[grammers after transferString2Grammers]",i);const o=new Array(...i.map((e=>({tocken:e.nonTerminal,terminals:new Set})))),l=new Map;i.forEach((e=>{l.set(e.nonTerminal,e.derivations)})),o.push(...t.terminals.map((e=>({tocken:e[0],terminals:new Set([e[0]]),isTerminal:!0})))),yield{ruleIndex:0,result:o},o.forEach((e=>{if(!e.isTerminal)for(let t of l.get(e.tocken))1!==t.length||t[0]!==n||e.terminals.has(n)||e.terminals.add(n)})),yield{ruleIndex:1,result:o};const a=new Map;for(let e of o)a.set(e.tocken,e);for(;;){let e=!1;if(o.forEach((r=>{if(!r.isTerminal)for(let i of l.get(r.tocken))for(let o=0;o<i.length;o++){const l=i[o];if(t.isTerminal(l)){if(r.terminals.has(l)||(s.log(l),e=!0,r.terminals.add(l)),l!==n)break}else{const t=a.get(l);if(t.terminals.forEach((t=>{t!==n&&(r.terminals.has(t)||(e=!0,r.terminals.add(t)))})),!t.terminals.has(n))break}o===i.length-1&&r.terminals.add(n)}})),!e)break;yield{ruleIndex:2,result:o}}yield{ruleIndex:3,result:o.filter((e=>!e.isTerminal)).sort(((e,t)=>e.tocken<t.tocken?-1:1)).map((e=>(e.terminals=new Set(Array.from(e.terminals).sort(((e,t)=>e<t?-1:1))),e)))}}(this.lexer,this.textGrammers)}getFollowSetProgressive(t){return t||(t=this.getFirstSet()),function*(t,i,o){yield["1. 将$放到FOLLOW(S)中","2. 如果存在一个产生式A => aBb ， 那么FIRST(b) 中除ε 之外的所有符号都在FOLLOW(B)中。attention: A => aBCd 那么把first(Cd)加入到Follow(B)中去","3.如果存在一个产生式 A => aB ， 或存在产生式 A => aBb 且FIRST(b) 包含 ε ，那么FOLLOW(A)中的所有符号都在FOLLOW(B)中。","4. 去除所有终结符号的表项"],s.log("[generateFllowSet start]"),o=o?Array.from(o):l(t,i);const a=e(t,i);s.log("[grammers after transferString2Grammers]",a);const c=new Array(...a.map((e=>({tocken:e.nonTerminal,terminals:new Set([r])})))),m=new Map;a.forEach((e=>{m.set(e.nonTerminal,e.derivations)})),c.push(...t.terminals.map((e=>({tocken:e[0],terminals:new Set([r]),isTerminal:!0})))),yield{ruleIndex:0,result:c};const f=new Map;for(let e of c)f.set(e.tocken,e);o.push(...t.terminals.map((e=>({tocken:e[0],terminals:new Set([e[0]]),isTerminal:!0}))));const h=new Map;for(let e of o)h.set(e.tocken,e);for(;;){let e=!1;if(a.forEach((t=>{for(let r of t.derivations)for(let t=r.length-2;t>=0;t--){const i=f.get(r[t]);for(let o=t+1;o<r.length;o++){const t=h.get(r[o]).terminals;for(let r of t)r!==n&&(i?.terminals.has(r)||(e=!0,i?.terminals.add(r)));if(!t.has(n))break}}})),e&&(yield{ruleIndex:1,result:c},e=!1),a.forEach((t=>{const r=f.get(t.nonTerminal);for(let i of t.derivations)for(let t=i.length-1;t>=0;t--){const o=i[t],s=f.get(o);for(let t of r.terminals)t!==n&&(s?.terminals.has(t)||(e=!0,s?.terminals.add(t)));if(!h.get(o).terminals.has(n))break}})),e&&(yield{ruleIndex:2,result:c}),!e)break}yield{ruleIndex:3,result:c.filter((e=>!e.isTerminal)).sort(((e,t)=>e.tocken<t.tocken?-1:1)).map((e=>(e.terminals=new Set(Array.from(e.terminals).sort(((e,t)=>e<t?-1:1))),e)))}}(this.lexer,this.textGrammers,t)}getPredictTableProgressive(t,r){return t||(t=this.getFirstSet()),r||(r=this.getFollowSet(t)),function*(t,r,i,o){yield["1. 对 First(u) 中的所有终结符 a （不含 ε ），置 M[A, a] = A -> u","2. 若 First(u) 含 ε ，则对 Follow(A) 中的所有符号 a （可含 $ ），置 M[A, a] = A -> u"];const l=e(t,r),c=[],m=new Map;t.nonTerminals.forEach((e=>{const t={nonTerminal:e,terminal2Derivation:new Map};m.set(e,t),c.push(t)}));const f=new Map,h=new Map;for(let e of o)h.set(e.tocken,e);for(let e of i)f.set(e.tocken,e);for(let e of l)for(let r of e.derivations){const i=a(t,r,f),o=m.get(e.nonTerminal);s.log(i);for(let t of i.terminals){if(t===n)continue;let i=o?.terminal2Derivation.get(t);i||(i={nonTerminal:e.nonTerminal,derivations:[]},o?.terminal2Derivation.set(t,i)),i.derivations.push(r),yield{ruleIndex:0,result:c}}if(i.terminals.has(n))for(let t of h.get(e.nonTerminal).terminals){let n=o?.terminal2Derivation.get(t);n||(n={nonTerminal:e.nonTerminal,derivations:[]},o?.terminal2Derivation.set(t,n)),n.derivations.push(r),yield{ruleIndex:1,result:c}}}}(this.lexer,this.textGrammers,t,r)}},exports.LRParser=class{initialStateNode;allStateNodesMap;lexer;grammers;constructor(){this.initialStateNode=null}generateState(e,t,n,i){if(!n||!i){const t=u(e);n=t.nonTerminals,i=t.terminals}const o="Augument_S";s.log("[nonTerminals]",n),s.log("[terminals]",i),this.grammers=e,this.lexer=new m(i,n);const l=new Map;for(let t of e){t=t.replaceAll(/\s/g,"");const e=t.split(/(=>)|(->)/).filter((e=>"=>"!==e&&"->"!==e&&e)),n=e[0],r=e[1].split("|").filter((e=>e)).map((e=>this.lexer.splitDerivation(e)));l.set(n,r)}s.log(l),this.initialStateNode={id:0,items:[{nonTerminal:o,derivation:[t],matchPoint:0}],edges:[]},k(this.initialStateNode.items,l,this.lexer);const a=new Map;this.allStateNodesMap=a,a.set(d(this.initialStateNode.items),this.initialStateNode);const c=[];let f=0;for(;a.size!=f;){f=a.size;for(let e of a.values())if(!c[e.id]){c[e.id]=!0;for(let t of e.items)t.nonTerminal===o&&1===t.matchPoint&&e.edges.push({tocken:r,next:{id:-1,items:[],edges:[]}});for(let t of n){let n=[];for(let r of e.items)r.derivation.length!==r.matchPoint&&r.derivation[r.matchPoint]===t&&n.push({nonTerminal:r.nonTerminal,derivation:r.derivation,matchPoint:r.matchPoint+1});if(!n.length)continue;k(n,l,this.lexer);const r=d(n);a.has(r)||a.set(r,{id:a.size,items:n,edges:[]}),e.edges.push({tocken:t,next:a.get(r)})}for(let t of i){let n=[];for(let r of e.items)r.derivation.length!==r.matchPoint&&r.derivation[r.matchPoint]===t[0]&&n.push({nonTerminal:r.nonTerminal,derivation:r.derivation,matchPoint:r.matchPoint+1});if(!n.length)continue;k(n,l,this.lexer);const r=d(n);a.has(r)||a.set(r,{id:a.size,items:n,edges:[]}),e.edges.push({tocken:t[0],next:a.get(r)})}}}}predictInput(e,t){if(!this.lexer)throw new Error("[generatePredictTable] must call generateState before generatePredictTable");let n=[];for(e=e.replaceAll(/\s/g,""),n.push({stack:[0],symbols:[],input:[...this.lexer.splitDerivation(e),r]});;){const e=n[n.length-1],r=JSON.parse(JSON.stringify(e)),i=t[e.stack[e.stack.length-1]].action.get(e.input[0]);if(i.length>1)throw new Error(`move collision ${i}`);if(!i.length)throw new Error(`move is empty ${i}`);let o=i[0];if("acc"===o){e.move="接受";break}if(o.startsWith("S"))e.move=`移入${e.input[0]}`,r.symbols.push(r.input.shift()),r.stack.push(Number(o.slice(1)));else{e.move=`根据${o}归约`;const n=o.slice(2,-1).replaceAll(/\s/g,""),i=n.split("=>")[0],s=this.lexer.splitDerivation(n.split("=>")[1]);for(let e=0;e<s.length;e++)r.stack.pop(),r.symbols.pop();r.symbols.push(i);const l=t[e.stack[r.stack.length-1]];r.stack.push(l.goto.get(i)[0])}n.push(r)}return n}generateLR0PredictTable(){if(!this.initialStateNode||!this.allStateNodesMap||!this.lexer)throw new Error("[generatePredictTable] must call generateState before generatePredictTable");const e=[];for(let t of this.allStateNodesMap.values()){let n={id:t.id,action:new Map,goto:new Map};for(let e of this.lexer.nonTerminals)n.goto.set(e,[]);for(let e of this.lexer.terminals)n.action.set(e[0],[]);n.action.set(r,[]);for(let e of t.edges)e.tocken!==r?this.lexer.isTerminal(e.tocken)?n.action.get(e.tocken).push(`S${e.next.id}`):n.goto.get(e.tocken).push(e.next.id):n.action.get(e.tocken).push("acc");for(let e of t.items)if(e.matchPoint===e.derivation.length)for(let t of this.lexer.terminals)n.action.get(t[0]).push(`r(${e.nonTerminal} => ${e.derivation.join(" ")})`);e.push(n)}return e.sort(((e,t)=>e.id-t.id)),e}generateSLR1PredictTable(){if(!(this.initialStateNode&&this.allStateNodesMap&&this.lexer&&this.grammers))throw new Error("[generatePredictTable] must call generateState before generatePredictTable");const e=c(this.lexer,this.grammers),t=[];for(let n of this.allStateNodesMap.values()){let i={id:n.id,action:new Map,goto:new Map};for(let e of this.lexer.nonTerminals)i.goto.set(e,[]);for(let e of this.lexer.terminals)i.action.set(e[0],[]);i.action.set(r,[]);for(let e of n.edges)e.tocken!==r?this.lexer.isTerminal(e.tocken)?i.action.get(e.tocken).push(`S${e.next.id}`):i.goto.get(e.tocken).push(e.next.id):i.action.get(e.tocken).push("acc");for(let t of n.items)if(t.matchPoint===t.derivation.length){let n=[];for(let r of e)if(r.tocken===t.nonTerminal){n=[...r.terminals.values()];break}for(let e of n)i.action.get(e[0]).push(`r(${t.nonTerminal} => ${t.derivation.join(" ")})`)}t.push(i)}return t.sort(((e,t)=>e.id-t.id)),t}get stateGraph(){const e=[],t=n=>{if(e[n.id])return e[n.id];const r={};e[n.id]=r,r.id=n.id,r.items=n.items.map((e=>T(e))),r.edges=[];for(let e of n.edges)r.edges.push({tocken:e.tocken,next:t(e.next)});return r};return t(this.initialStateNode)}},exports.Lexer=m,exports.checkNeedClearRightRecursion=function(e,t,n){if(!t||!n){const r=u(e);t=r.nonTerminals,n=r.terminals}s.log("[nonTerminals]",t),s.log("[terminals]",n);let r=new m(n,t);const i=new Map;for(let t of e){t=t.replaceAll(/\s/g,"");const e=t.split(/(=>)|(->)/).filter((e=>"=>"!==e&&"->"!==e&&e)),n=e[0],o=e[1].split("|").filter((e=>e)).map((e=>r.splitDerivation(e)));i.set(n,o)}s.log("[nonTerminals2DerivationMap]",i);for(let e=0;e<t.length;e++){const n=i.get(t[e]);for(let r=n.length-1;r>=0;r--){if(n[r][0]===t[e])return!0}}return!1},exports.checkNeedliftUpCommonTocken=function(e,t,n){let r=e;if(!t||!n){const r=u(e);t=r.nonTerminals,n=r.terminals}let i=new m(n,t);for(let e of r){e=e.replaceAll(/\s/g,"");const t=e.split(/(=>)|(->)/).filter((e=>"=>"!==e&&"->"!==e&&e))[1].split("|").filter((e=>e)).map((e=>(s.log("[debug]",r),i.splitDerivation(e)))),n=new Map;t.forEach((e=>{let t=n.get(e[0]);t?t.push(e.slice(1)):t=[e.slice(1)],n.set(e[0],t)}));for(let e of n.keys())if(1!==n.get(e)?.length)return!0}return!1},exports.checkNeedunionGrammers=function(e){let t=new Map;for(let n of e){n=n.replaceAll(/\s/g,"");const e=n.split(/(=>)|(->)/).filter((e=>"=>"!==e&&"->"!==e&&e)),r=e[0],i=e[1];if(t.has(r))return!0;t.set(r,[i])}return!1},exports.clearRightRecursion=function(e,t,r){const i=[];if(!t||!r){const n=u(e);t=n.nonTerminals,r=n.terminals}s.log("[nonTerminals]",t),s.log("[terminals]",r);let o=new m(r,t);const l=new Map;for(let t of e){t=t.replaceAll(/\s/g,"");const e=t.split(/(=>)|(->)/).filter((e=>"=>"!==e&&"->"!==e&&e)),n=e[0],r=e[1].split("|").filter((e=>e)).map((e=>o.splitDerivation(e)));l.set(n,r)}s.log("[nonTerminals2DerivationMap]",l);for(let e=0;e<t.length;e++){const r=l.get(t[e]);for(let n=0;n<e;n++){const e=l.get(t[n]);for(let i=r.length-1;i>=0;i--){const o=r[i];if(o[0]===t[n]){s.log(o,t[n]);for(let t of e)s.log("[-]",t),r?.push([...t,...o.slice(1)]);r?.splice(i,1)}}}const i=[];for(let n=r.length-1;n>=0;n--){r[n][0]===t[e]&&i.push(n)}if(i.length){const s=o.getNewNonTerminal(t[e]),a=[],c=[];for(let e=r.length-1;e>=0;e--)-1===i.indexOf(e)&&a.push([...r[e][0]===n?r[e].slice(1):r[e],s]);for(let e of i)c.push([...r[e].slice(1),s]);c.push([n]),l.set(t[e],[...a,...i.length?[]:r]),l.set(s,c)}s.log("[nonTerminals2DerivationMap in process]",l,r)}for(let e of l.keys()){const t=l.get(e).map((e=>e.join(" "))).join(" | ");i.push(`${e} => ${t}`)}return i},exports.getTockFromSimpleGrammers=u,exports.liftUpCommonTocken=function(e,t,n){let r=e;if(!t||!n){const r=u(e);t=r.nonTerminals,n=r.terminals}let i=new m(n,t);for(;;){let e=[];const t=r.map((t=>{const n=(t=t.replaceAll(/\s/g,"")).split(/(=>)|(->)/).filter((e=>"=>"!==e&&"->"!==e&&e)),o=n[0],l=n[1].split("|").filter((e=>e)).map((e=>(s.log("[debug]",r),i.splitDerivation(e)))),a=[],c=new Map;l.forEach((e=>{let t=c.get(e[0]);t?t.push(e.slice(1)):t=[e.slice(1)],c.set(e[0],t)}));for(let t of c.keys()){if(1===c.get(t)?.length){a.push(t+c.get(t)[0].join(""));continue}const n=c.get(t),r=i.getNewNonTerminal(o);a.push(t+r),e.push(r+" => "+n?.map((e=>e.join(" "))).join(" | "))}return o+" => "+a.join(" | ")}));s.log("[pre]",t,e);const n=[...t,...e];if(s.log("[com]",r,n),r.length===n.length)break;r=n}return r},exports.unionGrammers=function(e,t,n){let r=new Map;const i=[];if(!t||!n){const r=u(e);t=r.nonTerminals,n=r.terminals}let o=new m(n,t);e.forEach((e=>{const t=(e=e.replaceAll(/\s/g,"")).split(/(=>)|(->)/).filter((e=>"=>"!==e&&"->"!==e&&e)),n=t[0],l=t[1].split("|").filter((e=>e)).map((e=>(s.log("[debug]",i),o.splitDerivation(e))));if(r.has(n)){const e=r.get(n);l.forEach((t=>{const n=t.join(" ");-1===e?.indexOf(n)&&e.push(n)}))}else r.set(n,l.map((e=>e.join(" "))))}));for(let e of r.keys()){const t=[...new Set(r.get(e))];i.push(`${e} => ${t.join("|")}`.split("|").join(" | "))}return s.log(i),i};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguY2pzLmpzIiwic291cmNlcyI6WyIuLi9zcmMvdXRpbHMvaW5kZXgudHMiLCIuLi9zcmMvdXRpbHMvY29uc3QudHMiLCIuLi9zcmMvdXRpbHMvbG9nLnRzIiwiLi4vc3JjL2ZpcnN0U2V0LnRzIiwiLi4vc3JjL2ZvbGxvd1NldC50cyIsIi4uL3NyYy9sZXhlci50cyIsIi4uL3NyYy9MTDEvcHJlZGljdFRhYmxlLnRzIiwiLi4vc3JjL3NpbXBsZUdyYW1tZXJIZWxwZXIudHMiLCIuLi9zcmMvTFIwL0xSU3RhdGUudHMiLCIuLi9zcmMvTEwxL3BhcnNlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTGV4ZXIgZnJvbSBcIkAvbGV4ZXJcIjtcclxuaW1wb3J0IHsgR3JhbW1lcnMgfSBmcm9tIFwiQC90eXBlcy90eXBlXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmZXJTdHJpbmcyR3JhbW1lcnMobGV4ZXI6IExleGVyLCBncmFtbWVyczogQXJyYXk8c3RyaW5nPik6IEdyYW1tZXJzIHtcclxuICAgIHJldHVybiBncmFtbWVycy5tYXAoZ3JhbW1lciA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGdyYW1tZXIucmVwbGFjZUFsbCgvXFxzL2csIFwiXCIpO1xyXG4gICAgfSkubWFwKGdyYW1tZXIgPT4ge1xyXG4gICAgICAgIGNvbnN0IGFyciA9IGdyYW1tZXIuc3BsaXQoLyg9Pil8KC0+KS8pLmZpbHRlcih2ID0+IHYgIT09IFwiPT5cIiAmJiB2ICE9PSBcIi0+XCIgJiYgdik7XHJcbiAgICAgICAgY29uc3QgZGVyaXZhdGlvbnMgPSBhcnJbMV0uc3BsaXQoXCJ8XCIpLmZpbHRlcih2ID0+IHYgJiYgdiAhPT0gXCJ8XCIpLm1hcChkZXJpdmF0aW9uID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGxleGVyLnNwbGl0RGVyaXZhdGlvbihkZXJpdmF0aW9uKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5vblRlcm1pbmFsOiBhcnJbMF0sXHJcbiAgICAgICAgICAgIGRlcml2YXRpb25zOiBkZXJpdmF0aW9ucyxcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1NldEluY2x1ZGVzKGE6IFNldDx1bmtub3duPiwgYjogU2V0PHVua25vd24+KTogYm9vbGVhbiB7XHJcbiAgICBmb3IgKGxldCBpdGVtIG9mIGIua2V5cygpKSB7XHJcbiAgICAgICAgaWYgKCFhLmhhcyhpdGVtKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzYWZlUmVnQ2hhcmFjdGVyKGNoYXI6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBzd2l0Y2ggKGNoYXIpIHtcclxuICAgICAgICBjYXNlIFwiK1wiOlxyXG4gICAgICAgIGNhc2UgXCIqXCI6XHJcbiAgICAgICAgY2FzZSBcIihcIjpcclxuICAgICAgICBjYXNlIFwiKVwiOlxyXG4gICAgICAgICAgICByZXR1cm4gYFxcXFwke2NoYXJ9YDtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gY2hhcjtcclxuICAgIH1cclxufSIsIlxyXG5cclxuZXhwb3J0IGNvbnN0IEVtcHR5Q2hhcmFjdGVyID0gXCLOtVwiO1xyXG5leHBvcnQgY29uc3QgRW5kaW5nQ2hhcmFjdGVyID0gXCIkXCI7IiwiLypTVEFSVC5PTkxZVEVTVCovXHJcbmltcG9ydCBjb2xvcnMgZnJvbSBcImNvbG9yc1wiXHJcbi8qRU5ELk9OTFlURVNUKi9cclxuXHJcbmVudW0gTG9nTGV2ZWwge1xyXG4gICAgTm9ybWFsLFxyXG4gICAgV2Fybm5pbmcsXHJcbiAgICBFcnJvcixcclxuICAgIE5vbmVcclxufVxyXG5pbnRlcmZhY2UgTG9nQ2hhbm5lbCB7XHJcbiAgICBsb2coLi4uZGF0YTogYW55W10pOiB2b2lkO1xyXG4gICAgd2FybiguLi5kYXRhOiBhbnlbXSk6IHZvaWQ7XHJcbiAgICBlcnJvciguLi5kYXRhOiBhbnlbXSk6IHZvaWQ7XHJcblxyXG59XHJcblxyXG5jbGFzcyBMb2dnZXIge1xyXG4gICAgcHVibGljIGxvZ0xldmVsOiBMb2dMZXZlbDtcclxuICAgIHB1YmxpYyBsb2dDaGFubmVsOiBMb2dDaGFubmVsO1xyXG4gICAgY29uc3RydWN0b3IobG9nTGV2ZWw6IExvZ0xldmVsID0gTG9nTGV2ZWwuTm9ybWFsLCBsb2dDaGFubmVsOiBMb2dDaGFubmVsID0gY29uc29sZSkge1xyXG4gICAgICAgIHRoaXMubG9nTGV2ZWwgPSBsb2dMZXZlbDtcclxuICAgICAgICB0aGlzLmxvZ0NoYW5uZWwgPSBsb2dDaGFubmVsO1xyXG4gICAgfVxyXG4gICAgbG9nKC4uLmluZm86IGFueVtdKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubG9nTGV2ZWwgPD0gTG9nTGV2ZWwuTm9ybWFsKSB7XHJcbiAgICAgICAgICAgIC8qU1RBUlQuT05MWVRFU1QqL1xyXG4gICAgICAgICAgICBjb2xvcnMuZW5hYmxlKCk7XHJcbiAgICAgICAgICAgIC8qRU5ELk9OTFlURVNUKi9cclxuICAgICAgICAgICAgdGhpcy5sb2dDaGFubmVsLmxvZyhcIltub3JtYWxdXCIvKlNUQVJULk9OTFlURVNUKi8ucmFpbmJvdy8qRU5ELk9OTFlURVNUKi8sIC4uLmluZm8pO1xyXG4gICAgICAgICAgICAvKlNUQVJULk9OTFlURVNUKi9cclxuICAgICAgICAgICAgY29sb3JzLmRpc2FibGUoKTtcclxuICAgICAgICAgICAgLypFTkQuT05MWVRFU1QqL1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHdhcm4oLi4uaW5mbzogYW55W10pIHtcclxuICAgICAgICBpZiAodGhpcy5sb2dMZXZlbCA8PSBMb2dMZXZlbC5XYXJubmluZykge1xyXG4gICAgICAgICAgICAvKlNUQVJULk9OTFlURVNUKi9cclxuICAgICAgICAgICAgY29sb3JzLmVuYWJsZSgpO1xyXG4gICAgICAgICAgICAvKkVORC5PTkxZVEVTVCovXHJcbiAgICAgICAgICAgIHRoaXMubG9nQ2hhbm5lbC53YXJuKFwiW3dhcm5dXCIvKlNUQVJULk9OTFlURVNUKi8ueWVsbG93LypFTkQuT05MWVRFU1QqLywgLi4uaW5mbyk7XHJcbiAgICAgICAgICAgIC8qU1RBUlQuT05MWVRFU1QqL1xyXG4gICAgICAgICAgICBjb2xvcnMuZGlzYWJsZSgpO1xyXG4gICAgICAgICAgICAvKkVORC5PTkxZVEVTVCovXHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVycm9yKC4uLmluZm86IGFueVtdKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubG9nTGV2ZWwgPD0gTG9nTGV2ZWwuRXJyb3IpIHtcclxuICAgICAgICAgICAgLypTVEFSVC5PTkxZVEVTVCovXHJcbiAgICAgICAgICAgIGNvbG9ycy5lbmFibGUoKTtcclxuICAgICAgICAgICAgLypFTkQuT05MWVRFU1QqL1xyXG4gICAgICAgICAgICB0aGlzLmxvZ0NoYW5uZWwuZXJyb3IoXCJbZXJyb3JdXCIvKlNUQVJULk9OTFlURVNUKi8ucmVkLypFTkQuT05MWVRFU1QqLywgLi4uaW5mbyk7XHJcbiAgICAgICAgICAgIC8qU1RBUlQuT05MWVRFU1QqL1xyXG4gICAgICAgICAgICBjb2xvcnMuZGlzYWJsZSgpO1xyXG4gICAgICAgICAgICAvKkVORC5PTkxZVEVTVCovXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgbG9nVG8obG9nQ2hhbm5lbDogTG9nQ2hhbm5lbCkge1xyXG4gICAgICAgIHRoaXMubG9nQ2hhbm5lbCA9IGxvZ0NoYW5uZWw7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNsYXNzIE51bGxMb2dDaGFubmVsIHtcclxuICAgIHB1YmxpYyBsb2coLi4uZGF0YTogYW55W10pOiB2b2lkIHsgfVxyXG4gICAgcHVibGljIHdhcm4oLi4uZGF0YTogYW55W10pOiB2b2lkIHsgfVxyXG4gICAgcHVibGljIGVycm9yKC4uLmRhdGE6IGFueVtdKTogdm9pZCB7IH1cclxufVxyXG5leHBvcnQgY29uc3QgbnVsbExvZ0NoYW5uZWwgPSBuZXcgTnVsbExvZ0NoYW5uZWwoKTtcclxuXHJcbmxldCBsb2dMZXZlbF9pbml0ID0gTG9nTGV2ZWwuTm9ybWFsXHJcbnZhciBfX2Vudl9fID0gXCJcIjtcclxuc3dpdGNoIChfX2Vudl9fKSB7XHJcbiAgICBjYXNlIFwicHJvZFwiOlxyXG4gICAgICAgIGxvZ0xldmVsX2luaXQgPSBMb2dMZXZlbC5FcnJvclxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBMb2dnZXIobG9nTGV2ZWxfaW5pdClcclxuIiwiaW1wb3J0IExleGVyIGZyb20gXCIuL2xleGVyXCI7XHJcbmltcG9ydCB7IEdyYW1tZXJTZXQsIEdyYW1tZXJTZXRMaW5lLCBOb25UZXJtaW5hbCwgUHJvY2VzcywgUnVsZSwgVGVybWluYWwgfSBmcm9tIFwiLi90eXBlcy90eXBlXCI7XHJcbmltcG9ydCB7IHRyYW5zZmVyU3RyaW5nMkdyYW1tZXJzIH0gZnJvbSBcIi4vdXRpbHNcIlxyXG5pbXBvcnQgeyBFbXB0eUNoYXJhY3RlciB9IGZyb20gXCIuL3V0aWxzL2NvbnN0XCI7XHJcbmltcG9ydCBsb2cgZnJvbSBcIi4vdXRpbHMvbG9nXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZW5lcmF0ZUZpcnN0U2V0KGxleGVyOiBMZXhlciwgaW5HcmFtbWVyczogQXJyYXk8c3RyaW5nPik6IEdyYW1tZXJTZXQge1xyXG4gICAgbG9nLmxvZyhcIltnZW5lcmF0ZUZpcnN0U2V0IHN0YXJ0XVwiKTtcclxuICAgIGNvbnN0IGdyYW1tZXJzID0gdHJhbnNmZXJTdHJpbmcyR3JhbW1lcnMobGV4ZXIsIGluR3JhbW1lcnMpO1xyXG4gICAgbG9nLmxvZyhcIltncmFtbWVycyBhZnRlciB0cmFuc2ZlclN0cmluZzJHcmFtbWVyc11cIiwgZ3JhbW1lcnMpO1xyXG4gICAgY29uc3QgZmlyc3RTZXQ6IEdyYW1tZXJTZXQgPSBuZXcgQXJyYXkoLi4uZ3JhbW1lcnMubWFwKGdyYW1tZXIgPT4ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvY2tlbjogZ3JhbW1lci5ub25UZXJtaW5hbCxcclxuICAgICAgICAgICAgdGVybWluYWxzOiBuZXcgU2V0PFRlcm1pbmFsPigpLFxyXG4gICAgICAgIH1cclxuICAgIH0pKTtcclxuICAgIGNvbnN0IGdyYW1tZXJNYXAgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nW11bXT4oKTtcclxuICAgIGdyYW1tZXJzLmZvckVhY2goZ3JhbW1lciA9PiB7XHJcbiAgICAgICAgZ3JhbW1lck1hcC5zZXQoZ3JhbW1lci5ub25UZXJtaW5hbCwgZ3JhbW1lci5kZXJpdmF0aW9ucyk7XHJcbiAgICB9KVxyXG4gICAgLyogXHJcbiAgICAgICAg5aaC5p6cWOW8j+S4gOS4que7iOe7k+espuWPt++8jOmCo+S5iEZJUlNUKFgpID0gWCBcclxuICAgICovXHJcbiAgICBmaXJzdFNldC5wdXNoKC4uLmxleGVyLnRlcm1pbmFscy5tYXAodGVybWluYWwgPT4ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvY2tlbjogdGVybWluYWxbMF0sXHJcbiAgICAgICAgICAgIHRlcm1pbmFsczogbmV3IFNldChbdGVybWluYWxbMF1dKSxcclxuICAgICAgICAgICAgaXNUZXJtaW5hbDogdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgIH0pKVxyXG4gICAgLyogXHJcbiAgICAgICAg5aaC5p6cIFggPT4gzrUg5piv5LiA5Liq5Lqn55Sf5byP77yM6YKj5LmI5bCGZeWKoOS6uuWIsCBGSVJTVO+8iFgp5Lit44CCXHJcbiAgICAqL1xyXG4gICAgZmlyc3RTZXQuZm9yRWFjaChzZXRMaW5lID0+IHtcclxuICAgICAgICBpZiAoc2V0TGluZS5pc1Rlcm1pbmFsKSByZXR1cm47XHJcbiAgICAgICAgZm9yIChsZXQgZGVyaXZhdGlvbiBvZiBncmFtbWVyTWFwLmdldChzZXRMaW5lLnRvY2tlbikhKSB7XHJcbiAgICAgICAgICAgIGlmIChkZXJpdmF0aW9uLmxlbmd0aCA9PT0gMSAmJiBkZXJpdmF0aW9uWzBdID09PSBFbXB0eUNoYXJhY3RlciAmJiAhc2V0TGluZS50ZXJtaW5hbHMuaGFzKEVtcHR5Q2hhcmFjdGVyKSkge1xyXG4gICAgICAgICAgICAgICAgc2V0TGluZS50ZXJtaW5hbHMuYWRkKEVtcHR5Q2hhcmFjdGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICBjb25zdCBmaXJzdFNldE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBHcmFtbWVyU2V0TGluZT4oKTtcclxuICAgIGZvciAobGV0IHNldExpbmUgb2YgZmlyc3RTZXQpIHtcclxuICAgICAgICBmaXJzdFNldE1hcC5zZXQoc2V0TGluZS50b2NrZW4sIHNldExpbmUpO1xyXG4gICAgfVxyXG4gICAgLy8g5b6q546v5LiL6Z2i5q2l6aqkIOebtOWIsOayoeacieWPmOWMluS4uuatolxyXG4gICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICBsZXQgaGFzQ2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgLyogXHJcbiAgICAgICAgICAgIEEgPT4gQjBCMUIyQjNcclxuICAgICAgICAgICAgaSA9IDBcclxuICAgICAgICAgICAgRklSU1QoQmkpIC0gRW1wdHlDaGFyYWN0ZXIg5Yqg5YWl5YiwIEZJUlNUKEEp5LitXHJcbiAgICAgICAgICAgIOWmguaenEZJUlNUKEIxKeS4jeWQq+aciUVtcHR5Q2hhcmFjdGVy6YCA5Ye65b6q546vXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICDoi6VCMC1CM+Wdh+WQq+aciUVtcHR5Q2hhcmFjdGVyIOWwhkVtcHR5Q2hhcmFjdGVy5Yqg5YWl5YiwRklSU1QoQSnkuK1cclxuICAgICAgICAqL1xyXG4gICAgICAgIGZpcnN0U2V0LmZvckVhY2goc2V0TGluZSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChzZXRMaW5lLmlzVGVybWluYWwpIHJldHVybjtcclxuICAgICAgICAgICAgZm9yIChsZXQgZGVyaXZhdGlvbiBvZiBncmFtbWVyTWFwLmdldChzZXRMaW5lLnRvY2tlbikhKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlcml2YXRpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2NrZW4gPSBkZXJpdmF0aW9uW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsZXhlci5pc1Rlcm1pbmFsKHRvY2tlbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzZXRMaW5lLnRlcm1pbmFscy5oYXModG9ja2VuKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmxvZyh0b2NrZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldExpbmUudGVybWluYWxzLmFkZCh0b2NrZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2NrZW4gIT09IEVtcHR5Q2hhcmFjdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRTZXRMaW5lID0gZmlyc3RTZXRNYXAuZ2V0KHRvY2tlbikhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0U2V0TGluZS50ZXJtaW5hbHMuZm9yRWFjaCh0ZXJtaW5hbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVybWluYWwgIT09IEVtcHR5Q2hhcmFjdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzZXRMaW5lLnRlcm1pbmFscy5oYXModGVybWluYWwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldExpbmUudGVybWluYWxzLmFkZCh0ZXJtaW5hbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5leHRTZXRMaW5lLnRlcm1pbmFscy5oYXMoRW1wdHlDaGFyYWN0ZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gZGVyaXZhdGlvbi5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldExpbmUudGVybWluYWxzLmFkZChFbXB0eUNoYXJhY3Rlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBpZiAoIWhhc0NoYW5nZSkgYnJlYWs7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmlyc3RTZXQuZmlsdGVyKHYgPT4gIXYuaXNUZXJtaW5hbCkuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgIGlmIChhLnRvY2tlbiA8IGIudG9ja2VuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICB9XHJcbiAgICB9KS5tYXAoc2V0TGluZSA9PiB7XHJcbiAgICAgICAgc2V0TGluZS50ZXJtaW5hbHMgPSBuZXcgU2V0KEFycmF5LmZyb20oc2V0TGluZS50ZXJtaW5hbHMpLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgaWYgKGEgPCBiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKVxyXG4gICAgICAgIHJldHVybiBzZXRMaW5lO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXREZXJpdmF0aW9uRmlyc3RTZXQobGV4ZXI6IExleGVyLCBkZXJpdmF0aW9uOiBzdHJpbmdbXSwgZmlyc3RTZXRNYXA6IE1hcDxOb25UZXJtaW5hbCwgR3JhbW1lclNldExpbmU+KTogR3JhbW1lclNldExpbmUge1xyXG4gICAgY29uc3QgdGVybWluYWxzID0gbmV3IFNldDxUZXJtaW5hbD4oKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVyaXZhdGlvbi5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHRvY2tlbiA9IGRlcml2YXRpb25baV07XHJcbiAgICAgICAgaWYgKGxleGVyLmlzVGVybWluYWwodG9ja2VuKSkge1xyXG4gICAgICAgICAgICBpZiAodG9ja2VuICE9PSBFbXB0eUNoYXJhY3Rlcikge1xyXG4gICAgICAgICAgICAgICAgdGVybWluYWxzLmFkZCh0b2NrZW4pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmaXJzdFNldE1hcC5nZXQodG9ja2VuKT8udGVybWluYWxzLmZvckVhY2godGVybWluYWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGVybWluYWxzLmFkZCh0ZXJtaW5hbCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIGlmICghZmlyc3RTZXRNYXAuZ2V0KHRvY2tlbikhLnRlcm1pbmFscy5oYXMoRW1wdHlDaGFyYWN0ZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaSA9PT0gZGVyaXZhdGlvbi5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgIHRlcm1pbmFscy5hZGQoRW1wdHlDaGFyYWN0ZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdG9ja2VuOiBkZXJpdmF0aW9uLmpvaW4oXCJcIiksXHJcbiAgICAgICAgdGVybWluYWxzLFxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24qIGdlbmVyYXRlRmlyc3RTZXRQcm9ncmVzc2l2ZShsZXhlcjogTGV4ZXIsIGluR3JhbW1lcnM6IEFycmF5PHN0cmluZz4pOiBJdGVyYWJsZUl0ZXJhdG9yPFJ1bGUgfCBQcm9jZXNzPEdyYW1tZXJTZXQ+PiB7XHJcbiAgICB5aWVsZCBbXHJcbiAgICAgICAgXCIxLiDlpoLmnpxY5byP5LiA5Liq57uI57uT56ym5Y+377yM6YKj5LmIRklSU1QoWCkgPSBYIFwiLFxyXG4gICAgICAgIFwiMi4g5aaC5p6cIFggPT4gzrUg5piv5LiA5Liq5Lqn55Sf5byP77yM6YKj5LmI5bCGZeWKoOS6uuWIsCBGSVJTVO+8iFgp5Lit44CCXCIsXHJcbiAgICAgICAgYDMuIEEgPT4gQjBCMUIyQjNcclxuICAgICAgICAgICAgaSA9IDBcclxuICAgICAgICAgICAgRklSU1QoQmkpIC0gRW1wdHlDaGFyYWN0ZXIg5Yqg5YWl5YiwIEZJUlNUKEEp5LitXHJcbiAgICAgICAgICAgIOWmguaenEZJUlNUKEIxKeS4jeWQq+aciUVtcHR5Q2hhcmFjdGVy6YCA5Ye65b6q546vXHJcbiAgICAgICAgICAgIOiLpUIwIC0gQjPlnYflkKvmnIlFbXB0eUNoYXJhY3RlciDlsIZFbXB0eUNoYXJhY3RlcuWKoOWFpeWIsEZJUlNUKEEp5LitXHJcbiAgICAgICAgYCxcclxuICAgICAgICBcIjQuIOWOu+mZpOaJgOaciee7iOe7k+espuWPt+eahOihqOmhuVwiLFxyXG4gICAgXVxyXG4gICAgbG9nLmxvZyhcIltnZW5lcmF0ZUZpcnN0U2V0IHN0YXJ0XVwiKTtcclxuICAgIGNvbnN0IGdyYW1tZXJzID0gdHJhbnNmZXJTdHJpbmcyR3JhbW1lcnMobGV4ZXIsIGluR3JhbW1lcnMpO1xyXG4gICAgbG9nLmxvZyhcIltncmFtbWVycyBhZnRlciB0cmFuc2ZlclN0cmluZzJHcmFtbWVyc11cIiwgZ3JhbW1lcnMpO1xyXG4gICAgY29uc3QgZmlyc3RTZXQ6IEdyYW1tZXJTZXQgPSBuZXcgQXJyYXkoLi4uZ3JhbW1lcnMubWFwKGdyYW1tZXIgPT4ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvY2tlbjogZ3JhbW1lci5ub25UZXJtaW5hbCxcclxuICAgICAgICAgICAgdGVybWluYWxzOiBuZXcgU2V0PFRlcm1pbmFsPigpLFxyXG4gICAgICAgIH1cclxuICAgIH0pKTtcclxuICAgIGNvbnN0IGdyYW1tZXJNYXAgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nW11bXT4oKTtcclxuICAgIGdyYW1tZXJzLmZvckVhY2goZ3JhbW1lciA9PiB7XHJcbiAgICAgICAgZ3JhbW1lck1hcC5zZXQoZ3JhbW1lci5ub25UZXJtaW5hbCwgZ3JhbW1lci5kZXJpdmF0aW9ucyk7XHJcbiAgICB9KVxyXG4gICAgLyogXHJcbiAgICAgICAg5aaC5p6cWOW8j+S4gOS4que7iOe7k+espuWPt++8jOmCo+S5iEZJUlNUKFgpID0gWCBcclxuICAgICovXHJcbiAgICBmaXJzdFNldC5wdXNoKC4uLmxleGVyLnRlcm1pbmFscy5tYXAodGVybWluYWwgPT4ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvY2tlbjogdGVybWluYWxbMF0sXHJcbiAgICAgICAgICAgIHRlcm1pbmFsczogbmV3IFNldChbdGVybWluYWxbMF1dKSxcclxuICAgICAgICAgICAgaXNUZXJtaW5hbDogdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgIH0pKVxyXG4gICAgeWllbGQge1xyXG4gICAgICAgIHJ1bGVJbmRleDogMCxcclxuICAgICAgICByZXN1bHQ6IGZpcnN0U2V0XHJcbiAgICB9O1xyXG4gICAgLyogXHJcbiAgICAgICAg5aaC5p6cIFggPT4gzrUg5piv5LiA5Liq5Lqn55Sf5byP77yM6YKj5LmI5bCGZeWKoOS6uuWIsCBGSVJTVO+8iFgp5Lit44CCXHJcbiAgICAqL1xyXG4gICAgZmlyc3RTZXQuZm9yRWFjaChzZXRMaW5lID0+IHtcclxuICAgICAgICBpZiAoc2V0TGluZS5pc1Rlcm1pbmFsKSByZXR1cm47XHJcbiAgICAgICAgZm9yIChsZXQgZGVyaXZhdGlvbiBvZiBncmFtbWVyTWFwLmdldChzZXRMaW5lLnRvY2tlbikhKSB7XHJcbiAgICAgICAgICAgIGlmIChkZXJpdmF0aW9uLmxlbmd0aCA9PT0gMSAmJiBkZXJpdmF0aW9uWzBdID09PSBFbXB0eUNoYXJhY3RlciAmJiAhc2V0TGluZS50ZXJtaW5hbHMuaGFzKEVtcHR5Q2hhcmFjdGVyKSkge1xyXG4gICAgICAgICAgICAgICAgc2V0TGluZS50ZXJtaW5hbHMuYWRkKEVtcHR5Q2hhcmFjdGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICB5aWVsZCB7XHJcbiAgICAgICAgcnVsZUluZGV4OiAxLFxyXG4gICAgICAgIHJlc3VsdDogZmlyc3RTZXRcclxuICAgIH07XHJcbiAgICBjb25zdCBmaXJzdFNldE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBHcmFtbWVyU2V0TGluZT4oKTtcclxuICAgIGZvciAobGV0IHNldExpbmUgb2YgZmlyc3RTZXQpIHtcclxuICAgICAgICBmaXJzdFNldE1hcC5zZXQoc2V0TGluZS50b2NrZW4sIHNldExpbmUpO1xyXG4gICAgfVxyXG4gICAgLy8g5b6q546v5LiL6Z2i5q2l6aqkIOebtOWIsOayoeacieWPmOWMluS4uuatolxyXG4gICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICBsZXQgaGFzQ2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgLyogXHJcbiAgICAgICAgICAgIEEgPT4gQjBCMUIyQjNcclxuICAgICAgICAgICAgaSA9IDBcclxuICAgICAgICAgICAgRklSU1QoQmkpIC0gRW1wdHlDaGFyYWN0ZXIg5Yqg5YWl5YiwIEZJUlNUKEEp5LitXHJcbiAgICAgICAgICAgIOWmguaenEZJUlNUKEIxKeS4jeWQq+aciUVtcHR5Q2hhcmFjdGVy6YCA5Ye65b6q546vXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICDoi6VCMC1CM+Wdh+WQq+aciUVtcHR5Q2hhcmFjdGVyIOWwhkVtcHR5Q2hhcmFjdGVy5Yqg5YWl5YiwRklSU1QoQSnkuK1cclxuICAgICAgICAqL1xyXG4gICAgICAgIGZpcnN0U2V0LmZvckVhY2goc2V0TGluZSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChzZXRMaW5lLmlzVGVybWluYWwpIHJldHVybjtcclxuICAgICAgICAgICAgZm9yIChsZXQgZGVyaXZhdGlvbiBvZiBncmFtbWVyTWFwLmdldChzZXRMaW5lLnRvY2tlbikhKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlcml2YXRpb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2NrZW4gPSBkZXJpdmF0aW9uW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsZXhlci5pc1Rlcm1pbmFsKHRvY2tlbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzZXRMaW5lLnRlcm1pbmFscy5oYXModG9ja2VuKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmxvZyh0b2NrZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldExpbmUudGVybWluYWxzLmFkZCh0b2NrZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b2NrZW4gIT09IEVtcHR5Q2hhcmFjdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRTZXRMaW5lID0gZmlyc3RTZXRNYXAuZ2V0KHRvY2tlbikhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0U2V0TGluZS50ZXJtaW5hbHMuZm9yRWFjaCh0ZXJtaW5hbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVybWluYWwgIT09IEVtcHR5Q2hhcmFjdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzZXRMaW5lLnRlcm1pbmFscy5oYXModGVybWluYWwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldExpbmUudGVybWluYWxzLmFkZCh0ZXJtaW5hbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW5leHRTZXRMaW5lLnRlcm1pbmFscy5oYXMoRW1wdHlDaGFyYWN0ZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gZGVyaXZhdGlvbi5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldExpbmUudGVybWluYWxzLmFkZChFbXB0eUNoYXJhY3Rlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBpZiAoIWhhc0NoYW5nZSkgYnJlYWs7XHJcbiAgICAgICAgeWllbGQge1xyXG4gICAgICAgICAgICBydWxlSW5kZXg6IDIsXHJcbiAgICAgICAgICAgIHJlc3VsdDogZmlyc3RTZXRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgeWllbGQge1xyXG4gICAgICAgIHJ1bGVJbmRleDogMyxcclxuICAgICAgICByZXN1bHQ6IGZpcnN0U2V0LmZpbHRlcih2ID0+ICF2LmlzVGVybWluYWwpLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgaWYgKGEudG9ja2VuIDwgYi50b2NrZW4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkubWFwKHNldExpbmUgPT4ge1xyXG4gICAgICAgICAgICBzZXRMaW5lLnRlcm1pbmFscyA9IG5ldyBTZXQoQXJyYXkuZnJvbShzZXRMaW5lLnRlcm1pbmFscykuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGEgPCBiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgIHJldHVybiBzZXRMaW5lO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgZ2VuZXJhdGVGaXJzdFNldCBmcm9tIFwiLi9maXJzdFNldFwiO1xyXG5pbXBvcnQgTGV4ZXIgZnJvbSBcIi4vbGV4ZXJcIjtcclxuaW1wb3J0IHsgR3JhbW1lclNldCwgR3JhbW1lclNldExpbmUsIFByb2Nlc3MsIFJ1bGUsIFRlcm1pbmFsIH0gZnJvbSBcIi4vdHlwZXMvdHlwZVwiO1xyXG5pbXBvcnQgeyB0cmFuc2ZlclN0cmluZzJHcmFtbWVycyB9IGZyb20gXCIuL3V0aWxzXCI7XHJcbmltcG9ydCB7IEVtcHR5Q2hhcmFjdGVyLCBFbmRpbmdDaGFyYWN0ZXIgfSBmcm9tIFwiLi91dGlscy9jb25zdFwiO1xyXG5pbXBvcnQgbG9nIGZyb20gXCIuL3V0aWxzL2xvZ1wiO1xyXG5cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdlbmVyYXRlRmxsb3dTZXQobGV4ZXI6IExleGVyLCBpbkdyYW1tZXJzOiBBcnJheTxzdHJpbmc+LCBmaXJzdFNldD86IEdyYW1tZXJTZXQpOiBHcmFtbWVyU2V0IHtcclxuICAgIGxvZy5sb2coXCJbZ2VuZXJhdGVGbGxvd1NldCBzdGFydF1cIik7XHJcbiAgICBpZiAoIWZpcnN0U2V0KSB7XHJcbiAgICAgICAgZmlyc3RTZXQgPSBnZW5lcmF0ZUZpcnN0U2V0KGxleGVyLCBpbkdyYW1tZXJzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZmlyc3RTZXQgPSBBcnJheS5mcm9tKGZpcnN0U2V0KTtcclxuICAgIH1cclxuICAgIGNvbnN0IGdyYW1tZXJzID0gdHJhbnNmZXJTdHJpbmcyR3JhbW1lcnMobGV4ZXIsIGluR3JhbW1lcnMpO1xyXG4gICAgbG9nLmxvZyhcIltncmFtbWVycyBhZnRlciB0cmFuc2ZlclN0cmluZzJHcmFtbWVyc11cIiwgZ3JhbW1lcnMpO1xyXG4gICAgLypcclxuICAgICAgICAxLiDlsIYk5pS+5YiwRk9MTE9XKFMp5LitXHJcbiAgICAqL1xyXG4gICAgY29uc3QgZm9sbG93U2V0OiBHcmFtbWVyU2V0ID0gbmV3IEFycmF5KC4uLmdyYW1tZXJzLm1hcChncmFtbWVyID0+IHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0b2NrZW46IGdyYW1tZXIubm9uVGVybWluYWwsXHJcbiAgICAgICAgICAgIHRlcm1pbmFsczogbmV3IFNldDxUZXJtaW5hbD4oW0VuZGluZ0NoYXJhY3Rlcl0pLFxyXG4gICAgICAgIH1cclxuICAgIH0pKTtcclxuICAgIGNvbnN0IGdyYW1tZXJNYXAgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nW11bXT4oKTtcclxuICAgIGdyYW1tZXJzLmZvckVhY2goZ3JhbW1lciA9PiB7XHJcbiAgICAgICAgZ3JhbW1lck1hcC5zZXQoZ3JhbW1lci5ub25UZXJtaW5hbCwgZ3JhbW1lci5kZXJpdmF0aW9ucyk7XHJcbiAgICB9KVxyXG4gICAgZm9sbG93U2V0LnB1c2goLi4ubGV4ZXIudGVybWluYWxzLm1hcCh0ZXJtaW5hbCA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdG9ja2VuOiB0ZXJtaW5hbFswXSxcclxuICAgICAgICAgICAgdGVybWluYWxzOiBuZXcgU2V0KFtFbmRpbmdDaGFyYWN0ZXJdKSxcclxuICAgICAgICAgICAgaXNUZXJtaW5hbDogdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgIH0pKVxyXG5cclxuICAgIGNvbnN0IGZvbGxvd1NldE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBHcmFtbWVyU2V0TGluZT4oKTtcclxuICAgIGZvciAobGV0IHNldExpbmUgb2YgZm9sbG93U2V0KSB7XHJcbiAgICAgICAgZm9sbG93U2V0TWFwLnNldChzZXRMaW5lLnRvY2tlbiwgc2V0TGluZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZmlyc3RTZXQucHVzaCguLi5sZXhlci50ZXJtaW5hbHMubWFwKHRlcm1pbmFsID0+IHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB0b2NrZW46IHRlcm1pbmFsWzBdLFxyXG4gICAgICAgICAgICB0ZXJtaW5hbHM6IG5ldyBTZXQoW3Rlcm1pbmFsWzBdXSksXHJcbiAgICAgICAgICAgIGlzVGVybWluYWw6IHRydWVcclxuICAgICAgICB9XHJcbiAgICB9KSlcclxuICAgIGNvbnN0IGZpcnN0U2V0TWFwID0gbmV3IE1hcDxzdHJpbmcsIEdyYW1tZXJTZXRMaW5lPigpO1xyXG4gICAgZm9yIChsZXQgc2V0TGluZSBvZiBmaXJzdFNldCkge1xyXG4gICAgICAgIGZpcnN0U2V0TWFwLnNldChzZXRMaW5lLnRvY2tlbiwgc2V0TGluZSk7XHJcbiAgICB9XHJcbiAgICAvLyDlvqrnjq/kuIvpnaLmraXpqqQg55u05Yiw5rKh5pyJ5Y+Y5YyW5Li65q2iXHJcbiAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgIGxldCBoYXNDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAvKiBcclxuICAgICAgICAgICAgMi7lpoLmnpzlrZjlnKjkuIDkuKrkuqfnlJ/lvI9BID0+IGFCYiDvvIwg6YKj5LmIRklSU1QoYikg5Lit6ZmkzrUg5LmL5aSW55qE5omA5pyJ56ym5Y+36YO95ZyoRk9MTE9XKEIp5Lit44CCXHJcbiAgICAgICAgICAgIGF0dGVudGlvbjogQSA9PiBhQkNkIOmCo+S5iOaKimZpcnN0KENkKeWKoOWFpeWIsEZvbGxvdyhCKeS4reWOu1xyXG4gICAgICAgICovXHJcbiAgICAgICAgZ3JhbW1lcnMuZm9yRWFjaChncmFtbWVyID0+IHtcclxuICAgICAgICAgICAgZm9yIChsZXQgZGVyaXZhdGlvbiBvZiBncmFtbWVyLmRlcml2YXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gZGVyaXZhdGlvbi5sZW5ndGggLSAyOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNldExpbmUgPSBmb2xsb3dTZXRNYXAuZ2V0KGRlcml2YXRpb25baV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBpICsgMTsgaiA8IGRlcml2YXRpb24ubGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGVybWluYWxzID0gZmlyc3RTZXRNYXAuZ2V0KGRlcml2YXRpb25bal0pIS50ZXJtaW5hbHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHRlcm1pbmFsIG9mIHRlcm1pbmFscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlcm1pbmFsID09PSBFbXB0eUNoYXJhY3RlcikgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0TGluZT8udGVybWluYWxzLmhhcyh0ZXJtaW5hbCkpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldExpbmU/LnRlcm1pbmFscy5hZGQodGVybWluYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGVybWluYWxzLmhhcyhFbXB0eUNoYXJhY3RlcikpIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAgICAzLuWmguaenOWtmOWcqOS4gOS4quS6p+eUn+W8jyBBID0+IGFCIO+8jCDmiJblrZjlnKjkuqfnlJ/lvI8gQSA9PiBhQmIg5LiURklSU1QoYikg5YyF5ZCrIM61IO+8jOmCo+S5iEZPTExPVyhBKeS4reeahOaJgOacieespuWPt+mDveWcqEZPTExPVyhCKeS4reOAglxyXG4gICAgICAgICovXHJcbiAgICAgICAgZ3JhbW1lcnMuZm9yRWFjaChncmFtbWVyID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcFNldExpbmUgPSBmb2xsb3dTZXRNYXAuZ2V0KGdyYW1tZXIubm9uVGVybWluYWwpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBkZXJpdmF0aW9uIG9mIGdyYW1tZXIuZGVyaXZhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBkZXJpdmF0aW9uLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9ja2VuID0gZGVyaXZhdGlvbltpXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXRMaW5lID0gZm9sbG93U2V0TWFwLmdldCh0b2NrZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHRlcm1pbmFsIG9mIHBTZXRMaW5lIS50ZXJtaW5hbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlcm1pbmFsID09PSBFbXB0eUNoYXJhY3RlcikgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXRMaW5lPy50ZXJtaW5hbHMuaGFzKHRlcm1pbmFsKSkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldExpbmU/LnRlcm1pbmFscy5hZGQodGVybWluYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0U2V0TWFwLmdldCh0b2NrZW4pIS50ZXJtaW5hbHMuaGFzKEVtcHR5Q2hhcmFjdGVyKSkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIGlmICghaGFzQ2hhbmdlKSBicmVhaztcclxuICAgIH1cclxuICAgIHJldHVybiBmb2xsb3dTZXQuZmlsdGVyKHYgPT4gIXYuaXNUZXJtaW5hbCkuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgIGlmIChhLnRvY2tlbiA8IGIudG9ja2VuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICB9XHJcbiAgICB9KS5tYXAoc2V0TGluZSA9PiB7XHJcbiAgICAgICAgc2V0TGluZS50ZXJtaW5hbHMgPSBuZXcgU2V0KEFycmF5LmZyb20oc2V0TGluZS50ZXJtaW5hbHMpLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgaWYgKGEgPCBiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKVxyXG4gICAgICAgIHJldHVybiBzZXRMaW5lO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uKiBnZW5lcmF0ZUZsbG93U2V0UHJvZ3Jlc3NpdmUobGV4ZXI6IExleGVyLCBpbkdyYW1tZXJzOiBBcnJheTxzdHJpbmc+LCBmaXJzdFNldD86IEdyYW1tZXJTZXQpOiBJdGVyYWJsZUl0ZXJhdG9yPFJ1bGUgfCBQcm9jZXNzPEdyYW1tZXJTZXQ+PiB7XHJcbiAgICB5aWVsZCBbXHJcbiAgICAgICAgXCIxLiDlsIYk5pS+5YiwRk9MTE9XKFMp5LitXCIsXHJcbiAgICAgICAgXCIyLiDlpoLmnpzlrZjlnKjkuIDkuKrkuqfnlJ/lvI9BID0+IGFCYiDvvIwg6YKj5LmIRklSU1QoYikg5Lit6ZmkzrUg5LmL5aSW55qE5omA5pyJ56ym5Y+36YO95ZyoRk9MTE9XKEIp5Lit44CCYXR0ZW50aW9uOiBBID0+IGFCQ2Qg6YKj5LmI5oqKZmlyc3QoQ2Qp5Yqg5YWl5YiwRm9sbG93KEIp5Lit5Y67XCIsXHJcbiAgICAgICAgXCIzLuWmguaenOWtmOWcqOS4gOS4quS6p+eUn+W8jyBBID0+IGFCIO+8jCDmiJblrZjlnKjkuqfnlJ/lvI8gQSA9PiBhQmIg5LiURklSU1QoYikg5YyF5ZCrIM61IO+8jOmCo+S5iEZPTExPVyhBKeS4reeahOaJgOacieespuWPt+mDveWcqEZPTExPVyhCKeS4reOAglwiLFxyXG4gICAgICAgIFwiNC4g5Y676Zmk5omA5pyJ57uI57uT56ym5Y+355qE6KGo6aG5XCIsXHJcbiAgICBdXHJcbiAgICBsb2cubG9nKFwiW2dlbmVyYXRlRmxsb3dTZXQgc3RhcnRdXCIpO1xyXG4gICAgaWYgKCFmaXJzdFNldCkge1xyXG4gICAgICAgIGZpcnN0U2V0ID0gZ2VuZXJhdGVGaXJzdFNldChsZXhlciwgaW5HcmFtbWVycyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZpcnN0U2V0ID0gQXJyYXkuZnJvbShmaXJzdFNldCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBncmFtbWVycyA9IHRyYW5zZmVyU3RyaW5nMkdyYW1tZXJzKGxleGVyLCBpbkdyYW1tZXJzKTtcclxuICAgIGxvZy5sb2coXCJbZ3JhbW1lcnMgYWZ0ZXIgdHJhbnNmZXJTdHJpbmcyR3JhbW1lcnNdXCIsIGdyYW1tZXJzKTtcclxuICAgIC8qXHJcbiAgICAgICAgMS4g5bCGJOaUvuWIsEZPTExPVyhTKeS4rVxyXG4gICAgKi9cclxuICAgIGNvbnN0IGZvbGxvd1NldDogR3JhbW1lclNldCA9IG5ldyBBcnJheSguLi5ncmFtbWVycy5tYXAoZ3JhbW1lciA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdG9ja2VuOiBncmFtbWVyLm5vblRlcm1pbmFsLFxyXG4gICAgICAgICAgICB0ZXJtaW5hbHM6IG5ldyBTZXQ8VGVybWluYWw+KFtFbmRpbmdDaGFyYWN0ZXJdKSxcclxuICAgICAgICB9XHJcbiAgICB9KSk7XHJcbiAgICBjb25zdCBncmFtbWVyTWFwID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZ1tdW10+KCk7XHJcbiAgICBncmFtbWVycy5mb3JFYWNoKGdyYW1tZXIgPT4ge1xyXG4gICAgICAgIGdyYW1tZXJNYXAuc2V0KGdyYW1tZXIubm9uVGVybWluYWwsIGdyYW1tZXIuZGVyaXZhdGlvbnMpO1xyXG4gICAgfSlcclxuICAgIGZvbGxvd1NldC5wdXNoKC4uLmxleGVyLnRlcm1pbmFscy5tYXAodGVybWluYWwgPT4ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRvY2tlbjogdGVybWluYWxbMF0sXHJcbiAgICAgICAgICAgIHRlcm1pbmFsczogbmV3IFNldChbRW5kaW5nQ2hhcmFjdGVyXSksXHJcbiAgICAgICAgICAgIGlzVGVybWluYWw6IHRydWVcclxuICAgICAgICB9XHJcbiAgICB9KSlcclxuICAgIHlpZWxkIHtcclxuICAgICAgICBydWxlSW5kZXg6IDAsXHJcbiAgICAgICAgcmVzdWx0OiBmb2xsb3dTZXRcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBmb2xsb3dTZXRNYXAgPSBuZXcgTWFwPHN0cmluZywgR3JhbW1lclNldExpbmU+KCk7XHJcbiAgICBmb3IgKGxldCBzZXRMaW5lIG9mIGZvbGxvd1NldCkge1xyXG4gICAgICAgIGZvbGxvd1NldE1hcC5zZXQoc2V0TGluZS50b2NrZW4sIHNldExpbmUpO1xyXG4gICAgfVxyXG5cclxuICAgIGZpcnN0U2V0LnB1c2goLi4ubGV4ZXIudGVybWluYWxzLm1hcCh0ZXJtaW5hbCA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdG9ja2VuOiB0ZXJtaW5hbFswXSxcclxuICAgICAgICAgICAgdGVybWluYWxzOiBuZXcgU2V0KFt0ZXJtaW5hbFswXV0pLFxyXG4gICAgICAgICAgICBpc1Rlcm1pbmFsOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgfSkpXHJcbiAgICBjb25zdCBmaXJzdFNldE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBHcmFtbWVyU2V0TGluZT4oKTtcclxuICAgIGZvciAobGV0IHNldExpbmUgb2YgZmlyc3RTZXQpIHtcclxuICAgICAgICBmaXJzdFNldE1hcC5zZXQoc2V0TGluZS50b2NrZW4sIHNldExpbmUpO1xyXG4gICAgfVxyXG4gICAgLy8g5b6q546v5LiL6Z2i5q2l6aqkIOebtOWIsOayoeacieWPmOWMluS4uuatolxyXG4gICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICBsZXQgaGFzQ2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgLyogXHJcbiAgICAgICAgICAgIDIu5aaC5p6c5a2Y5Zyo5LiA5Liq5Lqn55Sf5byPQSA9PiBhQmIg77yMIOmCo+S5iEZJUlNUKGIpIOS4remZpM61IOS5i+WklueahOaJgOacieespuWPt+mDveWcqEZPTExPVyhCKeS4reOAglxyXG4gICAgICAgICAgICBhdHRlbnRpb246IEEgPT4gYUJDZCDpgqPkuYjmiopmaXJzdChDZCnliqDlhaXliLBGb2xsb3coQinkuK3ljrtcclxuICAgICAgICAqL1xyXG4gICAgICAgIGdyYW1tZXJzLmZvckVhY2goZ3JhbW1lciA9PiB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGRlcml2YXRpb24gb2YgZ3JhbW1lci5kZXJpdmF0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGRlcml2YXRpb24ubGVuZ3RoIC0gMjsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXRMaW5lID0gZm9sbG93U2V0TWFwLmdldChkZXJpdmF0aW9uW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCBkZXJpdmF0aW9uLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlcm1pbmFscyA9IGZpcnN0U2V0TWFwLmdldChkZXJpdmF0aW9uW2pdKSEudGVybWluYWxzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0ZXJtaW5hbCBvZiB0ZXJtaW5hbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXJtaW5hbCA9PT0gRW1wdHlDaGFyYWN0ZXIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldExpbmU/LnRlcm1pbmFscy5oYXModGVybWluYWwpKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRMaW5lPy50ZXJtaW5hbHMuYWRkKHRlcm1pbmFsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRlcm1pbmFscy5oYXMoRW1wdHlDaGFyYWN0ZXIpKSBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBpZiAoaGFzQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgIHlpZWxkIHtcclxuICAgICAgICAgICAgICAgIHJ1bGVJbmRleDogMSxcclxuICAgICAgICAgICAgICAgIHJlc3VsdDogZm9sbG93U2V0XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaGFzQ2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAgICAzLuWmguaenOWtmOWcqOS4gOS4quS6p+eUn+W8jyBBID0+IGFCIO+8jCDmiJblrZjlnKjkuqfnlJ/lvI8gQSA9PiBhQmIg5LiURklSU1QoYikg5YyF5ZCrIM61IO+8jOmCo+S5iEZPTExPVyhBKeS4reeahOaJgOacieespuWPt+mDveWcqEZPTExPVyhCKeS4reOAglxyXG4gICAgICAgICovXHJcbiAgICAgICAgZ3JhbW1lcnMuZm9yRWFjaChncmFtbWVyID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcFNldExpbmUgPSBmb2xsb3dTZXRNYXAuZ2V0KGdyYW1tZXIubm9uVGVybWluYWwpO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBkZXJpdmF0aW9uIG9mIGdyYW1tZXIuZGVyaXZhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBkZXJpdmF0aW9uLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9ja2VuID0gZGVyaXZhdGlvbltpXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXRMaW5lID0gZm9sbG93U2V0TWFwLmdldCh0b2NrZW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHRlcm1pbmFsIG9mIHBTZXRMaW5lIS50ZXJtaW5hbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlcm1pbmFsID09PSBFbXB0eUNoYXJhY3RlcikgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXRMaW5lPy50ZXJtaW5hbHMuaGFzKHRlcm1pbmFsKSkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldExpbmU/LnRlcm1pbmFscy5hZGQodGVybWluYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0U2V0TWFwLmdldCh0b2NrZW4pIS50ZXJtaW5hbHMuaGFzKEVtcHR5Q2hhcmFjdGVyKSkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIGlmIChoYXNDaGFuZ2UpIHtcclxuICAgICAgICAgICAgeWllbGQge1xyXG4gICAgICAgICAgICAgICAgcnVsZUluZGV4OiAyLFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0OiBmb2xsb3dTZXRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWhhc0NoYW5nZSkgYnJlYWs7XHJcbiAgICB9XHJcbiAgICB5aWVsZCB7XHJcbiAgICAgICAgcnVsZUluZGV4OiAzLFxyXG4gICAgICAgIHJlc3VsdDogZm9sbG93U2V0LmZpbHRlcih2ID0+ICF2LmlzVGVybWluYWwpLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgaWYgKGEudG9ja2VuIDwgYi50b2NrZW4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkubWFwKHNldExpbmUgPT4ge1xyXG4gICAgICAgICAgICBzZXRMaW5lLnRlcm1pbmFscyA9IG5ldyBTZXQoQXJyYXkuZnJvbShzZXRMaW5lLnRlcm1pbmFscykuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGEgPCBiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgIHJldHVybiBzZXRMaW5lO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgTm9uVGVybWluYWwsIFRlcm1pbmFsLCBUb2NrZW4gfSBmcm9tIFwiLi90eXBlcy90eXBlXCI7XHJcbmltcG9ydCB7IHNhZmVSZWdDaGFyYWN0ZXIgfSBmcm9tIFwiLi91dGlsc1wiO1xyXG5pbXBvcnQgeyBFbXB0eUNoYXJhY3RlciwgRW5kaW5nQ2hhcmFjdGVyIH0gZnJvbSBcIi4vdXRpbHMvY29uc3RcIjtcclxuaW1wb3J0IGxvZyBmcm9tIFwiLi91dGlscy9sb2dcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExleGVyIHtcclxuICAgIHB1YmxpYyBub25UZXJtaW5hbHM6IEFycmF5PHN0cmluZz47XHJcbiAgICBwdWJsaWMgdGVybWluYWxzOiBBcnJheTxbc3RyaW5nLCBSZWdFeHBdPjtcclxuICAgIGN1cnJlbnRMaW5lOiBudW1iZXIgPSAwO1xyXG4gICAgY3VycmVudENvbHVtbjogbnVtYmVyID0gMDtcclxuICAgIHNvdXJjZTogc3RyaW5nID0gXCJcIjtcclxuICAgIGNvbnN0cnVjdG9yKHRlcm1pbmFsczogQXJyYXk8W3N0cmluZywgUmVnRXhwXT4sIG5vblRlcm1pbmFsczogQXJyYXk8c3RyaW5nPikge1xyXG4gICAgLy8g6L6T5YWl5omA5pyJ55qE57uI57uT56ym5Y+36ZuG5ZCIXHJcbiAgICAgICAgdGhpcy5ub25UZXJtaW5hbHMgPSBbLi4ubm9uVGVybWluYWxzXTtcclxuICAgICAgICB0aGlzLnRlcm1pbmFscyA9IFsuLi50ZXJtaW5hbHNdO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldFNvdXJjZShzb3VyY2U6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xyXG4gICAgICAgIHRoaXMuY3VycmVudExpbmUgPSAwO1xyXG4gICAgICAgIHRoaXMuY3VycmVudENvbHVtbiA9IDA7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgcmVtYWluU3RyaW5nKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnNsaWNlKHRoaXMuY3VycmVudENvbHVtbik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgbmV4dCgpOiBUb2NrZW4ge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRDb2x1bW4gPj0gdGhpcy5zb3VyY2UubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICB0b2NrZW46IEVuZGluZ0NoYXJhY3RlcixcclxuICAgICAgICAgICAgICAgIG9yaWdpbjogRW5kaW5nQ2hhcmFjdGVyXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IHRlcm1pbmFsIG9mIHRoaXMudGVybWluYWxzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoUmVzdWx0ID0gdGhpcy5zb3VyY2Uuc2xpY2UodGhpcy5jdXJyZW50Q29sdW1uKS5tYXRjaCh0ZXJtaW5hbFsxXSk7XHJcbiAgICAgICAgICAgIGlmIChtYXRjaFJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICB0b2NrZW46IHRlcm1pbmFsWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbjogbWF0Y2hSZXN1bHRbMF1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFtsZXhlciBuZXh0XTogbWF0Y2ggbmV4dCBUZXJtaW5hbCBlcnJvciBcXG4gc291cmVjSW5wdXQ6ICR7dGhpcy5zb3VyY2V9XFxuIHJlbWFpblN0cmluZzogJHt0aGlzLnNvdXJjZS5zbGljZSh0aGlzLmN1cnJlbnRDb2x1bW4pfWApO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHBvcCgpOiBUb2NrZW4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRvY2tlbjogVG9ja2VuID0gdGhpcy5uZXh0KCk7XHJcbiAgICAgICAgICAgIGlmICh0b2NrZW4udG9ja2VuICE9PSBFbmRpbmdDaGFyYWN0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudENvbHVtbiArPSB0b2NrZW4ub3JpZ2luLmxlbmd0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdG9ja2VuO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgbmV4dE5vdEVtcHR5VGVybWluYWwoKTogVG9ja2VuIHtcclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICBjb25zdCB0b2NrZW4gPSB0aGlzLm5leHQoKTtcclxuICAgICAgICAgICAgaWYgKHRvY2tlbi50b2NrZW4gIT09IFwid2hpdGVTcGFjZVwiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9ja2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudENvbHVtbiArPSB0b2NrZW4ub3JpZ2luLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgbmV4dE5vdEVtcHR5KHN0ZXA6IG51bWJlcik6IFRvY2tlbiB7XHJcbiAgICAgICAgY29uc3QgYmFjayA9IHRoaXMuY3VycmVudENvbHVtbjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ZXAgLSAxOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5wb3BOb3RFbXB0eVRlcm1pbmFsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRvY2tlbiA9IHRoaXMubmV4dE5vdEVtcHR5VGVybWluYWwoKTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRDb2x1bW4gPSBiYWNrO1xyXG4gICAgICAgIHJldHVybiB0b2NrZW47XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgcG9wTm90RW1wdHlUZXJtaW5hbCgpOiBUb2NrZW4ge1xyXG4gICAgICAgIGNvbnN0IHRvY2tlbiA9IHRoaXMubmV4dE5vdEVtcHR5VGVybWluYWwoKTtcclxuICAgICAgICBpZiAodG9ja2VuLnRvY2tlbiAhPT0gRW5kaW5nQ2hhcmFjdGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudENvbHVtbiArPSB0b2NrZW4ub3JpZ2luLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRvY2tlbjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBpc1Rlcm1pbmFsKHN0cjogc3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IGlzVGVybWluYWwgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubm9uVGVybWluYWxzLnNvbWUodiA9PiB7XHJcbiAgICAgICAgICAgIGlmICh2ID09PSBzdHIpIHtcclxuICAgICAgICAgICAgICAgIGlzVGVybWluYWwgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVybiBpc1Rlcm1pbmFsO1xyXG4gICAgfVxyXG4gICAgLy8g5YiH5Ymy5o6o5a+85byPXHJcbiAgICBwdWJsaWMgc3BsaXREZXJpdmF0aW9uKHN0cjogc3RyaW5nKTogQXJyYXk8Tm9uVGVybWluYWwgfCBUZXJtaW5hbD4ge1xyXG4gICAgICAgIGNvbnN0IHRlcm1pbmFsczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBsZXQgY291bnRUaW1lID0gMDtcclxuICAgICAgICBjb25zdCBNQVhfRVhDVVRFID0gNTAwMDA7XHJcbiAgICAgICAgY29uc3QgaW5TdHIgPSBzdHI7XHJcbiAgICAgICAgd2hpbGUgKHN0ci5sZW5ndGgpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgbm9uVGVybWluYWwgb2YgdGhpcy5ub25UZXJtaW5hbHMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoUmVzdWx0ID0gc3RyLm1hdGNoKG5ldyBSZWdFeHAoXCJeXCIgKyBub25UZXJtaW5hbCkpXHJcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hSZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXJtaW5hbHMucHVzaChub25UZXJtaW5hbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyID0gc3RyLnNsaWNlKG1hdGNoUmVzdWx0WzBdLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yIChsZXQgdGVybWluYWwgb2YgdGhpcy50ZXJtaW5hbHMpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoUmVzdWx0ID0gc3RyLm1hdGNoKG5ldyBSZWdFeHAoXCJeXCIgKyBzYWZlUmVnQ2hhcmFjdGVyKHRlcm1pbmFsWzBdKSkpXHJcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hSZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXJtaW5hbHMucHVzaCh0ZXJtaW5hbFswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyID0gc3RyLnNsaWNlKG1hdGNoUmVzdWx0WzBdLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY291bnRUaW1lKys7XHJcbiAgICAgICAgICAgIGlmIChjb3VudFRpbWUgPiBNQVhfRVhDVVRFKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFtzcGxpdERlcml2YXRpb25dIGVycm9yOiBleGN1dGUgb3ZlciBNQVhfRVhDVVRFIHN0cjogJHtpblN0cn0gIHJlbWFpbmluZyBzdHI6ICR7c3RyfSBgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGVybWluYWxzO1xyXG4gICAgfVxyXG4gICAgLypcclxuICAgIOeUn+aIkOaPkOWFrOWboOWtkCDku6Xlj4og5raI6Zmk5bem6YCS5b2S5L2/55So55qE6Z2e57uI57uT56ymXHJcbiAgKi9cclxuICAgIHB1YmxpYyBnZXROZXdOb25UZXJtaW5hbChub25UZXJtaW5hbDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBsZXQgdG1wID0gbm9uVGVybWluYWw7XHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgdG1wICs9IFwiJ1wiO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ub25UZXJtaW5hbHMuaW5kZXhPZih0bXApID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub25UZXJtaW5hbHMudW5zaGlmdCh0bXApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRtcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCB7IGdldERlcml2YXRpb25GaXJzdFNldCB9IGZyb20gXCJAL2ZpcnN0U2V0XCI7XHJcbmltcG9ydCBMZXhlciBmcm9tIFwiQC9sZXhlclwiO1xyXG5pbXBvcnQgeyBHcmFtbWVyLCBHcmFtbWVyU2V0LCBHcmFtbWVyU2V0TGluZSwgTm9uVGVybWluYWwsIFByZWRpY3RMaW5lLCBQcmVkaWN0UHJvY2Vzc0xpbmUsIFByZWRpY3RUYWJsZSwgUHJvY2VzcywgUnVsZSwgVGVybWluYWwgfSBmcm9tIFwiQC90eXBlcy90eXBlXCI7XHJcbmltcG9ydCB7IHRyYW5zZmVyU3RyaW5nMkdyYW1tZXJzIH0gZnJvbSBcIkAvdXRpbHNcIjtcclxuaW1wb3J0IHsgRW1wdHlDaGFyYWN0ZXIsIEVuZGluZ0NoYXJhY3RlciB9IGZyb20gXCJAL3V0aWxzL2NvbnN0XCI7XHJcbmltcG9ydCBsb2cgZnJvbSBcIkAvdXRpbHMvbG9nXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZW5lcmF0b3JQcmVkaWN0VGFibGUoXHJcbiAgICBsZXhlcjogTGV4ZXIsXHJcbiAgICBpbkdyYW1tZXJzOiBBcnJheTxzdHJpbmc+LFxyXG4gICAgZmlyc3RTZXQ6IEdyYW1tZXJTZXQsXHJcbiAgICBmb2xsb3dTZXQ6IEdyYW1tZXJTZXQsXHJcbik6IFByZWRpY3RUYWJsZSB7XHJcbiAgICAvKlxyXG4gICAg5a+56K+t5rOV5Lit55qE5q+P5p2h5Lqn55Sf5byP77yaIEEgLT4gdSDvvJpcclxuICAgICAgKDEp5a+5IEZpcnN0KHUpIOS4reeahOaJgOaciee7iOe7k+espiBhIO+8iOS4jeWQqyDOtSDvvInvvIznva4gTVtBLCBhXSA9IOKAnEEgLT4gdeKAnSDvvJtcclxuICAgICAgKDIp6IulIEZpcnN0KHUpIOWQqyDOtSDvvIzliJnlr7kgRm9sbG93KEEpIOS4reeahOaJgOacieespuWPtyBhIO+8iOWPr+WQqyAkIO+8ie+8jOe9riBNW0EsIGFdID0g4oCcQSAtPiB14oCdIFxyXG4gICovXHJcbiAgICBjb25zdCBncmFtbWVycyA9IHRyYW5zZmVyU3RyaW5nMkdyYW1tZXJzKGxleGVyLCBpbkdyYW1tZXJzKTtcclxuICAgIGNvbnN0IHByZWRpY3RUYWJsZTogUHJlZGljdFRhYmxlID0gW107XHJcbiAgICBjb25zdCBub25UZXJtaW5hbDJUYWJsZVJvd01hcCA9IG5ldyBNYXA8Tm9uVGVybWluYWwsIFByZWRpY3RMaW5lPigpO1xyXG4gICAgbGV4ZXIubm9uVGVybWluYWxzLmZvckVhY2gobm9uVGVybWluYWwgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRhYmxlTGluZSA9IHtcclxuICAgICAgICAgICAgbm9uVGVybWluYWw6IG5vblRlcm1pbmFsLFxyXG4gICAgICAgICAgICB0ZXJtaW5hbDJEZXJpdmF0aW9uOiBuZXcgTWFwPFRlcm1pbmFsLCBHcmFtbWVyPigpLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbm9uVGVybWluYWwyVGFibGVSb3dNYXAuc2V0KG5vblRlcm1pbmFsLCB0YWJsZUxpbmUpO1xyXG4gICAgICAgIHByZWRpY3RUYWJsZS5wdXNoKHRhYmxlTGluZSk7XHJcbiAgICB9KVxyXG4gICAgY29uc3Qgbm9uVGVybWluYWwyRmlyc3RTZXRNYXAgPSBuZXcgTWFwPE5vblRlcm1pbmFsLCBHcmFtbWVyU2V0TGluZT4oKTtcclxuICAgIGNvbnN0IG5vblRlcm1pbmFsMkZvbGxvd1NldExpbmUgPSBuZXcgTWFwPE5vblRlcm1pbmFsLCBHcmFtbWVyU2V0TGluZT4oKTtcclxuICAgIGZvciAobGV0IHNldExpbmUgb2YgZm9sbG93U2V0KSB7XHJcbiAgICAgICAgbm9uVGVybWluYWwyRm9sbG93U2V0TGluZS5zZXQoc2V0TGluZS50b2NrZW4sIHNldExpbmUpO1xyXG4gICAgfVxyXG4gICAgZm9yIChsZXQgc2V0TGluZSBvZiBmaXJzdFNldCkge1xyXG4gICAgICAgIG5vblRlcm1pbmFsMkZpcnN0U2V0TWFwLnNldChzZXRMaW5lLnRvY2tlbiwgc2V0TGluZSk7XHJcbiAgICB9XHJcbiAgICBncmFtbWVycy5mb3JFYWNoKGdyYW1tZXIgPT4ge1xyXG4gICAgICAgIGZvciAobGV0IGRlcml2YXRpb24gb2YgZ3JhbW1lci5kZXJpdmF0aW9ucykge1xyXG4gICAgICAgICAgICBjb25zdCBkZXJpdmF0aW9uRmlyc3RTZXQgPSBnZXREZXJpdmF0aW9uRmlyc3RTZXQobGV4ZXIsIGRlcml2YXRpb24sIG5vblRlcm1pbmFsMkZpcnN0U2V0TWFwKTtcclxuICAgICAgICAgICAgY29uc3QgdGFibGVMaW5lID0gbm9uVGVybWluYWwyVGFibGVSb3dNYXAuZ2V0KGdyYW1tZXIubm9uVGVybWluYWwpO1xyXG4gICAgICAgICAgICBsb2cubG9nKGRlcml2YXRpb25GaXJzdFNldCk7XHJcbiAgICAgICAgICAgIC8vICgxKeWvuSBGaXJzdCh1KSDkuK3nmoTmiYDmnInnu4jnu5PnrKYgYSDvvIjkuI3lkKsgzrUg77yJ77yM572uIE1bQSwgYV0gPSDigJxBIC0+IHXigJ0g77ybXHJcbiAgICAgICAgICAgIGxldCBoYXNTZXQ6IE1hcDxzdHJpbmcsYm9vbGVhbj4gPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHRlcm1pbmFsIG9mIGRlcml2YXRpb25GaXJzdFNldC50ZXJtaW5hbHMpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0ZXJtaW5hbCA9PT0gRW1wdHlDaGFyYWN0ZXIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNlbGxHcmFtbWVyOiBHcmFtbWVyIHwgdW5kZWZpbmVkID0gdGFibGVMaW5lPy50ZXJtaW5hbDJEZXJpdmF0aW9uLmdldCh0ZXJtaW5hbCk7XHJcbiAgICAgICAgICAgICAgICBoYXNTZXQuc2V0KHRlcm1pbmFsLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjZWxsR3JhbW1lcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNlbGxHcmFtbWVyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub25UZXJtaW5hbDogZ3JhbW1lci5ub25UZXJtaW5hbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVyaXZhdGlvbnM6IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB0YWJsZUxpbmU/LnRlcm1pbmFsMkRlcml2YXRpb24uc2V0KHRlcm1pbmFsLCBjZWxsR3JhbW1lcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjZWxsR3JhbW1lci5kZXJpdmF0aW9ucy5wdXNoKGRlcml2YXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICgyKeiLpSBGaXJzdCh1KSDlkKsgzrUg77yM5YiZ5a+5IEZvbGxvdyhBKSDkuK3nmoTmiYDmnInnrKblj7cgYSDvvIjlj6/lkKsgJCDvvInvvIznva4gTVtBLCBhXSA9IOKAnEEgLT4gdeKAnSBcclxuICAgICAgICAgICAgaWYgKGRlcml2YXRpb25GaXJzdFNldC50ZXJtaW5hbHMuaGFzKEVtcHR5Q2hhcmFjdGVyKSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdGVybWluYWwgb2Ygbm9uVGVybWluYWwyRm9sbG93U2V0TGluZS5nZXQoZ3JhbW1lci5ub25UZXJtaW5hbCkhLnRlcm1pbmFscykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGhhc1NldC5oYXModGVybWluYWwpKWNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjZWxsR3JhbW1lcjogR3JhbW1lciB8IHVuZGVmaW5lZCA9IHRhYmxlTGluZT8udGVybWluYWwyRGVyaXZhdGlvbi5nZXQodGVybWluYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2VsbEdyYW1tZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbEdyYW1tZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub25UZXJtaW5hbDogZ3JhbW1lci5ub25UZXJtaW5hbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcml2YXRpb25zOiBbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUxpbmU/LnRlcm1pbmFsMkRlcml2YXRpb24uc2V0KHRlcm1pbmFsLCBjZWxsR3JhbW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNlbGxHcmFtbWVyLmRlcml2YXRpb25zLnB1c2goZGVyaXZhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIHJldHVybiBwcmVkaWN0VGFibGU7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tQcmVkaWNrVGFibGVJc1ZhbGlkKGxleGVyOiBMZXhlciwgdGFibGU6IFByZWRpY3RUYWJsZSk6IGJvb2xlYW4ge1xyXG4gICAgLy8g5q+P5LiAQ2VsbOacgOWkmuWPquiDveacieS4gOS4quaOqOWvvOW8jyBcclxuICAgIGZvciAobGV0IHRlcm1pbmFsIG9mIGxleGVyLnRlcm1pbmFscykge1xyXG4gICAgICAgIGNvbnN0IHRvY2tlbiA9IHRlcm1pbmFsWzBdO1xyXG4gICAgICAgIHRhYmxlLmZvckVhY2godGFibGVMaW5lID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdDJkID0gdGFibGVMaW5lLnRlcm1pbmFsMkRlcml2YXRpb24uZ2V0KHRvY2tlbik7XHJcbiAgICAgICAgICAgIGlmICh0MmQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0MmQuZGVyaXZhdGlvbnMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHByZWRpY3QobGV4ZXI6IExleGVyLCB0YWJsZTogUHJlZGljdFRhYmxlLCBfaW5wdXQ6IHN0cmluZywgcGFyc2VTdGFydE5vblRlcm1pbmFsOiBOb25UZXJtaW5hbCk6IEFycmF5PFByZWRpY3RQcm9jZXNzTGluZT4ge1xyXG4gICAgbGV0IGlucHV0ID0gX2lucHV0LnJlcGxhY2VBbGwoL1xccy9nLCBcIlwiKTtcclxuICAgIGNvbnN0IHByZWRpY3RQcm9jZXNzOiBBcnJheTxQcmVkaWN0UHJvY2Vzc0xpbmU+ID0gW107XHJcbiAgICBsZXQgY3VycmVudFN0YXRlOiBQcmVkaWN0UHJvY2Vzc0xpbmUgPSB7XHJcbiAgICAgICAgcGFyc2VTdGFjazogW0VuZGluZ0NoYXJhY3RlciwgcGFyc2VTdGFydE5vblRlcm1pbmFsXSxcclxuICAgICAgICByZW1haW5pbmdJbnB1dDogX2lucHV0LFxyXG4gICAgICAgIHBhcnNlQWN0aW9uOiBcIlwiLFxyXG4gICAgfVxyXG4gICAgbGV4ZXIuc2V0U291cmNlKGlucHV0KTtcclxuICAgIGNvbnN0IG5vblRlcm1pbmFsMlRhYmxlUm93TWFwID0gbmV3IE1hcDxOb25UZXJtaW5hbCwgUHJlZGljdExpbmU+KCk7XHJcbiAgICB0YWJsZS5mb3JFYWNoKHRhYmxlTGluZSA9PiB7XHJcbiAgICAgICAgbm9uVGVybWluYWwyVGFibGVSb3dNYXAuc2V0KHRhYmxlTGluZS5ub25UZXJtaW5hbCwgdGFibGVMaW5lKTtcclxuICAgIH0pXHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIC8vIOWPluWHuuagiOmhtuWFg+e0oFxyXG4gICAgICAgICAgICBjb25zdCB0b2NrZW4gPSBjdXJyZW50U3RhdGUucGFyc2VTdGFja1tjdXJyZW50U3RhdGUucGFyc2VTdGFjay5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgaWYgKGxleGVyLmlzVGVybWluYWwodG9ja2VuKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGVybWluYWwgPSBsZXhlci5uZXh0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodG9ja2VuID09PSB0ZXJtaW5hbC50b2NrZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBtYXRjaCBzdWNjZXNzXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlLnBhcnNlQWN0aW9uID0gYG1hdGNoICR7dGVybWluYWwudG9ja2VufSAke3Rlcm1pbmFsLm9yaWdpbn1gXHJcbiAgICAgICAgICAgICAgICAgICAgcHJlZGljdFByb2Nlc3MucHVzaChjdXJyZW50U3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY3VycmVudFN0YXRlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV4ZXIucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlLnBhcnNlQWN0aW9uID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUucmVtYWluaW5nSW5wdXQgPSBsZXhlci5yZW1haW5TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUucGFyc2VTdGFjay5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlLnBhcnNlU3RhY2subGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBbcHJlZGljdCBlcnJvcl0gdGVybWluYWwgbWF0Y2ggZXJyb3IgdG9ja2VuOiAke3RvY2tlbn0gc3RhY2s6ICR7Y3VycmVudFN0YXRlLnBhcnNlU3RhY2t9IHJlbWFpbmluZ0lucHV0OiAke2xleGVyLnJlbWFpblN0cmluZygpfWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgdGVybWluYWwgPSBsZXhlci5uZXh0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlTGluZTogUHJlZGljdExpbmUgPSBub25UZXJtaW5hbDJUYWJsZVJvd01hcC5nZXQodG9ja2VuKSE7XHJcbiAgICAgICAgICAgIGNvbnN0IGdyYW1tZXI6IEdyYW1tZXIgPSB0YWJsZUxpbmUhLnRlcm1pbmFsMkRlcml2YXRpb24uZ2V0KHRlcm1pbmFsLnRvY2tlbik7XHJcbiAgICAgICAgICAgIGlmIChncmFtbWVyLmRlcml2YXRpb25zLmxlbmd0aCAhPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBbcHJlZGljdCBlcnJvcl0gcGFyc2UgaW5wdXQgZmFpbCBcXG4gdGVybWluYWw6ICR7dGVybWluYWx9IFxcbiAgcmVtYWluaW5nSW5wdXQ6ICR7bGV4ZXIucmVtYWluU3RyaW5nKCl9IFxcbiBncmFtbWVyOiAke2dyYW1tZXJ9IGApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGN1cnJlbnRTdGF0ZS5wYXJzZUFjdGlvbiA9IGBQcmVkaWN0ICR7Z3JhbW1lci5ub25UZXJtaW5hbH0gPT4gJHtncmFtbWVyLmRlcml2YXRpb25zWzBdLmpvaW4oXCIgXCIpfWA7XHJcbiAgICAgICAgICAgIGxvZy5sb2coXCJbcHJlZGljdCBTdGF0ZV1cIiwgY3VycmVudFN0YXRlKTtcclxuICAgICAgICAgICAgcHJlZGljdFByb2Nlc3MucHVzaChjdXJyZW50U3RhdGUpO1xyXG4gICAgICAgICAgICBjdXJyZW50U3RhdGUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGN1cnJlbnRTdGF0ZSkpO1xyXG4gICAgICAgICAgICBjdXJyZW50U3RhdGUucGFyc2VTdGFjay5wb3AoKTtcclxuICAgICAgICAgICAgY3VycmVudFN0YXRlLnBhcnNlU3RhY2sucHVzaCguLi5ncmFtbWVyLmRlcml2YXRpb25zWzBdLmZpbHRlcihjaGFyID0+IGNoYXIgIT09IEVtcHR5Q2hhcmFjdGVyKS5yZXZlcnNlKCkpO1xyXG4gICAgICAgICAgICBjdXJyZW50U3RhdGUucGFyc2VBY3Rpb24gPSBcIlwiO1xyXG4gICAgICAgICAgICBjdXJyZW50U3RhdGUucmVtYWluaW5nSW5wdXQgPSBsZXhlci5yZW1haW5TdHJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgIHJldHVybiBwcmVkaWN0UHJvY2VzcztcclxuICAgIH1cclxuICAgIHJldHVybiBwcmVkaWN0UHJvY2VzcztcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiogZ2VuZXJhdGVQcmVkaWN0VGFibGVQcm9ncmVzc2l2ZShcclxuICAgIGxleGVyOiBMZXhlcixcclxuICAgIGluR3JhbW1lcnM6IEFycmF5PHN0cmluZz4sXHJcbiAgICBmaXJzdFNldDogR3JhbW1lclNldCxcclxuICAgIGZvbGxvd1NldDogR3JhbW1lclNldCxcclxuKTogSXRlcmFibGVJdGVyYXRvcjxSdWxlIHwgUHJvY2VzczxQcmVkaWN0VGFibGU+PiB7XHJcbiAgICAvKlxyXG4gICAg5a+56K+t5rOV5Lit55qE5q+P5p2h5Lqn55Sf5byP77yaIEEgLT4gdSDvvJpcclxuICAgICAgKDEp5a+5IEZpcnN0KHUpIOS4reeahOaJgOaciee7iOe7k+espiBhIO+8iOS4jeWQqyDOtSDvvInvvIznva4gTVtBLCBhXSA9IEEgLT4gdVxyXG4gICAgICAoMinoi6UgRmlyc3QodSkg5ZCrIM61IO+8jOWImeWvuSBGb2xsb3coQSkg5Lit55qE5omA5pyJ56ym5Y+3IGEg77yI5Y+v5ZCrICQg77yJ77yM572uIE1bQSwgYV0gPSBBIC0+IHVcclxuICAqL1xyXG4gICAgeWllbGQgW1xyXG4gICAgICAgIFwiMS4g5a+5IEZpcnN0KHUpIOS4reeahOaJgOaciee7iOe7k+espiBhIO+8iOS4jeWQqyDOtSDvvInvvIznva4gTVtBLCBhXSA9IEEgLT4gdVwiLFxyXG4gICAgICAgIFwiMi4g6IulIEZpcnN0KHUpIOWQqyDOtSDvvIzliJnlr7kgRm9sbG93KEEpIOS4reeahOaJgOacieespuWPtyBhIO+8iOWPr+WQqyAkIO+8ie+8jOe9riBNW0EsIGFdID0gQSAtPiB1XCJcclxuICAgIF1cclxuICAgIGNvbnN0IGdyYW1tZXJzID0gdHJhbnNmZXJTdHJpbmcyR3JhbW1lcnMobGV4ZXIsIGluR3JhbW1lcnMpO1xyXG4gICAgY29uc3QgcHJlZGljdFRhYmxlOiBQcmVkaWN0VGFibGUgPSBbXTtcclxuICAgIGNvbnN0IG5vblRlcm1pbmFsMlRhYmxlUm93TWFwID0gbmV3IE1hcDxOb25UZXJtaW5hbCwgUHJlZGljdExpbmU+KCk7XHJcbiAgICBsZXhlci5ub25UZXJtaW5hbHMuZm9yRWFjaChub25UZXJtaW5hbCA9PiB7XHJcbiAgICAgICAgY29uc3QgdGFibGVMaW5lID0ge1xyXG4gICAgICAgICAgICBub25UZXJtaW5hbDogbm9uVGVybWluYWwsXHJcbiAgICAgICAgICAgIHRlcm1pbmFsMkRlcml2YXRpb246IG5ldyBNYXA8VGVybWluYWwsIEdyYW1tZXI+KCksXHJcbiAgICAgICAgfTtcclxuICAgICAgICBub25UZXJtaW5hbDJUYWJsZVJvd01hcC5zZXQobm9uVGVybWluYWwsIHRhYmxlTGluZSk7XHJcbiAgICAgICAgcHJlZGljdFRhYmxlLnB1c2godGFibGVMaW5lKTtcclxuICAgIH0pXHJcbiAgICBjb25zdCBub25UZXJtaW5hbDJGaXJzdFNldE1hcCA9IG5ldyBNYXA8Tm9uVGVybWluYWwsIEdyYW1tZXJTZXRMaW5lPigpO1xyXG4gICAgY29uc3Qgbm9uVGVybWluYWwyRm9sbG93U2V0TGluZSA9IG5ldyBNYXA8Tm9uVGVybWluYWwsIEdyYW1tZXJTZXRMaW5lPigpO1xyXG4gICAgZm9yIChsZXQgc2V0TGluZSBvZiBmb2xsb3dTZXQpIHtcclxuICAgICAgICBub25UZXJtaW5hbDJGb2xsb3dTZXRMaW5lLnNldChzZXRMaW5lLnRvY2tlbiwgc2V0TGluZSk7XHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCBzZXRMaW5lIG9mIGZpcnN0U2V0KSB7XHJcbiAgICAgICAgbm9uVGVybWluYWwyRmlyc3RTZXRNYXAuc2V0KHNldExpbmUudG9ja2VuLCBzZXRMaW5lKTtcclxuICAgIH1cclxuICAgIGZvciAobGV0IGdyYW1tZXIgb2YgZ3JhbW1lcnMpIHtcclxuICAgICAgICBmb3IgKGxldCBkZXJpdmF0aW9uIG9mIGdyYW1tZXIuZGVyaXZhdGlvbnMpIHtcclxuICAgICAgICAgICAgY29uc3QgZGVyaXZhdGlvbkZpcnN0U2V0ID0gZ2V0RGVyaXZhdGlvbkZpcnN0U2V0KGxleGVyLCBkZXJpdmF0aW9uLCBub25UZXJtaW5hbDJGaXJzdFNldE1hcCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlTGluZSA9IG5vblRlcm1pbmFsMlRhYmxlUm93TWFwLmdldChncmFtbWVyLm5vblRlcm1pbmFsKTtcclxuICAgICAgICAgICAgbG9nLmxvZyhkZXJpdmF0aW9uRmlyc3RTZXQpO1xyXG4gICAgICAgICAgICAvLyAoMSnlr7kgRmlyc3QodSkg5Lit55qE5omA5pyJ57uI57uT56ymIGEg77yI5LiN5ZCrIM61IO+8ie+8jOe9riBNW0EsIGFdID0g4oCcQSAtPiB14oCdIO+8m1xyXG4gICAgICAgICAgICBmb3IgKGxldCB0ZXJtaW5hbCBvZiBkZXJpdmF0aW9uRmlyc3RTZXQudGVybWluYWxzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGVybWluYWwgPT09IEVtcHR5Q2hhcmFjdGVyKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGxldCBjZWxsR3JhbW1lcjogR3JhbW1lciB8IHVuZGVmaW5lZCA9IHRhYmxlTGluZT8udGVybWluYWwyRGVyaXZhdGlvbi5nZXQodGVybWluYWwpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjZWxsR3JhbW1lcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNlbGxHcmFtbWVyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub25UZXJtaW5hbDogZ3JhbW1lci5ub25UZXJtaW5hbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVyaXZhdGlvbnM6IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB0YWJsZUxpbmU/LnRlcm1pbmFsMkRlcml2YXRpb24uc2V0KHRlcm1pbmFsLCBjZWxsR3JhbW1lcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjZWxsR3JhbW1lci5kZXJpdmF0aW9ucy5wdXNoKGRlcml2YXRpb24pO1xyXG4gICAgICAgICAgICAgICAgeWllbGQge1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bGVJbmRleDogMCxcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHByZWRpY3RUYWJsZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICgyKeiLpSBGaXJzdCh1KSDlkKsgzrUg77yM5YiZ5a+5IEZvbGxvdyhBKSDkuK3nmoTmiYDmnInnrKblj7cgYSDvvIjlj6/lkKsgJCDvvInvvIznva4gTVtBLCBhXSA9IOKAnEEgLT4gdeKAnSBcclxuICAgICAgICAgICAgaWYgKGRlcml2YXRpb25GaXJzdFNldC50ZXJtaW5hbHMuaGFzKEVtcHR5Q2hhcmFjdGVyKSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdGVybWluYWwgb2Ygbm9uVGVybWluYWwyRm9sbG93U2V0TGluZS5nZXQoZ3JhbW1lci5ub25UZXJtaW5hbCkhLnRlcm1pbmFscykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjZWxsR3JhbW1lcjogR3JhbW1lciB8IHVuZGVmaW5lZCA9IHRhYmxlTGluZT8udGVybWluYWwyRGVyaXZhdGlvbi5nZXQodGVybWluYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2VsbEdyYW1tZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbEdyYW1tZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub25UZXJtaW5hbDogZ3JhbW1lci5ub25UZXJtaW5hbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcml2YXRpb25zOiBbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUxpbmU/LnRlcm1pbmFsMkRlcml2YXRpb24uc2V0KHRlcm1pbmFsLCBjZWxsR3JhbW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNlbGxHcmFtbWVyLmRlcml2YXRpb25zLnB1c2goZGVyaXZhdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgeWllbGQge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBydWxlSW5kZXg6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdDogcHJlZGljdFRhYmxlXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiaW1wb3J0IExleGVyIGZyb20gXCIuL2xleGVyXCI7XHJcbmltcG9ydCB7IE5vblRlcm1pbmFsLCBUZXJtaW5hbCB9IGZyb20gXCIuL3R5cGVzL3R5cGVcIjtcclxuaW1wb3J0IHsgRW1wdHlDaGFyYWN0ZXIgfSBmcm9tIFwiLi91dGlscy9jb25zdFwiO1xyXG5pbXBvcnQgbG9nIGZyb20gXCIuL3V0aWxzL2xvZ1wiO1xyXG5cclxuLypcclxuICAgIOWmguaenOeUqOaIt+i+k+WFpeeahOaYr+S5puS4iumCo+enjeeugOWNleaWh+azle+8jOivpeWHveaVsOiHquWKqOivhuWIq+WHuue7iOe7k+espuWSjOmdnue7iOe7k+esplxyXG4gICAg6Z2e57uI57uT56ymOiAvXltBLVpdJyogL1xyXG4gICAg57uI57uT56ymOiAvW2EtenxcXHUwMzkxLVxcdTAzQzldLyAgKOWwj+WGmeWtl+avjeS7peWPikdyZWVrIFN5bWJvbHMpXHJcbiAgICBleDogaHR0cHM6Ly91bmljb2RlLXRhYmxlLmNvbS9lbi9zZXRzL2dyZWVrLXN5bWJvbHMvXHJcbiAgICDmjqjlr7znrKblj7c6ID0+IC0+XHJcbiovXHJcbmNvbnN0IHNpbXBsZU5vblRlcm1pbmFsUmVnID0gL15bQS1aXScqLztcclxuY29uc3Qgc2ltcGxlVGVybWluYWxSZWcgPSAvW2EtenxcXHUwMzkxLVxcdTAzQzldLztcclxuZXhwb3J0IGZ1bmN0aW9uIGdldFRvY2tGcm9tU2ltcGxlR3JhbW1lcnMoaW5HcmFtbWVyczogQXJyYXk8c3RyaW5nPik6IHtcclxuICAgIG5vblRlcm1pbmFsczogQXJyYXk8c3RyaW5nPixcclxuICAgIHRlcm1pbmFsczogQXJyYXk8W3N0cmluZywgUmVnRXhwXT4sXHJcbn0ge1xyXG4gICAgY29uc3Qgbm9uVGVybWluYWxzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcclxuICAgIGNvbnN0IHRlcm1pbmFsczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XHJcbiAgICBpbkdyYW1tZXJzLmZvckVhY2goZ3JhbW1lciA9PiB7XHJcbiAgICAgICAgY29uc3QgYXJyID0gZ3JhbW1lci5yZXBsYWNlQWxsKC9cXHMvZywgXCJcIikuc3BsaXQoLyg9Pil8KC0+KS8pLmZpbHRlcih2ID0+IHYgIT09IFwiPT5cIiAmJiB2ICE9PSBcIi0+XCIgJiYgdik7XHJcbiAgICAgICAgY29uc3Qgbm9uVGVybWluYWwgPSBhcnJbMF07XHJcbiAgICAgICAgbm9uVGVybWluYWxzLmFkZChub25UZXJtaW5hbCk7XHJcbiAgICAgICAgYXJyWzFdLnNwbGl0KFwifFwiKS5maWx0ZXIodiA9PiB2ICYmIHYgIT09IFwifFwiKS5mb3JFYWNoKGRlcml2YXRpb24gPT4ge1xyXG4gICAgICAgICAgICB3aGlsZSAoZGVyaXZhdGlvbi5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGxldCBtYXRjaFJlc3VsdCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdCA9IGRlcml2YXRpb24ubWF0Y2goc2ltcGxlTm9uVGVybWluYWxSZWcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoUmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbm9uVGVybWluYWxzLmFkZChtYXRjaFJlc3VsdFswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVyaXZhdGlvbiA9IGRlcml2YXRpb24uc2xpY2UobWF0Y2hSZXN1bHRbMF0ubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1hdGNoUmVzdWx0ID0gZGVyaXZhdGlvbi5tYXRjaChzaW1wbGVUZXJtaW5hbFJlZyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hSZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXJtaW5hbHMuYWRkKEpTT04uc3RyaW5naWZ5KFttYXRjaFJlc3VsdFswXSwgXCJeXCIgKyBtYXRjaFJlc3VsdFswXV0pKTtcclxuICAgICAgICAgICAgICAgICAgICBkZXJpdmF0aW9uID0gZGVyaXZhdGlvbi5zbGljZShtYXRjaFJlc3VsdFswXS5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBbZ2V0VG9ja0Zyb21TaW1wbGVHcmFtbWVycyBlcnJvcl0gY2FudCByZWNvZ25pemUgdGhlIGNoYXJhY3RlciByZW1haW5pbmc6ICR7ZGVyaXZhdGlvbn1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBub25UZXJtaW5hbHM6IEFycmF5LmZyb20obm9uVGVybWluYWxzKS5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIOWBmuS4gOS4queugOWNleaOkuW6jyDpmLLmraJCIOWSjCBCJyDlhrLnqoFcclxuICAgICAgICAgICAgcmV0dXJuIGIubGVuZ3RoIC0gYS5sZW5ndGg7XHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgdGVybWluYWxzOiBBcnJheS5mcm9tKHRlcm1pbmFscykubWFwKGpzb25EYXRhID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdGVybWluYWwgPSBKU09OLnBhcnNlKGpzb25EYXRhKTtcclxuICAgICAgICAgICAgdGVybWluYWxbMV0gPSBuZXcgUmVnRXhwKHRlcm1pbmFsWzFdKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRlcm1pbmFsO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbn1cclxuXHJcbi8qXHJcbiAgICDmo4DmtYvmlofms5XmmK/lkKbpnIDopoHnroDljZXlkIjlubbljrvph41cclxuKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrTmVlZHVuaW9uR3JhbW1lcnMoZ3JhbW1lcnM6IEFycmF5PHN0cmluZz4pOiBib29sZWFuIHtcclxuICAgIGxldCB1bmlvbk1hcCA9IG5ldyBNYXA8c3RyaW5nLCBBcnJheTxzdHJpbmc+PigpO1xyXG4gICAgZm9yIChsZXQgZ3JhbW1lciBvZiBncmFtbWVycykge1xyXG4gICAgICAgIGdyYW1tZXIgPSBncmFtbWVyLnJlcGxhY2VBbGwoL1xccy9nLCBcIlwiKTtcclxuICAgICAgICBjb25zdCBhcnIgPSBncmFtbWVyLnNwbGl0KC8oPT4pfCgtPikvKS5maWx0ZXIodiA9PiB2ICE9PSBcIj0+XCIgJiYgdiAhPT0gXCItPlwiICYmIHYpO1xyXG4gICAgICAgIGNvbnN0IG5vblRlcm1pbmFsID0gYXJyWzBdO1xyXG4gICAgICAgIGNvbnN0IGRlcml2YXRpb24gPSBhcnJbMV07XHJcbiAgICAgICAgaWYgKHVuaW9uTWFwLmhhcyhub25UZXJtaW5hbCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdW5pb25NYXAuc2V0KG5vblRlcm1pbmFsLCBbZGVyaXZhdGlvbl0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG4vKlxyXG4gICAgQSAtPiBhXHJcbiAgICBBIC0+IGNcclxuICAgID09PT5cclxuICAgIEEgLT4gYSB8IGNcclxuXHJcbiAgICDlubbkuJTkvJrnroDljZXljrvph41cclxuKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHVuaW9uR3JhbW1lcnMoZ3JhbW1lcnM6IEFycmF5PHN0cmluZz4sIG5vblRlcm1pbmFscz86IEFycmF5PHN0cmluZz4sIHRlcm1pbmFscz86IEFycmF5PFtzdHJpbmcsIFJlZ0V4cF0+KTogQXJyYXk8c3RyaW5nPiB7XHJcbiAgICBsZXQgdW5pb25NYXAgPSBuZXcgTWFwPHN0cmluZywgQXJyYXk8c3RyaW5nPj4oKTtcclxuICAgIGNvbnN0IHJlc3VsdDogQXJyYXk8c3RyaW5nPiA9IFtdO1xyXG4gICAgaWYgKCFub25UZXJtaW5hbHMgfHwgIXRlcm1pbmFscykge1xyXG4gICAgICAgIGNvbnN0IHRvY2tlbkFuYVJlcyA9IGdldFRvY2tGcm9tU2ltcGxlR3JhbW1lcnMoZ3JhbW1lcnMpO1xyXG4gICAgICAgIG5vblRlcm1pbmFscyA9IHRvY2tlbkFuYVJlcy5ub25UZXJtaW5hbHM7XHJcbiAgICAgICAgdGVybWluYWxzID0gdG9ja2VuQW5hUmVzLnRlcm1pbmFscztcclxuICAgIH1cclxuICAgIGxldCBsZXhlciA9IG5ldyBMZXhlcih0ZXJtaW5hbHMsIG5vblRlcm1pbmFscyk7XHJcbiAgICBncmFtbWVycy5mb3JFYWNoKGdyYW1tZXIgPT4ge1xyXG4gICAgICAgIGdyYW1tZXIgPSBncmFtbWVyLnJlcGxhY2VBbGwoL1xccy9nLCBcIlwiKTtcclxuICAgICAgICBjb25zdCBhcnIgPSBncmFtbWVyLnNwbGl0KC8oPT4pfCgtPikvKS5maWx0ZXIodiA9PiB2ICE9PSBcIj0+XCIgJiYgdiAhPT0gXCItPlwiICYmIHYpO1xyXG4gICAgICAgIGNvbnN0IG5vblRlcm1pbmFsID0gYXJyWzBdO1xyXG4gICAgICAgIGNvbnN0IGRlcml2YXRpb25zID0gYXJyWzFdLnNwbGl0KFwifFwiKS5maWx0ZXIodiA9PiB2KS5tYXAoZGVyaXZhdGlvbiA9PiB7XHJcbiAgICAgICAgICAgIGxvZy5sb2coXCJbZGVidWddXCIsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgIHJldHVybiBsZXhlci5zcGxpdERlcml2YXRpb24oZGVyaXZhdGlvbik7XHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgaWYgKHVuaW9uTWFwLmhhcyhub25UZXJtaW5hbCkpIHtcclxuICAgICAgICAgICAgY29uc3QgYXJyID0gdW5pb25NYXAuZ2V0KG5vblRlcm1pbmFsKTtcclxuICAgICAgICAgICAgZGVyaXZhdGlvbnMuZm9yRWFjaChkZXJpdmF0aW9uPT57XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZXJpID0gZGVyaXZhdGlvbi5qb2luKFwiIFwiKTtcclxuICAgICAgICAgICAgICAgIGlmKGFycj8uaW5kZXhPZihkZXJpKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcnIucHVzaChkZXJpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB1bmlvbk1hcC5zZXQobm9uVGVybWluYWwsIGRlcml2YXRpb25zLm1hcChkZXJpdmF0aW9uPT57XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVyaXZhdGlvbi5qb2luKFwiIFwiKTtcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICBmb3IgKGxldCBub25UZXJtaW5hbCBvZiB1bmlvbk1hcC5rZXlzKCkpIHtcclxuICAgICAgICBjb25zdCBkZXJpdmF0aW9ucyA9IFsuLi5uZXcgU2V0KHVuaW9uTWFwLmdldChub25UZXJtaW5hbCkhKV07XHJcbiAgICAgICAgcmVzdWx0LnB1c2goYCR7bm9uVGVybWluYWx9ID0+ICR7ZGVyaXZhdGlvbnMuam9pbihcInxcIil9YC5zcGxpdChcInxcIikuam9pbihcIiB8IFwiKSk7XHJcbiAgICB9XHJcbiAgICBsb2cubG9nKHJlc3VsdCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG4vKlxyXG4gICAg5qOA5rWL5piv5ZCm6ZyA6KaB6L+b6KGM5o+Q5bem5YWs5YWx5Zug5a2QXHJcbiovXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja05lZWRsaWZ0VXBDb21tb25Ub2NrZW4oZ3JhbW1lcnM6IEFycmF5PHN0cmluZz4sIG5vblRlcm1pbmFscz86IEFycmF5PHN0cmluZz4sIHRlcm1pbmFscz86IEFycmF5PFtzdHJpbmcsIFJlZ0V4cF0+KTogYm9vbGVhbiB7XHJcbiAgICBsZXQgcmVzdWx0OiBBcnJheTxzdHJpbmc+ID0gZ3JhbW1lcnM7XHJcbiAgICBpZiAoIW5vblRlcm1pbmFscyB8fCAhdGVybWluYWxzKSB7XHJcbiAgICAgICAgY29uc3QgdG9ja2VuQW5hUmVzID0gZ2V0VG9ja0Zyb21TaW1wbGVHcmFtbWVycyhncmFtbWVycyk7XHJcbiAgICAgICAgbm9uVGVybWluYWxzID0gdG9ja2VuQW5hUmVzLm5vblRlcm1pbmFscztcclxuICAgICAgICB0ZXJtaW5hbHMgPSB0b2NrZW5BbmFSZXMudGVybWluYWxzO1xyXG4gICAgfVxyXG4gICAgbGV0IGxleGVyID0gbmV3IExleGVyKHRlcm1pbmFscywgbm9uVGVybWluYWxzKTtcclxuICAgIGZvciAobGV0IGdyYW1tZXIgb2YgcmVzdWx0KSB7XHJcbiAgICAgICAgZ3JhbW1lciA9IGdyYW1tZXIucmVwbGFjZUFsbCgvXFxzL2csIFwiXCIpO1xyXG4gICAgICAgIGNvbnN0IGFyciA9IGdyYW1tZXIuc3BsaXQoLyg9Pil8KC0+KS8pLmZpbHRlcih2ID0+IHYgIT09IFwiPT5cIiAmJiB2ICE9PSBcIi0+XCIgJiYgdik7XHJcbiAgICAgICAgY29uc3QgZGVyaXZhdGlvbnMgPSBhcnJbMV0uc3BsaXQoXCJ8XCIpLmZpbHRlcih2ID0+IHYpLm1hcChkZXJpdmF0aW9uID0+IHtcclxuICAgICAgICAgICAgbG9nLmxvZyhcIltkZWJ1Z11cIiwgcmVzdWx0KTtcclxuICAgICAgICAgICAgcmV0dXJuIGxleGVyLnNwbGl0RGVyaXZhdGlvbihkZXJpdmF0aW9uKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIGNvbnN0IGZpcnN0VG9ja2VuMkRlcml2YXRpb25zTWFwID0gbmV3IE1hcDxOb25UZXJtaW5hbCB8IFRlcm1pbmFsLCBzdHJpbmdbXVtdPigpO1xyXG4gICAgICAgIGRlcml2YXRpb25zLmZvckVhY2goZGVyaXZhdGlvbiA9PiB7XHJcbiAgICAgICAgICAgIGxldCBhcnIgPSBmaXJzdFRvY2tlbjJEZXJpdmF0aW9uc01hcC5nZXQoZGVyaXZhdGlvblswXSk7XHJcbiAgICAgICAgICAgIGlmICghYXJyKSB7XHJcbiAgICAgICAgICAgICAgICBhcnIgPSBbZGVyaXZhdGlvbi5zbGljZSgxKV07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhcnIucHVzaChkZXJpdmF0aW9uLnNsaWNlKDEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmaXJzdFRvY2tlbjJEZXJpdmF0aW9uc01hcC5zZXQoZGVyaXZhdGlvblswXSwgYXJyKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIGZvciAobGV0IHRvY2tlbiBvZiBmaXJzdFRvY2tlbjJEZXJpdmF0aW9uc01hcC5rZXlzKCkpIHtcclxuICAgICAgICAgICAgaWYgKGZpcnN0VG9ja2VuMkRlcml2YXRpb25zTWFwLmdldCh0b2NrZW4pPy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gbGlmdFVwQ29tbW9uVG9ja2VuKGdyYW1tZXJzOiBBcnJheTxzdHJpbmc+LCBub25UZXJtaW5hbHM/OiBBcnJheTxzdHJpbmc+LCB0ZXJtaW5hbHM/OiBBcnJheTxbc3RyaW5nLCBSZWdFeHBdPik6IEFycmF5PHN0cmluZz4ge1xyXG4gICAgbGV0IHJlc3VsdDogQXJyYXk8c3RyaW5nPiA9IGdyYW1tZXJzO1xyXG4gICAgaWYgKCFub25UZXJtaW5hbHMgfHwgIXRlcm1pbmFscykge1xyXG4gICAgICAgIGNvbnN0IHRvY2tlbkFuYVJlcyA9IGdldFRvY2tGcm9tU2ltcGxlR3JhbW1lcnMoZ3JhbW1lcnMpO1xyXG4gICAgICAgIG5vblRlcm1pbmFscyA9IHRvY2tlbkFuYVJlcy5ub25UZXJtaW5hbHM7XHJcbiAgICAgICAgdGVybWluYWxzID0gdG9ja2VuQW5hUmVzLnRlcm1pbmFscztcclxuICAgIH1cclxuICAgIGxldCBsZXhlciA9IG5ldyBMZXhlcih0ZXJtaW5hbHMsIG5vblRlcm1pbmFscyk7XHJcbiAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgIGxldCBuZXdBZGRHcmFtbWVyczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICBjb25zdCB0bXBSZXN1bHQgPSByZXN1bHQubWFwKGdyYW1tZXIgPT4ge1xyXG4gICAgICAgICAgICBncmFtbWVyID0gZ3JhbW1lci5yZXBsYWNlQWxsKC9cXHMvZywgXCJcIik7XHJcbiAgICAgICAgICAgIGNvbnN0IGFyciA9IGdyYW1tZXIuc3BsaXQoLyg9Pil8KC0+KS8pLmZpbHRlcih2ID0+IHYgIT09IFwiPT5cIiAmJiB2ICE9PSBcIi0+XCIgJiYgdik7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vblRlcm1pbmFsID0gYXJyWzBdO1xyXG4gICAgICAgICAgICBjb25zdCBkZXJpdmF0aW9ucyA9IGFyclsxXS5zcGxpdChcInxcIikuZmlsdGVyKHYgPT4gdikubWFwKGRlcml2YXRpb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgbG9nLmxvZyhcIltkZWJ1Z11cIiwgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBsZXhlci5zcGxpdERlcml2YXRpb24oZGVyaXZhdGlvbik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIGNvbnN0IG5ld0Rlcml2YXRpb24gPSBbXTtcclxuICAgICAgICAgICAgY29uc3QgZmlyc3RUb2NrZW4yRGVyaXZhdGlvbnNNYXAgPSBuZXcgTWFwPE5vblRlcm1pbmFsIHwgVGVybWluYWwsIHN0cmluZ1tdW10+KCk7XHJcbiAgICAgICAgICAgIGRlcml2YXRpb25zLmZvckVhY2goZGVyaXZhdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYXJyID0gZmlyc3RUb2NrZW4yRGVyaXZhdGlvbnNNYXAuZ2V0KGRlcml2YXRpb25bMF0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFhcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcnIgPSBbZGVyaXZhdGlvbi5zbGljZSgxKV07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKGRlcml2YXRpb24uc2xpY2UoMSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZmlyc3RUb2NrZW4yRGVyaXZhdGlvbnNNYXAuc2V0KGRlcml2YXRpb25bMF0sIGFycik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIGZvciAobGV0IHRvY2tlbiBvZiBmaXJzdFRvY2tlbjJEZXJpdmF0aW9uc01hcC5rZXlzKCkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChmaXJzdFRvY2tlbjJEZXJpdmF0aW9uc01hcC5nZXQodG9ja2VuKT8ubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3RGVyaXZhdGlvbi5wdXNoKHRvY2tlbiArIGZpcnN0VG9ja2VuMkRlcml2YXRpb25zTWFwLmdldCh0b2NrZW4pIVswXS5qb2luKFwiXCIpKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGRlcml2YXRpb25zID0gZmlyc3RUb2NrZW4yRGVyaXZhdGlvbnNNYXAuZ2V0KHRvY2tlbik7XHJcbiAgICAgICAgICAgICAgICAvLyDlj6/ku6Xmj5Dlj5blhazlm6DlrZBcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1VuVGVybWluYWwgPSBsZXhlci5nZXROZXdOb25UZXJtaW5hbChub25UZXJtaW5hbCk7XHJcbiAgICAgICAgICAgICAgICBuZXdEZXJpdmF0aW9uLnB1c2godG9ja2VuICsgbmV3VW5UZXJtaW5hbCk7XHJcbiAgICAgICAgICAgICAgICBuZXdBZGRHcmFtbWVycy5wdXNoKG5ld1VuVGVybWluYWwgKyBcIiA9PiBcIiArIGRlcml2YXRpb25zPy5tYXAodiA9PiB2LmpvaW4oXCIgXCIpKS5qb2luKFwiIHwgXCIpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbm9uVGVybWluYWwgKyBcIiA9PiBcIiArIG5ld0Rlcml2YXRpb24uam9pbihcIiB8IFwiKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBsb2cubG9nKFwiW3ByZV1cIiwgdG1wUmVzdWx0LCBuZXdBZGRHcmFtbWVycyk7XHJcbiAgICAgICAgY29uc3QgbmV3UmVzdWx0ID0gWy4uLnRtcFJlc3VsdCwgLi4ubmV3QWRkR3JhbW1lcnNdO1xyXG4gICAgICAgIGxvZy5sb2coXCJbY29tXVwiLCByZXN1bHQsIG5ld1Jlc3VsdCk7XHJcbiAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPT09IG5ld1Jlc3VsdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlc3VsdCA9IG5ld1Jlc3VsdDtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuLypcclxuICAgIOajgOafpeaYr+WQpumcgOimgea4healmuW3pumAkuW9klxyXG4qL1xyXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tOZWVkQ2xlYXJSaWdodFJlY3Vyc2lvbihncmFtbWVyczogQXJyYXk8c3RyaW5nPiwgbm9uVGVybWluYWxzPzogQXJyYXk8c3RyaW5nPiwgdGVybWluYWxzPzogQXJyYXk8W3N0cmluZywgUmVnRXhwXT4pOiBib29sZWFuIHtcclxuICAgIGNvbnN0IHJlc3VsdDogQXJyYXk8c3RyaW5nPiA9IFtdO1xyXG4gICAgaWYgKCFub25UZXJtaW5hbHMgfHwgIXRlcm1pbmFscykge1xyXG4gICAgICAgIGNvbnN0IHRvY2tlbkFuYVJlcyA9IGdldFRvY2tGcm9tU2ltcGxlR3JhbW1lcnMoZ3JhbW1lcnMpO1xyXG4gICAgICAgIG5vblRlcm1pbmFscyA9IHRvY2tlbkFuYVJlcy5ub25UZXJtaW5hbHM7XHJcbiAgICAgICAgdGVybWluYWxzID0gdG9ja2VuQW5hUmVzLnRlcm1pbmFscztcclxuICAgIH1cclxuICAgIGxvZy5sb2coXCJbbm9uVGVybWluYWxzXVwiLCBub25UZXJtaW5hbHMpO1xyXG4gICAgbG9nLmxvZyhcIlt0ZXJtaW5hbHNdXCIsIHRlcm1pbmFscyk7XHJcbiAgICBsZXQgbGV4ZXIgPSBuZXcgTGV4ZXIodGVybWluYWxzLCBub25UZXJtaW5hbHMpO1xyXG4gICAgY29uc3Qgbm9uVGVybWluYWxzMkRlcml2YXRpb25NYXAgPSBuZXcgTWFwPE5vblRlcm1pbmFsLCBzdHJpbmdbXVtdPigpO1xyXG4gICAgZm9yIChsZXQgZ3JhbW1lciBvZiBncmFtbWVycykge1xyXG4gICAgICAgIGdyYW1tZXIgPSBncmFtbWVyLnJlcGxhY2VBbGwoL1xccy9nLCBcIlwiKTtcclxuICAgICAgICBjb25zdCBhcnIgPSBncmFtbWVyLnNwbGl0KC8oPT4pfCgtPikvKS5maWx0ZXIodiA9PiB2ICE9PSBcIj0+XCIgJiYgdiAhPT0gXCItPlwiICYmIHYpO1xyXG4gICAgICAgIGNvbnN0IG5vblRlcm1pbmFsID0gYXJyWzBdO1xyXG4gICAgICAgIGNvbnN0IGRlcml2YXRpb25zID0gYXJyWzFdLnNwbGl0KFwifFwiKS5maWx0ZXIodiA9PiB2KS5tYXAoZGVyaXZhdGlvbiA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBsZXhlci5zcGxpdERlcml2YXRpb24oZGVyaXZhdGlvbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbm9uVGVybWluYWxzMkRlcml2YXRpb25NYXAuc2V0KG5vblRlcm1pbmFsLCBkZXJpdmF0aW9ucyk7XHJcbiAgICB9XHJcbiAgICBsb2cubG9nKFwiW25vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwXVwiLCBub25UZXJtaW5hbHMyRGVyaXZhdGlvbk1hcCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vblRlcm1pbmFscy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGdJID0gbm9uVGVybWluYWxzMkRlcml2YXRpb25NYXAuZ2V0KG5vblRlcm1pbmFsc1tpXSk7XHJcbiAgICAgICAgLy8g5raI6Zmk5bem6YCS5b2SXHJcbiAgICAgICAgZm9yIChsZXQgaiA9IGdJIS5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xyXG4gICAgICAgICAgICBjb25zdCBncmFtbWVyID0gZ0khW2pdO1xyXG4gICAgICAgICAgICBpZiAoZ3JhbW1lclswXSA9PT0gbm9uVGVybWluYWxzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlrZjlnKjlt6bpgJLlvZJcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbi8qXHJcbiAgICDmtojpmaTlt6bpgJLlvZJcclxuICAgIOebtOaOpeW3pumAkuW9ki3pl7TmjqXlt6bpgJLlvZJcclxuICAgIOimgeaxgu+8miDovpPlhaXmlofms5XkuI3lkKvmnIlFbXB0eUNoYXJhdGVyIOWSjCDnjq9cclxuKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyUmlnaHRSZWN1cnNpb24oZ3JhbW1lcnM6IEFycmF5PHN0cmluZz4sIG5vblRlcm1pbmFscz86IEFycmF5PHN0cmluZz4sIHRlcm1pbmFscz86IEFycmF5PFtzdHJpbmcsIFJlZ0V4cF0+KTogQXJyYXk8c3RyaW5nPiB7XHJcbiAgICBjb25zdCByZXN1bHQ6IEFycmF5PHN0cmluZz4gPSBbXTtcclxuICAgIGlmICghbm9uVGVybWluYWxzIHx8ICF0ZXJtaW5hbHMpIHtcclxuICAgICAgICBjb25zdCB0b2NrZW5BbmFSZXMgPSBnZXRUb2NrRnJvbVNpbXBsZUdyYW1tZXJzKGdyYW1tZXJzKTtcclxuICAgICAgICBub25UZXJtaW5hbHMgPSB0b2NrZW5BbmFSZXMubm9uVGVybWluYWxzO1xyXG4gICAgICAgIHRlcm1pbmFscyA9IHRvY2tlbkFuYVJlcy50ZXJtaW5hbHM7XHJcbiAgICB9XHJcbiAgICBsb2cubG9nKFwiW25vblRlcm1pbmFsc11cIiwgbm9uVGVybWluYWxzKTtcclxuICAgIGxvZy5sb2coXCJbdGVybWluYWxzXVwiLCB0ZXJtaW5hbHMpO1xyXG4gICAgbGV0IGxleGVyID0gbmV3IExleGVyKHRlcm1pbmFscywgbm9uVGVybWluYWxzKTtcclxuICAgIGNvbnN0IG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwID0gbmV3IE1hcDxOb25UZXJtaW5hbCwgc3RyaW5nW11bXT4oKTtcclxuICAgIGZvciAobGV0IGdyYW1tZXIgb2YgZ3JhbW1lcnMpIHtcclxuICAgICAgICBncmFtbWVyID0gZ3JhbW1lci5yZXBsYWNlQWxsKC9cXHMvZywgXCJcIik7XHJcbiAgICAgICAgY29uc3QgYXJyID0gZ3JhbW1lci5zcGxpdCgvKD0+KXwoLT4pLykuZmlsdGVyKHYgPT4gdiAhPT0gXCI9PlwiICYmIHYgIT09IFwiLT5cIiAmJiB2KTtcclxuICAgICAgICBjb25zdCBub25UZXJtaW5hbCA9IGFyclswXTtcclxuICAgICAgICBjb25zdCBkZXJpdmF0aW9ucyA9IGFyclsxXS5zcGxpdChcInxcIikuZmlsdGVyKHYgPT4gdikubWFwKGRlcml2YXRpb24gPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbGV4ZXIuc3BsaXREZXJpdmF0aW9uKGRlcml2YXRpb24pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwLnNldChub25UZXJtaW5hbCwgZGVyaXZhdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgbG9nLmxvZyhcIltub25UZXJtaW5hbHMyRGVyaXZhdGlvbk1hcF1cIiwgbm9uVGVybWluYWxzMkRlcml2YXRpb25NYXApO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBub25UZXJtaW5hbHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBnSSA9IG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwLmdldChub25UZXJtaW5hbHNbaV0pO1xyXG4gICAgICAgIC8vIOabv+aNouS6p+eUn+W8j1xyXG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaTsgaisrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdKID0gbm9uVGVybWluYWxzMkRlcml2YXRpb25NYXAuZ2V0KG5vblRlcm1pbmFsc1tqXSk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGsgPSBnSSEubGVuZ3RoIC0gMTsgayA+PSAwOyBrLS0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdyYW1tZXIgPSBnSSFba107XHJcbiAgICAgICAgICAgICAgICBpZiAoZ3JhbW1lclswXSA9PT0gbm9uVGVybWluYWxzW2pdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVwbGFjZVxyXG4gICAgICAgICAgICAgICAgICAgIGxvZy5sb2coZ3JhbW1lciwgbm9uVGVybWluYWxzW2pdKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqZ3JhbW1lciBvZiBnSiEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmxvZyhcIlstXVwiLCBqZ3JhbW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdJPy5wdXNoKFsuLi5qZ3JhbW1lciwgLi4uZ3JhbW1lci5zbGljZSgxKV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBnST8uc3BsaWNlKGssIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG5lZWRIYW5kbGVJbmRleDogbnVtYmVyW10gPSBbXTtcclxuICAgICAgICAvLyDmtojpmaTlt6bpgJLlvZJcclxuICAgICAgICBmb3IgKGxldCBqID0gZ0khLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdyYW1tZXIgPSBnSSFbal07XHJcbiAgICAgICAgICAgIGlmIChncmFtbWVyWzBdID09PSBub25UZXJtaW5hbHNbaV0pIHtcclxuICAgICAgICAgICAgICAgIC8vIOWtmOWcqOW3pumAkuW9klxyXG4gICAgICAgICAgICAgICAgbmVlZEhhbmRsZUluZGV4LnB1c2goaik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5lZWRIYW5kbGVJbmRleC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgY29uc3QgbmV3Tm9uVGVybWluYWxUb2NrZW4gPSBsZXhlci5nZXROZXdOb25UZXJtaW5hbChub25UZXJtaW5hbHNbaV0pO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdHcmFtbWVyczogc3RyaW5nW11bXSA9IFtdO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdOb25UZXJtaW5hbEdyYW1tZXJzOiBzdHJpbmdbXVtdID0gW107XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gZ0khLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobmVlZEhhbmRsZUluZGV4LmluZGV4T2YoaikgIT09IC0xKSBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIC8vIEVtcHR5Q2hhcmFjdGVy5L2c5Li66aaW5Liq56ym5Y+3IOayoeacieaEj+S5iVxyXG4gICAgICAgICAgICAgICAgbmV3R3JhbW1lcnMucHVzaChbLi4uKGdJIVtqXVswXSA9PT0gRW1wdHlDaGFyYWN0ZXIgPyBnSSFbal0uc2xpY2UoMSkgOiBnSSFbal0pLCBuZXdOb25UZXJtaW5hbFRvY2tlbl0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4IG9mIG5lZWRIYW5kbGVJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgbmV3Tm9uVGVybWluYWxHcmFtbWVycy5wdXNoKFsuLi5nSSFbaW5kZXhdLnNsaWNlKDEpLCBuZXdOb25UZXJtaW5hbFRvY2tlbl0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbmV3Tm9uVGVybWluYWxHcmFtbWVycy5wdXNoKFtFbXB0eUNoYXJhY3Rlcl0pO1xyXG4gICAgICAgICAgICBub25UZXJtaW5hbHMyRGVyaXZhdGlvbk1hcC5zZXQobm9uVGVybWluYWxzW2ldLCBbLi4ubmV3R3JhbW1lcnMsIC4uLihuZWVkSGFuZGxlSW5kZXgubGVuZ3RoID8gW10gOiBnSSEpXSk7XHJcbiAgICAgICAgICAgIG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwLnNldChuZXdOb25UZXJtaW5hbFRvY2tlbiwgbmV3Tm9uVGVybWluYWxHcmFtbWVycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxvZy5sb2coXCJbbm9uVGVybWluYWxzMkRlcml2YXRpb25NYXAgaW4gcHJvY2Vzc11cIiwgbm9uVGVybWluYWxzMkRlcml2YXRpb25NYXAsIGdJKTtcclxuICAgIH1cclxuICAgIGZvciAobGV0IG5vblRlcm1pbmFsIG9mIG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwLmtleXMoKSkge1xyXG4gICAgICAgIGNvbnN0IGRlcml2YXRpb246IHN0cmluZyA9IG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwLmdldChub25UZXJtaW5hbCkhLm1hcChkZXJpdmF0aW9uID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGRlcml2YXRpb24uam9pbihcIiBcIik7XHJcbiAgICAgICAgfSkuam9pbihcIiB8IFwiKTtcclxuICAgICAgICByZXN1bHQucHVzaChgJHtub25UZXJtaW5hbH0gPT4gJHtkZXJpdmF0aW9ufWApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuXHJcbiIsImltcG9ydCBnZW5lcmF0ZUZpcnN0U2V0IGZyb20gXCJAL2ZpcnN0U2V0XCI7XHJcbmltcG9ydCBnZW5lcmF0ZUZsbG93U2V0IGZyb20gXCJAL2ZvbGxvd1NldFwiO1xyXG5pbXBvcnQgTGV4ZXIgZnJvbSBcIkAvbGV4ZXJcIjtcclxuaW1wb3J0IHsgZ2V0VG9ja0Zyb21TaW1wbGVHcmFtbWVycyB9IGZyb20gXCJAL3NpbXBsZUdyYW1tZXJIZWxwZXJcIjtcclxuaW1wb3J0IHsgR3JhbW1lcnMsIExSUHJlZGljdExpbmUsIExSUHJlZGljdFJlc3VsdFRhYmxlLCBMUlByZWRpY3RUYWJsZUxpbmUsIExSUHJlZGljdFRhYmxlLCBMUlN0YXRlTm9kZSwgTFJTdGF0ZU5vZGVGb3JTaG93LCBMUlN0YXRlTm9kZUl0ZW0gfSBmcm9tIFwiQC90eXBlcy90eXBlXCI7XHJcbmltcG9ydCB7IEVuZGluZ0NoYXJhY3RlciB9IGZyb20gXCJAL3V0aWxzL2NvbnN0XCI7XHJcbmltcG9ydCBsb2cgZnJvbSBcIkAvdXRpbHMvbG9nXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTFJQYXJzZXIgIHtcclxuICAgIGluaXRpYWxTdGF0ZU5vZGU6IExSU3RhdGVOb2RlIHwgbnVsbDtcclxuICAgIGFsbFN0YXRlTm9kZXNNYXA/OiBNYXA8c3RyaW5nLExSU3RhdGVOb2RlPjtcclxuICAgIGxleGVyPzogTGV4ZXI7XHJcbiAgICBncmFtbWVycz86IHN0cmluZ1tdO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsU3RhdGVOb2RlID0gbnVsbDtcclxuICAgIH1cclxuICAgIGdlbmVyYXRlU3RhdGUoZ3JhbW1lcnM6IHN0cmluZ1tdLCBwYXJzZVN0YXJ0Tm9uVGVybWluYWw6IHN0cmluZyxub25UZXJtaW5hbHM/OiBBcnJheTxzdHJpbmc+LCB0ZXJtaW5hbHM/OiBBcnJheTxbc3RyaW5nLCBSZWdFeHBdPikge1xyXG4gICAgICAgIGlmICghbm9uVGVybWluYWxzIHx8ICF0ZXJtaW5hbHMpIHtcclxuICAgICAgICAgICAgY29uc3QgdG9ja2VuQW5hUmVzID0gZ2V0VG9ja0Zyb21TaW1wbGVHcmFtbWVycyhncmFtbWVycyk7XHJcbiAgICAgICAgICAgIG5vblRlcm1pbmFscyA9IHRvY2tlbkFuYVJlcy5ub25UZXJtaW5hbHM7XHJcbiAgICAgICAgICAgIHRlcm1pbmFscyA9IHRvY2tlbkFuYVJlcy50ZXJtaW5hbHM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IEF1Z3VtZW50U3RhcnQgPSBcIkF1Z3VtZW50X1NcIjtcclxuICAgICAgICBsb2cubG9nKFwiW25vblRlcm1pbmFsc11cIiwgbm9uVGVybWluYWxzKTtcclxuICAgICAgICBsb2cubG9nKFwiW3Rlcm1pbmFsc11cIiwgdGVybWluYWxzKTtcclxuICAgICAgICB0aGlzLmdyYW1tZXJzID0gZ3JhbW1lcnM7XHJcbiAgICAgICAgdGhpcy5sZXhlciA9IG5ldyBMZXhlcih0ZXJtaW5hbHMsIG5vblRlcm1pbmFscyk7XHJcblxyXG4gICAgICAgIGNvbnN0IG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwID0gbmV3IE1hcDxzdHJpbmcsc3RyaW5nW11bXT4oKTtcclxuICAgICAgICBmb3IgKGxldCBncmFtbWVyIG9mIGdyYW1tZXJzKSB7XHJcbiAgICAgICAgICAgIGdyYW1tZXIgPSBncmFtbWVyLnJlcGxhY2VBbGwoL1xccy9nLCBcIlwiKTtcclxuICAgICAgICAgICAgY29uc3QgYXJyID0gZ3JhbW1lci5zcGxpdCgvKD0+KXwoLT4pLykuZmlsdGVyKHYgPT4gdiAhPT0gXCI9PlwiICYmIHYgIT09IFwiLT5cIiAmJiB2KTtcclxuICAgICAgICAgICAgY29uc3Qgbm9uVGVybWluYWwgPSBhcnJbMF07XHJcbiAgICAgICAgICAgIGNvbnN0IGRlcml2YXRpb25zID0gYXJyWzFdLnNwbGl0KFwifFwiKS5maWx0ZXIodiA9PiB2KS5tYXAoZGVyaXZhdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sZXhlciEuc3BsaXREZXJpdmF0aW9uKGRlcml2YXRpb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbm9uVGVybWluYWxzMkRlcml2YXRpb25NYXAuc2V0KG5vblRlcm1pbmFsLCBkZXJpdmF0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxvZy5sb2cobm9uVGVybWluYWxzMkRlcml2YXRpb25NYXApO1xyXG5cclxuICAgICAgICB0aGlzLmluaXRpYWxTdGF0ZU5vZGUgPSB7XHJcbiAgICAgICAgICAgIGlkOiAwLFxyXG4gICAgICAgICAgICBpdGVtczogW3tcclxuICAgICAgICAgICAgICAgIG5vblRlcm1pbmFsOiBBdWd1bWVudFN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgZGVyaXZhdGlvbjogW3BhcnNlU3RhcnROb25UZXJtaW5hbF0sXHJcbiAgICAgICAgICAgICAgICBtYXRjaFBvaW50OiAwLFxyXG4gICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgZWRnZXM6IFtdLFxyXG4gICAgICAgIH1cclxuICAgICAgICBleHBhbmRTdGF0ZUl0ZW1zKHRoaXMuaW5pdGlhbFN0YXRlTm9kZS5pdGVtcyxub25UZXJtaW5hbHMyRGVyaXZhdGlvbk1hcCx0aGlzLmxleGVyKTtcclxuICAgICAgICBjb25zdCBhbGxTdGF0ZU5vZGVzTWFwID0gbmV3IE1hcDxzdHJpbmcsTFJTdGF0ZU5vZGU+KCk7XHJcbiAgICAgICAgdGhpcy5hbGxTdGF0ZU5vZGVzTWFwID0gYWxsU3RhdGVOb2Rlc01hcDtcclxuICAgICAgICBhbGxTdGF0ZU5vZGVzTWFwLnNldChzdGF0ZUl0ZW1zVG9TdHJpbmcodGhpcy5pbml0aWFsU3RhdGVOb2RlLml0ZW1zKSx0aGlzLmluaXRpYWxTdGF0ZU5vZGUpO1xyXG4gICAgICAgIGNvbnN0IHZpczogYm9vbGVhbltdID0gW107XHJcbiAgICAgICAgbGV0IHByZVNpemUgPSAwO1xyXG4gICAgICAgIHdoaWxlKHRydWUpIHtcclxuICAgICAgICAgICAgaWYoYWxsU3RhdGVOb2Rlc01hcC5zaXplID09IHByZVNpemUpYnJlYWs7XHJcbiAgICAgICAgICAgIHByZVNpemUgPSBhbGxTdGF0ZU5vZGVzTWFwLnNpemU7XHJcbiAgICAgICAgICAgIGZvcihsZXQgc3RhdGUgb2YgYWxsU3RhdGVOb2Rlc01hcC52YWx1ZXMoKSkge1xyXG4gICAgICAgICAgICAgICAgaWYodmlzW3N0YXRlLmlkXSkgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB2aXNbc3RhdGUuaWRdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIC8vIOWIpOaWreaYr+WQpuWPr+S7peWIsOaOpeWPl+eKtuaAgVxyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpdGVtIG9mIHN0YXRlLml0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoaXRlbS5ub25UZXJtaW5hbCA9PT0gQXVndW1lbnRTdGFydCAmJiBpdGVtLm1hdGNoUG9pbnQgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUuZWRnZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2NrZW46IEVuZGluZ0NoYXJhY3RlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogLTEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VzOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IG5vblRlcm1pbmFsIG9mIG5vblRlcm1pbmFscykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaEl0ZW1zOiBMUlN0YXRlTm9kZUl0ZW1bXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaXRlbSBvZiBzdGF0ZS5pdGVtcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpdGVtLmRlcml2YXRpb24ubGVuZ3RoID09PSBpdGVtLm1hdGNoUG9pbnQpY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0uZGVyaXZhdGlvbltpdGVtLm1hdGNoUG9pbnRdID09PSBub25UZXJtaW5hbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hJdGVtcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub25UZXJtaW5hbDogaXRlbS5ub25UZXJtaW5hbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXJpdmF0aW9uOiBpdGVtLmRlcml2YXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hQb2ludDogaXRlbS5tYXRjaFBvaW50KzEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZighbWF0Y2hJdGVtcy5sZW5ndGgpY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwYW5kU3RhdGVJdGVtcyhtYXRjaEl0ZW1zLG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwLHRoaXMubGV4ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IHN0YXRlSXRlbXNUb1N0cmluZyhtYXRjaEl0ZW1zKTtcclxuICAgICAgICAgICAgICAgICAgICBpZighYWxsU3RhdGVOb2Rlc01hcC5oYXMoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxTdGF0ZU5vZGVzTWFwLnNldChrZXkse1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGFsbFN0YXRlTm9kZXNNYXAuc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBtYXRjaEl0ZW1zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRnZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5lZGdlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9ja2VuOiBub25UZXJtaW5hbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogYWxsU3RhdGVOb2Rlc01hcC5nZXQoa2V5KSEsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IHRlcm1pbmFsIG9mIHRlcm1pbmFscykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaEl0ZW1zOiBMUlN0YXRlTm9kZUl0ZW1bXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaXRlbSBvZiBzdGF0ZS5pdGVtcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpdGVtLmRlcml2YXRpb24ubGVuZ3RoID09PSBpdGVtLm1hdGNoUG9pbnQpY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0uZGVyaXZhdGlvbltpdGVtLm1hdGNoUG9pbnRdID09PSB0ZXJtaW5hbFswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hJdGVtcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub25UZXJtaW5hbDogaXRlbS5ub25UZXJtaW5hbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXJpdmF0aW9uOiBpdGVtLmRlcml2YXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hQb2ludDogaXRlbS5tYXRjaFBvaW50KzEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZighbWF0Y2hJdGVtcy5sZW5ndGgpY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhwYW5kU3RhdGVJdGVtcyhtYXRjaEl0ZW1zLG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwLHRoaXMubGV4ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IHN0YXRlSXRlbXNUb1N0cmluZyhtYXRjaEl0ZW1zKTtcclxuICAgICAgICAgICAgICAgICAgICBpZighYWxsU3RhdGVOb2Rlc01hcC5oYXMoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxTdGF0ZU5vZGVzTWFwLnNldChrZXkse1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGFsbFN0YXRlTm9kZXNNYXAuc2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBtYXRjaEl0ZW1zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRnZXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5lZGdlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9ja2VuOiB0ZXJtaW5hbFswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogYWxsU3RhdGVOb2Rlc01hcC5nZXQoa2V5KSEsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcmVkaWN0SW5wdXQoaW5wdXQ6IHN0cmluZyxwcmVkaWN0VGFibGU6IExSUHJlZGljdFRhYmxlKTogTFJQcmVkaWN0UmVzdWx0VGFibGUge1xyXG4gICAgICAgIGlmKCF0aGlzLmxleGVyKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIltnZW5lcmF0ZVByZWRpY3RUYWJsZV0gbXVzdCBjYWxsIGdlbmVyYXRlU3RhdGUgYmVmb3JlIGdlbmVyYXRlUHJlZGljdFRhYmxlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYW5zOiBMUlByZWRpY3RSZXN1bHRUYWJsZSA9IFtdO1xyXG4gICAgICAgIGlucHV0ID0gaW5wdXQucmVwbGFjZUFsbCgvXFxzL2csIFwiXCIpO1xyXG4gICAgICAgIGFucy5wdXNoKHtcclxuICAgICAgICAgICAgc3RhY2s6IFswXSxcclxuICAgICAgICAgICAgc3ltYm9sczogW10sXHJcbiAgICAgICAgICAgIGlucHV0OiBbLi4udGhpcy5sZXhlci5zcGxpdERlcml2YXRpb24oaW5wdXQpLEVuZGluZ0NoYXJhY3Rlcl0sXHJcbiAgICAgICAgfSlcclxuICAgICAgICB3aGlsZSh0cnVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0ZXAgPSBhbnNbYW5zLmxlbmd0aC0xXTtcclxuICAgICAgICAgICAgY29uc3QgbmV4dCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc3RlcCkpIGFzIExSUHJlZGljdExpbmU7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXRlSWQgPSBzdGVwLnN0YWNrW3N0ZXAuc3RhY2subGVuZ3RoIC0gMV07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBwcmVkaWN0TGluZSA9IHByZWRpY3RUYWJsZVtzdGF0ZUlkXTtcclxuICAgICAgICAgICAgY29uc3QgbW92ZSA9IHByZWRpY3RMaW5lLmFjdGlvbi5nZXQoc3RlcC5pbnB1dFswXSkhO1xyXG4gICAgICAgICAgICBpZihtb3ZlLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgbW92ZSBjb2xsaXNpb24gJHttb3ZlfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKCFtb3ZlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBtb3ZlIGlzIGVtcHR5ICR7bW92ZX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgY01vdmUgPSBtb3ZlWzBdIGFzIHN0cmluZztcclxuICAgICAgICAgICAgaWYoY01vdmUgPT09IFwiYWNjXCIpIHtcclxuICAgICAgICAgICAgICAgIHN0ZXAubW92ZSA9IFwi5o6l5Y+XXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihjTW92ZS5zdGFydHNXaXRoKFwiU1wiKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gc2hpZnRcclxuICAgICAgICAgICAgICAgIHN0ZXAubW92ZSA9IGDnp7vlhaUke3N0ZXAuaW5wdXRbMF19YDtcclxuICAgICAgICAgICAgICAgIG5leHQuc3ltYm9scy5wdXNoKG5leHQuaW5wdXQuc2hpZnQoKSEpO1xyXG4gICAgICAgICAgICAgICAgbmV4dC5zdGFjay5wdXNoKE51bWJlcihjTW92ZS5zbGljZSgxKSkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gcmVkdWNlXHJcbiAgICAgICAgICAgICAgICBzdGVwLm1vdmUgPSBg5qC55o2uJHtjTW92ZX3lvZLnuqZgO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ3JhbW1lciA9IGNNb3ZlLnNsaWNlKDIsLTEpLnJlcGxhY2VBbGwoL1xccy9nLFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgbm9uVGVybWluYWwgPSBncmFtbWVyLnNwbGl0KFwiPT5cIilbMF07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZXJpdmF0aW9uID0gdGhpcy5sZXhlci5zcGxpdERlcml2YXRpb24oZ3JhbW1lci5zcGxpdChcIj0+XCIpWzFdKTtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaT0wO2k8ZGVyaXZhdGlvbi5sZW5ndGg7aSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dC5zdGFjay5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0LnN5bWJvbHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBuZXh0LnN5bWJvbHMucHVzaChub25UZXJtaW5hbCk7XHJcbiAgICAgICAgICAgICAgICAvLyBnb3RvXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsZWZ0U3RhdGVJZCA9IHN0ZXAuc3RhY2tbbmV4dC5zdGFjay5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGpQcmVkaWN0TGluZSA9IHByZWRpY3RUYWJsZVtsZWZ0U3RhdGVJZF07XHJcbiAgICAgICAgICAgICAgICBuZXh0LnN0YWNrLnB1c2goalByZWRpY3RMaW5lLmdvdG8uZ2V0KG5vblRlcm1pbmFsKSFbMF0gYXMgdW5rbm93biBhcyBudW1iZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFucy5wdXNoKG5leHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYW5zO1xyXG4gICAgfVxyXG4gICAgZ2VuZXJhdGVMUjBQcmVkaWN0VGFibGUoKSB7XHJcbiAgICAgICAgaWYoIXRoaXMuaW5pdGlhbFN0YXRlTm9kZSB8fCAhdGhpcy5hbGxTdGF0ZU5vZGVzTWFwIHx8ICF0aGlzLmxleGVyKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIltnZW5lcmF0ZVByZWRpY3RUYWJsZV0gbXVzdCBjYWxsIGdlbmVyYXRlU3RhdGUgYmVmb3JlIGdlbmVyYXRlUHJlZGljdFRhYmxlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwcmVkaWN0VGFibGU6IExSUHJlZGljdFRhYmxlID0gW107XHJcbiAgICAgICAgZm9yKGxldCBzdGF0ZU5vZGUgb2YgdGhpcy5hbGxTdGF0ZU5vZGVzTWFwLnZhbHVlcygpKSB7XHJcbiAgICAgICAgICAgIGxldCBwcmVkaWN0TGluZTogTFJQcmVkaWN0VGFibGVMaW5lID0ge1xyXG4gICAgICAgICAgICAgICAgaWQ6IHN0YXRlTm9kZS5pZCxcclxuICAgICAgICAgICAgICAgIGFjdGlvbjogbmV3IE1hcCgpLFxyXG4gICAgICAgICAgICAgICAgZ290bzogbmV3IE1hcCgpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGZvcihsZXQgbm9uVGVybWluYWwgIG9mIHRoaXMubGV4ZXIubm9uVGVybWluYWxzKSB7XHJcbiAgICAgICAgICAgICAgICBwcmVkaWN0TGluZS5nb3RvLnNldChub25UZXJtaW5hbCxbXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yKGxldCB0ZXJtaW5hbCAgb2YgdGhpcy5sZXhlci50ZXJtaW5hbHMpIHtcclxuICAgICAgICAgICAgICAgIHByZWRpY3RMaW5lLmFjdGlvbi5zZXQodGVybWluYWxbMF0sW10pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHByZWRpY3RMaW5lLmFjdGlvbi5zZXQoRW5kaW5nQ2hhcmFjdGVyLFtdKTtcclxuICAgICAgICAgICAgZm9yKGxldCBlZGdlIG9mIHN0YXRlTm9kZS5lZGdlcykge1xyXG4gICAgICAgICAgICAgICAgaWYoZWRnZS50b2NrZW4gPT09IEVuZGluZ0NoYXJhY3Rlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHByZWRpY3RMaW5lLmFjdGlvbi5nZXQoZWRnZS50b2NrZW4pIS5wdXNoKFwiYWNjXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5sZXhlci5pc1Rlcm1pbmFsKGVkZ2UudG9ja2VuKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHByZWRpY3RMaW5lLmFjdGlvbi5nZXQoZWRnZS50b2NrZW4pIS5wdXNoKGBTJHtlZGdlLm5leHQuaWR9YCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHByZWRpY3RMaW5lLmdvdG8uZ2V0KGVkZ2UudG9ja2VuKSEucHVzaChlZGdlLm5leHQuaWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvcihsZXQgaXRlbSBvZiBzdGF0ZU5vZGUuaXRlbXMpIHtcclxuICAgICAgICAgICAgICAgIGlmKGl0ZW0ubWF0Y2hQb2ludCA9PT0gaXRlbS5kZXJpdmF0aW9uLmxlbmd0aCkgeyAvLyByZWR1Y2VcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHRlcm1pbmFsIG9mIHRoaXMubGV4ZXIudGVybWluYWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWRpY3RMaW5lLmFjdGlvbi5nZXQodGVybWluYWxbMF0pIS5wdXNoKGByKCR7aXRlbS5ub25UZXJtaW5hbH0gPT4gJHtpdGVtLmRlcml2YXRpb24uam9pbihcIiBcIil9KWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwcmVkaWN0VGFibGUucHVzaChwcmVkaWN0TGluZSk7XHJcbiAgICAgICAgfSAgIFxyXG4gICAgICAgIHByZWRpY3RUYWJsZS5zb3J0KChhLGIpPT57XHJcbiAgICAgICAgICAgIHJldHVybiBhLmlkIC0gYi5pZDtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcHJlZGljdFRhYmxlO1xyXG4gICAgfVxyXG4gICAgZ2VuZXJhdGVTTFIxUHJlZGljdFRhYmxlKCkge1xyXG4gICAgICAgIGlmKCF0aGlzLmluaXRpYWxTdGF0ZU5vZGUgfHwgIXRoaXMuYWxsU3RhdGVOb2Rlc01hcCB8fCAhdGhpcy5sZXhlciB8fCAhdGhpcy5ncmFtbWVycykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJbZ2VuZXJhdGVQcmVkaWN0VGFibGVdIG11c3QgY2FsbCBnZW5lcmF0ZVN0YXRlIGJlZm9yZSBnZW5lcmF0ZVByZWRpY3RUYWJsZVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZm9sbG93U2V0ID0gZ2VuZXJhdGVGbGxvd1NldCh0aGlzLmxleGVyLHRoaXMuZ3JhbW1lcnMpO1xyXG4gICAgICAgIGNvbnN0IHByZWRpY3RUYWJsZTogTFJQcmVkaWN0VGFibGUgPSBbXTtcclxuICAgICAgICBmb3IobGV0IHN0YXRlTm9kZSBvZiB0aGlzLmFsbFN0YXRlTm9kZXNNYXAudmFsdWVzKCkpIHtcclxuICAgICAgICAgICAgbGV0IHByZWRpY3RMaW5lOiBMUlByZWRpY3RUYWJsZUxpbmUgPSB7XHJcbiAgICAgICAgICAgICAgICBpZDogc3RhdGVOb2RlLmlkLFxyXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBuZXcgTWFwKCksXHJcbiAgICAgICAgICAgICAgICBnb3RvOiBuZXcgTWFwKClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZm9yKGxldCBub25UZXJtaW5hbCAgb2YgdGhpcy5sZXhlci5ub25UZXJtaW5hbHMpIHtcclxuICAgICAgICAgICAgICAgIHByZWRpY3RMaW5lLmdvdG8uc2V0KG5vblRlcm1pbmFsLFtdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IobGV0IHRlcm1pbmFsICBvZiB0aGlzLmxleGVyLnRlcm1pbmFscykge1xyXG4gICAgICAgICAgICAgICAgcHJlZGljdExpbmUuYWN0aW9uLnNldCh0ZXJtaW5hbFswXSxbXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcHJlZGljdExpbmUuYWN0aW9uLnNldChFbmRpbmdDaGFyYWN0ZXIsW10pO1xyXG4gICAgICAgICAgICBmb3IobGV0IGVkZ2Ugb2Ygc3RhdGVOb2RlLmVkZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICBpZihlZGdlLnRvY2tlbiA9PT0gRW5kaW5nQ2hhcmFjdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJlZGljdExpbmUuYWN0aW9uLmdldChlZGdlLnRvY2tlbikhLnB1c2goXCJhY2NcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmxleGVyLmlzVGVybWluYWwoZWRnZS50b2NrZW4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJlZGljdExpbmUuYWN0aW9uLmdldChlZGdlLnRvY2tlbikhLnB1c2goYFMke2VkZ2UubmV4dC5pZH1gKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJlZGljdExpbmUuZ290by5nZXQoZWRnZS50b2NrZW4pIS5wdXNoKGVkZ2UubmV4dC5pZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yKGxldCBpdGVtIG9mIHN0YXRlTm9kZS5pdGVtcykge1xyXG4gICAgICAgICAgICAgICAgaWYoaXRlbS5tYXRjaFBvaW50ID09PSBpdGVtLmRlcml2YXRpb24ubGVuZ3RoKSB7IC8vIHJlZHVjZVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmb2xsb3dDaDogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHNldExpbmUgb2YgZm9sbG93U2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldExpbmUudG9ja2VuID09PSBpdGVtLm5vblRlcm1pbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2xsb3dDaCA9IFsuLi5zZXRMaW5lLnRlcm1pbmFscy52YWx1ZXMoKV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IHRlcm1pbmFsIG9mIGZvbGxvd0NoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWRpY3RMaW5lLmFjdGlvbi5nZXQodGVybWluYWxbMF0pIS5wdXNoKGByKCR7aXRlbS5ub25UZXJtaW5hbH0gPT4gJHtpdGVtLmRlcml2YXRpb24uam9pbihcIiBcIil9KWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwcmVkaWN0VGFibGUucHVzaChwcmVkaWN0TGluZSk7XHJcbiAgICAgICAgfSAgIFxyXG4gICAgICAgIHByZWRpY3RUYWJsZS5zb3J0KChhLGIpPT57XHJcbiAgICAgICAgICAgIHJldHVybiBhLmlkIC0gYi5pZDtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcHJlZGljdFRhYmxlO1xyXG4gICAgfVxyXG4gICAgZ2V0IHN0YXRlR3JhcGgoKTogTFJTdGF0ZU5vZGVGb3JTaG93IHtcclxuICAgICAgICBjb25zdCB2aXM6IGFueVtdID0gW107XHJcbiAgICAgICAgY29uc3QgZGZzID0gKG5vZGU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpZih2aXNbbm9kZS5pZF0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2aXNbbm9kZS5pZF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgbmV3Tm9kZTogYW55ID0ge307XHJcbiAgICAgICAgICAgIHZpc1tub2RlLmlkXSA9IG5ld05vZGU7XHJcbiAgICAgICAgICAgIG5ld05vZGUuaWQgPSBub2RlLmlkO1xyXG4gICAgICAgICAgICBuZXdOb2RlLml0ZW1zID0gbm9kZS5pdGVtcy5tYXAoKGl0ZW06IGFueSk9PntcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdGF0ZUl0ZW1Ub1N0cmluZyhpdGVtKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgbmV3Tm9kZS5lZGdlcyA9IFtdO1xyXG4gICAgICAgICAgICBmb3IobGV0IGVkZ2Ugb2Ygbm9kZS5lZGdlcykge1xyXG4gICAgICAgICAgICAgICAgbmV3Tm9kZS5lZGdlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB0b2NrZW46IGVkZ2UudG9ja2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIG5leHQ6IGRmcyhlZGdlLm5leHQpXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuZXdOb2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGZzKHRoaXMuaW5pdGlhbFN0YXRlTm9kZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0YXRlSXRlbXNUb1N0cmluZyhpdGVtczogTFJTdGF0ZU5vZGVJdGVtW10pOiBzdHJpbmcgeyBcclxuICAgIGl0ZW1zICA9IGl0ZW1zLnNvcnQoKGEsYik9PntcclxuICAgICAgICBpZihhPGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gMTtcclxuICAgIH0pXHJcbiAgICBsZXQgYW5zID0gXCJcIjtcclxuICAgIGZvcihsZXQgaXRlbSBvZiBpdGVtcykge1xyXG4gICAgICAgIGFucyArPSBgICR7c3RhdGVJdGVtVG9TdHJpbmcoaXRlbSl9YDtcclxuICAgIH1cclxuICAgIHJldHVybiBhbnM7XHJcbn1cclxuZnVuY3Rpb24gc3RhdGVJdGVtVG9TdHJpbmcoaXRlbTogTFJTdGF0ZU5vZGVJdGVtKTogc3RyaW5nIHsgXHJcbiAgICBsZXQgYW5zID0gYCR7aXRlbS5ub25UZXJtaW5hbH0gPT4gYDtcclxuICAgIGZvcihsZXQgaT0wO2k8aXRlbS5kZXJpdmF0aW9uLmxlbmd0aDtpKyspIHtcclxuICAgICAgICBpZihpPT09aXRlbS5tYXRjaFBvaW50KSB7XHJcbiAgICAgICAgICAgIGlmKCFpKWFucyArPSBcIiBcIjtcclxuICAgICAgICAgICAgYW5zICs9IFwiwrcgXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGk9PT1pdGVtLmRlcml2YXRpb24ubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICBhbnMgKz0gYCR7aXRlbS5kZXJpdmF0aW9uW2ldfWA7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICBhbnMgKz0gYCR7aXRlbS5kZXJpdmF0aW9uW2ldfSBgO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBhbnM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGV4cGFuZFN0YXRlSXRlbXMoaXRlbXM6IExSU3RhdGVOb2RlSXRlbVtdLG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwOiBNYXA8c3RyaW5nLHN0cmluZ1tdW10+LGxleGVyOiBMZXhlcikge1xyXG4gICAgZm9yKGxldCBpPTA7aTxpdGVtcy5sZW5ndGg7aSsrKSB7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IGl0ZW1zW2ldO1xyXG4gICAgICAgIGNvbnN0IHRvY2tlbiA9IGl0ZW0uZGVyaXZhdGlvbltpdGVtLm1hdGNoUG9pbnRdO1xyXG4gICAgICAgIGlmKGxleGVyLmlzVGVybWluYWwodG9ja2VuKSljb250aW51ZTtcclxuICAgICAgICBjb25zdCBkZXJpdmF0aW9ucyA9IG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwLmdldCh0b2NrZW4pO1xyXG4gICAgICAgIGRlcml2YXRpb25zPy5mb3JFYWNoKGRlcml2YXRpb249PntcclxuICAgICAgICAgICAgbGV0IGluRmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICBmb3IobGV0IGpJdGVtIG9mIGl0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICBpZihqSXRlbS5ub25UZXJtaW5hbCA9PT0gdG9ja2VuICYmIGpJdGVtLm1hdGNoUG9pbnQgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihqSXRlbS5kZXJpdmF0aW9uLmxlbmd0aCAhPT0gZGVyaXZhdGlvbi5sZW5ndGgpY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVxdWFsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDtpPGRlcml2YXRpb24ubGVuZ3RoO2krKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihqSXRlbS5kZXJpdmF0aW9uW2ldICE9PSBkZXJpdmF0aW9uW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcXVhbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZXF1YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5GbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGluRmxhZylyZXR1cm4gO1xyXG4gICAgICAgICAgICBpdGVtcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIG5vblRlcm1pbmFsOiB0b2NrZW4sXHJcbiAgICAgICAgICAgICAgICBtYXRjaFBvaW50OiAwLFxyXG4gICAgICAgICAgICAgICAgZGVyaXZhdGlvbixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgZ2VuZXJhdGVGaXJzdFNldCwgeyBnZW5lcmF0ZUZpcnN0U2V0UHJvZ3Jlc3NpdmUgfSBmcm9tIFwiQC9maXJzdFNldFwiO1xyXG5pbXBvcnQgZ2VuZXJhdGVGbGxvd1NldCwgeyBnZW5lcmF0ZUZsbG93U2V0UHJvZ3Jlc3NpdmUgfSBmcm9tIFwiQC9mb2xsb3dTZXRcIjtcclxuaW1wb3J0IExleGVyIGZyb20gXCJAL2xleGVyXCI7XHJcbmltcG9ydCB7IEdyYW1tZXJTZXQsIFByZWRpY3RQcm9jZXNzTGluZSwgUHJlZGljdFRhYmxlLCBQcm9jZXNzLCBSdWxlIH0gZnJvbSBcIkAvdHlwZXMvdHlwZVwiO1xyXG5pbXBvcnQgZ2VuZXJhdG9yUHJlZGljdFRhYmxlLCB7IGNoZWNrUHJlZGlja1RhYmxlSXNWYWxpZCwgZ2VuZXJhdGVQcmVkaWN0VGFibGVQcm9ncmVzc2l2ZSwgcHJlZGljdCB9IGZyb20gXCIuL3ByZWRpY3RUYWJsZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTEwxUGFyc2VyIHtcclxuICAgIHB1YmxpYyBsZXhlcjogTGV4ZXI7XHJcbiAgICBwdWJsaWMgdGV4dEdyYW1tZXJzOiBBcnJheTxzdHJpbmc+O1xyXG4gICAgY29uc3RydWN0b3IodGVybWluYWxzOiBBcnJheTxbc3RyaW5nLCBSZWdFeHBdPiwgbm9uVGVybWluYWxzOiBBcnJheTxzdHJpbmc+LCBpbkdyYW1tZXJzOiBBcnJheTxzdHJpbmc+KSB7XHJcbiAgICAgICAgdGhpcy5sZXhlciA9IG5ldyBMZXhlcih0ZXJtaW5hbHMsIG5vblRlcm1pbmFscyk7XHJcbiAgICAgICAgdGhpcy50ZXh0R3JhbW1lcnMgPSBpbkdyYW1tZXJzO1xyXG4gICAgfVxyXG4gICAgZ2V0Rmlyc3RTZXQoKTogR3JhbW1lclNldCB7XHJcbiAgICAgICAgcmV0dXJuIGdlbmVyYXRlRmlyc3RTZXQodGhpcy5sZXhlciwgdGhpcy50ZXh0R3JhbW1lcnMpO1xyXG4gICAgfVxyXG4gICAgZ2V0Rm9sbG93U2V0KGZpcnN0U2V0PzogR3JhbW1lclNldCk6IEdyYW1tZXJTZXQge1xyXG4gICAgICAgIGlmICghZmlyc3RTZXQpIHtcclxuICAgICAgICAgICAgZmlyc3RTZXQgPSB0aGlzLmdldEZpcnN0U2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBnZW5lcmF0ZUZsbG93U2V0KHRoaXMubGV4ZXIsIHRoaXMudGV4dEdyYW1tZXJzLCBmaXJzdFNldCk7XHJcbiAgICB9XHJcbiAgICBnZXRQcmVkaWN0VGFibGUoZmlyc3RTZXQ/OiBHcmFtbWVyU2V0LCBmb2xsb3dTZXQ/OiBHcmFtbWVyU2V0KTogUHJlZGljdFRhYmxlIHtcclxuICAgICAgICBpZiAoIWZpcnN0U2V0KSB7XHJcbiAgICAgICAgICAgIGZpcnN0U2V0ID0gdGhpcy5nZXRGaXJzdFNldCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWZvbGxvd1NldCkge1xyXG4gICAgICAgICAgICBmb2xsb3dTZXQgPSB0aGlzLmdldEZvbGxvd1NldChmaXJzdFNldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBnZW5lcmF0b3JQcmVkaWN0VGFibGUodGhpcy5sZXhlciwgdGhpcy50ZXh0R3JhbW1lcnMsIGZpcnN0U2V0LCBmb2xsb3dTZXQpO1xyXG4gICAgfVxyXG4gICAgZ2V0UHJlZGljdFByb2Nlc3MoaW5wdXQ6IHN0cmluZywgcGFyc2VTdGFydE5vblRlcm1pbmFsOiBzdHJpbmcsIHByZWRpY3RUYWJsZT86IFByZWRpY3RUYWJsZSk6IEFycmF5PFByZWRpY3RQcm9jZXNzTGluZT4ge1xyXG4gICAgICAgIGlmICghcHJlZGljdFRhYmxlKSB7XHJcbiAgICAgICAgICAgIHByZWRpY3RUYWJsZSA9IGdlbmVyYXRvclByZWRpY3RUYWJsZSh0aGlzLmxleGVyLCB0aGlzLnRleHRHcmFtbWVycywgdGhpcy5nZXRGaXJzdFNldCgpLCB0aGlzLmdldEZvbGxvd1NldCgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHByZWRpY3QodGhpcy5sZXhlciwgcHJlZGljdFRhYmxlLCBpbnB1dCwgcGFyc2VTdGFydE5vblRlcm1pbmFsKTtcclxuICAgIH1cclxuICAgIGNoZWNrUHJlZGlja1RhYmxlSXNWYWxpZChwcmVkaWN0VGFibGU6IFByZWRpY3RUYWJsZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBjaGVja1ByZWRpY2tUYWJsZUlzVmFsaWQodGhpcy5sZXhlciwgcHJlZGljdFRhYmxlKTtcclxuICAgIH1cclxuICAgIGNoZWNrSXNMTDAoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGNoZWNrUHJlZGlja1RhYmxlSXNWYWxpZCh0aGlzLmxleGVyLCB0aGlzLmdldFByZWRpY3RUYWJsZSgpKTtcclxuICAgIH1cclxuICAgIGdldEZpcnN0U2V0UHJvZ3Jlc3NpdmUoKTogSXRlcmFibGVJdGVyYXRvcjxSdWxlIHwgUHJvY2VzczxHcmFtbWVyU2V0Pj4ge1xyXG4gICAgICAgIHJldHVybiBnZW5lcmF0ZUZpcnN0U2V0UHJvZ3Jlc3NpdmUodGhpcy5sZXhlciwgdGhpcy50ZXh0R3JhbW1lcnMpO1xyXG4gICAgfVxyXG4gICAgZ2V0Rm9sbG93U2V0UHJvZ3Jlc3NpdmUoZmlyc3RTZXQ/OiBHcmFtbWVyU2V0KTogSXRlcmFibGVJdGVyYXRvcjxSdWxlIHwgUHJvY2VzczxHcmFtbWVyU2V0Pj4ge1xyXG4gICAgICAgIGlmICghZmlyc3RTZXQpIHtcclxuICAgICAgICAgICAgZmlyc3RTZXQgPSB0aGlzLmdldEZpcnN0U2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBnZW5lcmF0ZUZsbG93U2V0UHJvZ3Jlc3NpdmUodGhpcy5sZXhlciwgdGhpcy50ZXh0R3JhbW1lcnMsIGZpcnN0U2V0KTtcclxuICAgIH1cclxuICAgIGdldFByZWRpY3RUYWJsZVByb2dyZXNzaXZlKGZpcnN0U2V0PzogR3JhbW1lclNldCwgZm9sbG93U2V0PzogR3JhbW1lclNldCk6IEl0ZXJhYmxlSXRlcmF0b3I8UnVsZSB8IFByb2Nlc3M8UHJlZGljdFRhYmxlPj4ge1xyXG4gICAgICAgIGlmICghZmlyc3RTZXQpIHtcclxuICAgICAgICAgICAgZmlyc3RTZXQgPSB0aGlzLmdldEZpcnN0U2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghZm9sbG93U2V0KSB7XHJcbiAgICAgICAgICAgIGZvbGxvd1NldCA9IHRoaXMuZ2V0Rm9sbG93U2V0KGZpcnN0U2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGdlbmVyYXRlUHJlZGljdFRhYmxlUHJvZ3Jlc3NpdmUodGhpcy5sZXhlciwgdGhpcy50ZXh0R3JhbW1lcnMsIGZpcnN0U2V0LCBmb2xsb3dTZXQpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJ0cmFuc2ZlclN0cmluZzJHcmFtbWVycyIsImxleGVyIiwiZ3JhbW1lcnMiLCJtYXAiLCJncmFtbWVyIiwicmVwbGFjZUFsbCIsImFyciIsInNwbGl0IiwiZmlsdGVyIiwidiIsImRlcml2YXRpb25zIiwiZGVyaXZhdGlvbiIsInNwbGl0RGVyaXZhdGlvbiIsIm5vblRlcm1pbmFsIiwic2FmZVJlZ0NoYXJhY3RlciIsImNoYXIiLCJFbXB0eUNoYXJhY3RlciIsIkVuZGluZ0NoYXJhY3RlciIsIkxvZ0xldmVsIiwiTm9ybWFsIiwibG9nTGV2ZWxfaW5pdCIsIkVycm9yIiwibG9nTGV2ZWwiLCJsb2dDaGFubmVsIiwiY29uc3RydWN0b3IiLCJjb25zb2xlIiwidGhpcyIsImxvZyIsImluZm8iLCJ3YXJuIiwiV2Fybm5pbmciLCJlcnJvciIsImdlbmVyYXRlRmlyc3RTZXQiLCJpbkdyYW1tZXJzIiwiZmlyc3RTZXQiLCJBcnJheSIsInRvY2tlbiIsInRlcm1pbmFscyIsIlNldCIsImdyYW1tZXJNYXAiLCJNYXAiLCJmb3JFYWNoIiwic2V0IiwicHVzaCIsInRlcm1pbmFsIiwiaXNUZXJtaW5hbCIsInNldExpbmUiLCJnZXQiLCJsZW5ndGgiLCJoYXMiLCJhZGQiLCJmaXJzdFNldE1hcCIsImhhc0NoYW5nZSIsImkiLCJuZXh0U2V0TGluZSIsInNvcnQiLCJhIiwiYiIsImZyb20iLCJnZXREZXJpdmF0aW9uRmlyc3RTZXQiLCJqb2luIiwiZ2VuZXJhdGVGbGxvd1NldCIsImZvbGxvd1NldCIsImZvbGxvd1NldE1hcCIsImoiLCJwU2V0TGluZSIsIkxleGVyIiwibm9uVGVybWluYWxzIiwiY3VycmVudExpbmUiLCJjdXJyZW50Q29sdW1uIiwic291cmNlIiwic2V0U291cmNlIiwicmVtYWluU3RyaW5nIiwic2xpY2UiLCJuZXh0Iiwib3JpZ2luIiwibWF0Y2hSZXN1bHQiLCJtYXRjaCIsInBvcCIsImUiLCJuZXh0Tm90RW1wdHlUZXJtaW5hbCIsIm5leHROb3RFbXB0eSIsInN0ZXAiLCJiYWNrIiwicG9wTm90RW1wdHlUZXJtaW5hbCIsInN0ciIsInNvbWUiLCJjb3VudFRpbWUiLCJpblN0ciIsIlJlZ0V4cCIsImdldE5ld05vblRlcm1pbmFsIiwidG1wIiwiaW5kZXhPZiIsInVuc2hpZnQiLCJnZW5lcmF0b3JQcmVkaWN0VGFibGUiLCJwcmVkaWN0VGFibGUiLCJub25UZXJtaW5hbDJUYWJsZVJvd01hcCIsInRhYmxlTGluZSIsInRlcm1pbmFsMkRlcml2YXRpb24iLCJub25UZXJtaW5hbDJGaXJzdFNldE1hcCIsIm5vblRlcm1pbmFsMkZvbGxvd1NldExpbmUiLCJkZXJpdmF0aW9uRmlyc3RTZXQiLCJoYXNTZXQiLCJjZWxsR3JhbW1lciIsImNoZWNrUHJlZGlja1RhYmxlSXNWYWxpZCIsInRhYmxlIiwidDJkIiwic2ltcGxlTm9uVGVybWluYWxSZWciLCJzaW1wbGVUZXJtaW5hbFJlZyIsImdldFRvY2tGcm9tU2ltcGxlR3JhbW1lcnMiLCJKU09OIiwic3RyaW5naWZ5IiwianNvbkRhdGEiLCJwYXJzZSIsInN0YXRlSXRlbXNUb1N0cmluZyIsIml0ZW1zIiwiYW5zIiwiaXRlbSIsInN0YXRlSXRlbVRvU3RyaW5nIiwibWF0Y2hQb2ludCIsImV4cGFuZFN0YXRlSXRlbXMiLCJub25UZXJtaW5hbHMyRGVyaXZhdGlvbk1hcCIsImluRmxhZyIsImpJdGVtIiwiZXF1YWwiLCJ0ZXh0R3JhbW1lcnMiLCJnZXRGaXJzdFNldCIsImdldEZvbGxvd1NldCIsImdldFByZWRpY3RUYWJsZSIsImdldFByZWRpY3RQcm9jZXNzIiwiaW5wdXQiLCJwYXJzZVN0YXJ0Tm9uVGVybWluYWwiLCJfaW5wdXQiLCJwcmVkaWN0UHJvY2VzcyIsImN1cnJlbnRTdGF0ZSIsInBhcnNlU3RhY2siLCJyZW1haW5pbmdJbnB1dCIsInBhcnNlQWN0aW9uIiwicmV2ZXJzZSIsInByZWRpY3QiLCJjaGVja0lzTEwwIiwiZ2V0Rmlyc3RTZXRQcm9ncmVzc2l2ZSIsInJ1bGVJbmRleCIsInJlc3VsdCIsImdlbmVyYXRlRmlyc3RTZXRQcm9ncmVzc2l2ZSIsImdldEZvbGxvd1NldFByb2dyZXNzaXZlIiwiZ2VuZXJhdGVGbGxvd1NldFByb2dyZXNzaXZlIiwiZ2V0UHJlZGljdFRhYmxlUHJvZ3Jlc3NpdmUiLCJnZW5lcmF0ZVByZWRpY3RUYWJsZVByb2dyZXNzaXZlIiwiaW5pdGlhbFN0YXRlTm9kZSIsImFsbFN0YXRlTm9kZXNNYXAiLCJnZW5lcmF0ZVN0YXRlIiwidG9ja2VuQW5hUmVzIiwiQXVndW1lbnRTdGFydCIsImlkIiwiZWRnZXMiLCJ2aXMiLCJwcmVTaXplIiwic2l6ZSIsInN0YXRlIiwidmFsdWVzIiwibWF0Y2hJdGVtcyIsImtleSIsInByZWRpY3RJbnB1dCIsInN0YWNrIiwic3ltYm9scyIsIm1vdmUiLCJhY3Rpb24iLCJjTW92ZSIsInN0YXJ0c1dpdGgiLCJzaGlmdCIsIk51bWJlciIsImpQcmVkaWN0TGluZSIsImdvdG8iLCJnZW5lcmF0ZUxSMFByZWRpY3RUYWJsZSIsInN0YXRlTm9kZSIsInByZWRpY3RMaW5lIiwiZWRnZSIsImdlbmVyYXRlU0xSMVByZWRpY3RUYWJsZSIsImZvbGxvd0NoIiwic3RhdGVHcmFwaCIsImRmcyIsIm5vZGUiLCJuZXdOb2RlIiwiZ0kiLCJmaXJzdFRvY2tlbjJEZXJpdmF0aW9uc01hcCIsImtleXMiLCJ1bmlvbk1hcCIsImdKIiwiayIsImpncmFtbWVyIiwic3BsaWNlIiwibmVlZEhhbmRsZUluZGV4IiwibmV3Tm9uVGVybWluYWxUb2NrZW4iLCJuZXdHcmFtbWVycyIsIm5ld05vblRlcm1pbmFsR3JhbW1lcnMiLCJpbmRleCIsIm5ld0FkZEdyYW1tZXJzIiwidG1wUmVzdWx0IiwibmV3RGVyaXZhdGlvbiIsIm5ld1VuVGVybWluYWwiLCJuZXdSZXN1bHQiLCJkZXJpIl0sIm1hcHBpbmdzIjoiYUFHZ0IsU0FBQUEsRUFBd0JDLEVBQWNDLEdBQ2xELE9BQU9BLEVBQVNDLEtBQUlDLEdBQ1RBLEVBQVFDLFdBQVcsTUFBTyxNQUNsQ0YsS0FBSUMsSUFDSCxNQUFNRSxFQUFNRixFQUFRRyxNQUFNLGFBQWFDLFFBQU9DLEdBQVcsT0FBTkEsR0FBb0IsT0FBTkEsR0FBY0EsSUFDekVDLEVBQWNKLEVBQUksR0FBR0MsTUFBTSxLQUFLQyxRQUFPQyxHQUFLQSxHQUFXLE1BQU5BLElBQVdOLEtBQUlRLEdBQzNEVixFQUFNVyxnQkFBZ0JELEtBRWpDLE1BQU8sQ0FDSEUsWUFBYVAsRUFBSSxHQUNqQkksWUFBYUEsRUFDaEIsR0FHVCxD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
