!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).index={})}(this,(function(e){"use strict";function t(e,t){return t.map((e=>e.replaceAll(/\s/g,""))).map((t=>{const n=t.split(/(=>)|(->)/).filter((e=>"=>"!==e&&"->"!==e&&e)),r=n[1].split("|").filter((e=>e&&"|"!==e)).map((t=>e.splitDerivation(t)));return{nonTerminal:n[0],derivations:r}}))}function n(e){switch(e){case"+":case"*":case"(":case")":return`\\${e}`;default:return e}}const r="ε",i="$";var o;!function(e){e[e.Normal=0]="Normal",e[e.Warnning=1]="Warnning",e[e.Error=2]="Error",e[e.None=3]="None"}(o||(o={}));let s=o.Normal;s=o.Error;var l=new class{logLevel;logChannel;constructor(e=o.Normal,t=console){this.logLevel=e,this.logChannel=t}log(...e){this.logLevel<=o.Normal&&this.logChannel.log("[normal]",...e)}warn(...e){this.logLevel<=o.Warnning&&this.logChannel.warn("[warn]",...e)}error(...e){this.logLevel<=o.Error&&this.logChannel.error("[error]",...e)}logTo(e){this.logChannel=e}}(s);function a(e,n){l.log("[generateFirstSet start]");const i=t(e,n);l.log("[grammers after transferString2Grammers]",i);const o=new Array(...i.map((e=>({tocken:e.nonTerminal,terminals:new Set})))),s=new Map;i.forEach((e=>{s.set(e.nonTerminal,e.derivations)})),o.push(...e.terminals.map((e=>({tocken:e[0],terminals:new Set([e[0]]),isTerminal:!0})))),o.forEach((e=>{if(!e.isTerminal)for(let t of s.get(e.tocken))1!==t.length||t[0]!==r||e.terminals.has(r)||e.terminals.add(r)}));const a=new Map;for(let e of o)a.set(e.tocken,e);for(;;){let t=!1;if(o.forEach((n=>{if(!n.isTerminal)for(let i of s.get(n.tocken))for(let o=0;o<i.length;o++){const s=i[o];if(e.isTerminal(s)){if(n.terminals.has(s)||(l.log(s),t=!0,n.terminals.add(s)),s!==r)break}else{const e=a.get(s);if(e.terminals.forEach((e=>{e!==r&&(n.terminals.has(e)||(t=!0,n.terminals.add(e)))})),!e.terminals.has(r))break}o===i.length-1&&n.terminals.add(r)}})),!t)break}return o.filter((e=>!e.isTerminal)).sort(((e,t)=>e.tocken<t.tocken?-1:1)).map((e=>(e.terminals=new Set(Array.from(e.terminals).sort(((e,t)=>e<t?-1:1))),e)))}function c(e,t,n){const i=new Set;for(let o=0;o<t.length;o++){const s=t[o];if(e.isTerminal(s)){if(s!==r){i.add(s);break}}else if(n.get(s)?.terminals.forEach((e=>{i.add(e)})),!n.get(s).terminals.has(r))break;o===t.length-1&&i.add(r)}return{tocken:t.join(""),terminals:i}}function m(e,n,o){l.log("[generateFllowSet start]"),o=o?Array.from(o):a(e,n);const s=t(e,n);l.log("[grammers after transferString2Grammers]",s);const c=new Array(...s.map((e=>({tocken:e.nonTerminal,terminals:new Set([i])})))),m=new Map;s.forEach((e=>{m.set(e.nonTerminal,e.derivations)})),c.push(...e.terminals.map((e=>({tocken:e[0],terminals:new Set([i]),isTerminal:!0}))));const f=new Map;for(let e of c)f.set(e.tocken,e);o.push(...e.terminals.map((e=>({tocken:e[0],terminals:new Set([e[0]]),isTerminal:!0}))));const h=new Map;for(let e of o)h.set(e.tocken,e);for(;;){let e=!1;if(s.forEach((t=>{for(let n of t.derivations)for(let t=n.length-2;t>=0;t--){const i=f.get(n[t]);for(let o=t+1;o<n.length;o++){const t=h.get(n[o]).terminals;for(let n of t)n!==r&&(i?.terminals.has(n)||(e=!0,i?.terminals.add(n)));if(!t.has(r))break}}})),s.forEach((t=>{const n=f.get(t.nonTerminal);for(let i of t.derivations)for(let t=i.length-1;t>=0;t--){const o=i[t],s=f.get(o);for(let t of n.terminals)t!==r&&(s?.terminals.has(t)||(e=!0,s?.terminals.add(t)));if(!h.get(o).terminals.has(r))break}})),!e)break}return c.filter((e=>!e.isTerminal)).sort(((e,t)=>e.tocken<t.tocken?-1:1)).map((e=>(e.terminals=new Set(Array.from(e.terminals).sort(((e,t)=>e<t?-1:1))),e)))}class f{nonTerminals;terminals;currentLine=0;currentColumn=0;source="";constructor(e,t){this.nonTerminals=[...t],this.terminals=[...e]}setSource(e){this.source=e,this.currentLine=0,this.currentColumn=0}remainString(){return this.source.slice(this.currentColumn)}next(){if(this.currentColumn>=this.source.length)return{tocken:i,origin:i};for(let e of this.terminals){const t=this.source.slice(this.currentColumn).match(e[1]);if(t)return{tocken:e[0],origin:t[0]}}throw new Error(`[lexer next]: match next Terminal error \n sourecInput: ${this.source}\n remainString: ${this.source.slice(this.currentColumn)}`)}pop(){try{const e=this.next();return e.tocken!==i&&(this.currentColumn+=e.origin.length),e}catch(e){throw e}}nextNotEmptyTerminal(){for(;;){const e=this.next();if("whiteSpace"!==e.tocken)return e;this.currentColumn+=e.origin.length}}nextNotEmpty(e){const t=this.currentColumn;for(let t=0;t<e-1;t++)this.popNotEmptyTerminal();const n=this.nextNotEmptyTerminal();return this.currentColumn=t,n}popNotEmptyTerminal(){const e=this.nextNotEmptyTerminal();return e.tocken!==i&&(this.currentColumn+=e.origin.length),e}isTerminal(e){let t=!0;return this.nonTerminals.some((n=>n===e&&(t=!1,!0))),t}splitDerivation(e){const t=[];let r=0;const i=e;for(;e.length;){for(let n of this.nonTerminals){const r=e.match(new RegExp("^"+n));if(r){t.push(n),e=e.slice(r[0].length);break}}for(let r of this.terminals){const i=e.match(new RegExp("^"+n(r[0])));if(i){t.push(r[0]),e=e.slice(i[0].length);break}}if(r++,r>5e4)throw new Error(`[splitDerivation] error: excute over MAX_EXCUTE str: ${i}  remaining str: ${e} `)}return t}getNewNonTerminal(e){let t=e;for(;;)if(t+="'",-1===this.nonTerminals.indexOf(t))return this.nonTerminals.unshift(t),t}}function h(e,n,i,o){const s=t(e,n),a=[],m=new Map;e.nonTerminals.forEach((e=>{const t={nonTerminal:e,terminal2Derivation:new Map};m.set(e,t),a.push(t)}));const f=new Map,h=new Map;for(let e of o)h.set(e.tocken,e);for(let e of i)f.set(e.tocken,e);return s.forEach((t=>{for(let n of t.derivations){const i=c(e,n,f),o=m.get(t.nonTerminal);l.log(i);let s=new Map;for(let e of i.terminals){if(e===r)continue;let i=o?.terminal2Derivation.get(e);s.set(e,!0),i||(i={nonTerminal:t.nonTerminal,derivations:[]},o?.terminal2Derivation.set(e,i)),i.derivations.push(n)}if(i.terminals.has(r))for(let e of h.get(t.nonTerminal).terminals){if(s.has(e))continue;let r=o?.terminal2Derivation.get(e);r||(r={nonTerminal:t.nonTerminal,derivations:[]},o?.terminal2Derivation.set(e,r)),r.derivations.push(n)}}})),a}function g(e,t){for(let n of e.terminals){const e=n[0];t.forEach((t=>{const n=t.terminal2Derivation.get(e);if(n&&n.derivations.length>1)return!1}))}return!0}const p=/^[A-Z]'*/,u=/[a-z|\u0391-\u03C9]/;function d(e){const t=new Set,n=new Set;return e.forEach((e=>{const r=e.replaceAll(/\s/g,"").split(/(=>)|(->)/).filter((e=>"=>"!==e&&"->"!==e&&e)),i=r[0];t.add(i),r[1].split("|").filter((e=>e&&"|"!==e)).forEach((e=>{for(;e.length;){let r=null;if(r=e.match(p),r)t.add(r[0]),e=e.slice(r[0].length);else{if(r=e.match(u),!r)throw new Error(`[getTockFromSimpleGrammers error] cant recognize the character remaining: ${e}`);n.add(JSON.stringify([r[0],"^"+r[0]])),e=e.slice(r[0].length)}}}))})),{nonTerminals:Array.from(t).sort(((e,t)=>t.length-e.length)),terminals:Array.from(n).map((e=>{const t=JSON.parse(e);return t[1]=new RegExp(t[1]),t}))}}function T(e){e=e.sort(((e,t)=>e<t?-1:1));let t="";for(let n of e)t+=` ${k(n)}`;return t}function k(e){let t=`${e.nonTerminal} => `;for(let n=0;n<e.derivation.length;n++)n===e.matchPoint&&(n||(t+=" "),t+="· "),n===e.derivation.length-1?t+=`${e.derivation[n]}`:t+=`${e.derivation[n]} `;return t}function w(e,t,n){for(let r=0;r<e.length;r++){const i=e[r],o=i.derivation[i.matchPoint];if(n.isTerminal(o))continue;t.get(o)?.forEach((t=>{let n=!1;for(let r of e)if(r.nonTerminal===o&&0===r.matchPoint){if(r.derivation.length!==t.length)continue;let e=!0;for(let n=0;n<t.length;n++)if(r.derivation[n]!==t[n]){e=!1;break}if(e){n=!0;break}}n||e.push({nonTerminal:o,matchPoint:0,derivation:t})}))}}e.LL1Parser=class{lexer;textGrammers;constructor(e,t,n){this.lexer=new f(e,t),this.textGrammers=n}getFirstSet(){return a(this.lexer,this.textGrammers)}getFollowSet(e){return e||(e=this.getFirstSet()),m(this.lexer,this.textGrammers,e)}getPredictTable(e,t){return e||(e=this.getFirstSet()),t||(t=this.getFollowSet(e)),h(this.lexer,this.textGrammers,e,t)}getPredictProcess(e,t,n){if(n||(n=h(this.lexer,this.textGrammers,this.getFirstSet(),this.getFollowSet())),!this.lexer.nonTerminals.some((e=>t===e)))throw new Error("1");return function(e,t,n,o){let s=n.replaceAll(/\s/g,"");const a=[];let c=1;const m={id:0,text:o,check:!1},f=[m];let h={parseStack:[i,o],remainingInput:n,parseAction:""};e.setSource(s);const g=new Map;t.forEach((e=>{g.set(e.nonTerminal,e)}));try{for(;;){const t=h.parseStack[h.parseStack.length-1];if(e.isTerminal(t)){const n=e.next();if(t!==n.tocken)throw new Error(`[predict error] terminal match error tocken: ${t} stack: ${h.parseStack} remainingInput: ${e.remainString()}`);{if(h.parseAction=`match ${n.tocken} ${n.origin}`,a.push(h),h=JSON.parse(JSON.stringify(h)),e.pop(),h.parseAction="",h.remainingInput=e.remainString(),h.parseStack.pop(),0===h.parseStack.length)break;const t=f.pop();t.children||(t.children=[]),t.children.push({id:c++,text:n.origin,check:!1})}continue}const n=e.next(),i=g.get(t).terminal2Derivation.get(n.tocken);if(1!==i?.derivations?.length)throw new Error(`[predict error] parse input fail \n terminal: ${n} \n  remainingInput: ${e.remainString()} \n grammer: ${i} `);h.parseAction=`Predict ${i.nonTerminal} => ${i.derivations[0].join(" ")}`,l.log("[predict State]",h),a.push(h),h=JSON.parse(JSON.stringify(h)),h.parseStack.pop();const o=f.pop(),s=i.derivations[0].filter((e=>e!==r));o.children||(o.children=[]);for(let e of s)o.children.push({id:c++,text:e,check:!1});f.push(...[...o.children].reverse()),h.parseStack.push(...s.reverse()),h.parseAction="",h.remainingInput=e.remainString()}}catch(e){h.parseAction=e.toString(),a.push(h)}return a.astNode=m,a}(this.lexer,n,e,t)}checkPredickTableIsValid(e){return g(this.lexer,e)}checkIsLL0(){return g(this.lexer,this.getPredictTable())}getFirstSetProgressive(){return function*(e,n){yield["1. 如果X式一个终结符号，那么FIRST(X) = X ","2. 如果 X => ε 是一个产生式，那么将e加人到 FIRST（X)中。","3. A => B0B1B2B3\n            i = 0\n            FIRST(Bi) - EmptyCharacter 加入到 FIRST(A)中\n            如果FIRST(B1)不含有EmptyCharacter退出循环\n            若B0 - B3均含有EmptyCharacter 将EmptyCharacter加入到FIRST(A)中\n        ","4. 去除所有终结符号的表项"],l.log("[generateFirstSet start]");const i=t(e,n);l.log("[grammers after transferString2Grammers]",i);const o=new Array(...i.map((e=>({tocken:e.nonTerminal,terminals:new Set})))),s=new Map;i.forEach((e=>{s.set(e.nonTerminal,e.derivations)})),o.push(...e.terminals.map((e=>({tocken:e[0],terminals:new Set([e[0]]),isTerminal:!0})))),yield{ruleIndex:0,result:o},o.forEach((e=>{if(!e.isTerminal)for(let t of s.get(e.tocken))1!==t.length||t[0]!==r||e.terminals.has(r)||e.terminals.add(r)})),yield{ruleIndex:1,result:o};const a=new Map;for(let e of o)a.set(e.tocken,e);for(;;){let t=!1;if(o.forEach((n=>{if(!n.isTerminal)for(let i of s.get(n.tocken))for(let o=0;o<i.length;o++){const s=i[o];if(e.isTerminal(s)){if(n.terminals.has(s)||(l.log(s),t=!0,n.terminals.add(s)),s!==r)break}else{const e=a.get(s);if(e.terminals.forEach((e=>{e!==r&&(n.terminals.has(e)||(t=!0,n.terminals.add(e)))})),!e.terminals.has(r))break}o===i.length-1&&n.terminals.add(r)}})),!t)break;yield{ruleIndex:2,result:o}}yield{ruleIndex:3,result:o.filter((e=>!e.isTerminal)).sort(((e,t)=>e.tocken<t.tocken?-1:1)).map((e=>(e.terminals=new Set(Array.from(e.terminals).sort(((e,t)=>e<t?-1:1))),e)))}}(this.lexer,this.textGrammers)}getFollowSetProgressive(e){return e||(e=this.getFirstSet()),function*(e,n,o){yield["1. 将$放到FOLLOW(S)中","2. 如果存在一个产生式A => aBb ， 那么FIRST(b) 中除ε 之外的所有符号都在FOLLOW(B)中。attention: A => aBCd 那么把first(Cd)加入到Follow(B)中去","3.如果存在一个产生式 A => aB ， 或存在产生式 A => aBb 且FIRST(b) 包含 ε ，那么FOLLOW(A)中的所有符号都在FOLLOW(B)中。","4. 去除所有终结符号的表项"],l.log("[generateFllowSet start]"),o=o?Array.from(o):a(e,n);const s=t(e,n);l.log("[grammers after transferString2Grammers]",s);const c=new Array(...s.map((e=>({tocken:e.nonTerminal,terminals:new Set([i])})))),m=new Map;s.forEach((e=>{m.set(e.nonTerminal,e.derivations)})),c.push(...e.terminals.map((e=>({tocken:e[0],terminals:new Set([i]),isTerminal:!0})))),yield{ruleIndex:0,result:c};const f=new Map;for(let e of c)f.set(e.tocken,e);o.push(...e.terminals.map((e=>({tocken:e[0],terminals:new Set([e[0]]),isTerminal:!0}))));const h=new Map;for(let e of o)h.set(e.tocken,e);for(;;){let e=!1;if(s.forEach((t=>{for(let n of t.derivations)for(let t=n.length-2;t>=0;t--){const i=f.get(n[t]);for(let o=t+1;o<n.length;o++){const t=h.get(n[o]).terminals;for(let n of t)n!==r&&(i?.terminals.has(n)||(e=!0,i?.terminals.add(n)));if(!t.has(r))break}}})),e&&(yield{ruleIndex:1,result:c},e=!1),s.forEach((t=>{const n=f.get(t.nonTerminal);for(let i of t.derivations)for(let t=i.length-1;t>=0;t--){const o=i[t],s=f.get(o);for(let t of n.terminals)t!==r&&(s?.terminals.has(t)||(e=!0,s?.terminals.add(t)));if(!h.get(o).terminals.has(r))break}})),e&&(yield{ruleIndex:2,result:c}),!e)break}yield{ruleIndex:3,result:c.filter((e=>!e.isTerminal)).sort(((e,t)=>e.tocken<t.tocken?-1:1)).map((e=>(e.terminals=new Set(Array.from(e.terminals).sort(((e,t)=>e<t?-1:1))),e)))}}(this.lexer,this.textGrammers,e)}getPredictTableProgressive(e,n){return e||(e=this.getFirstSet()),n||(n=this.getFollowSet(e)),function*(e,n,i,o){yield["1. 对 First(u) 中的所有终结符 a （不含 ε ），置 M[A, a] = A -> u","2. 若 First(u) 含 ε ，则对 Follow(A) 中的所有符号 a （可含 $ ），置 M[A, a] = A -> u"];const s=t(e,n),a=[],m=new Map;e.nonTerminals.forEach((e=>{const t={nonTerminal:e,terminal2Derivation:new Map};m.set(e,t),a.push(t)}));const f=new Map,h=new Map;for(let e of o)h.set(e.tocken,e);for(let e of i)f.set(e.tocken,e);for(let t of s)for(let n of t.derivations){const i=c(e,n,f),o=m.get(t.nonTerminal);l.log(i);for(let e of i.terminals){if(e===r)continue;let i=o?.terminal2Derivation.get(e);i||(i={nonTerminal:t.nonTerminal,derivations:[]},o?.terminal2Derivation.set(e,i)),i.derivations.push(n),yield{ruleIndex:0,result:a}}if(i.terminals.has(r))for(let e of h.get(t.nonTerminal).terminals){let r=o?.terminal2Derivation.get(e);r||(r={nonTerminal:t.nonTerminal,derivations:[]},o?.terminal2Derivation.set(e,r)),r.derivations.push(n),yield{ruleIndex:1,result:a}}}}(this.lexer,this.textGrammers,e,n)}},e.LRParser=class{initialStateNode;allStateNodesMap;lexer;grammers;constructor(){this.initialStateNode=null}generateState(e,t,n,r){if(!n||!r){const t=d(e);n=t.nonTerminals,r=t.terminals}const o="Augument_S";l.log("[nonTerminals]",n),l.log("[terminals]",r),this.grammers=e,this.lexer=new f(r,n);const s=new Map;for(let t of e){t=t.replaceAll(/\s/g,"");const e=t.split(/(=>)|(->)/).filter((e=>"=>"!==e&&"->"!==e&&e)),n=e[0],r=e[1].split("|").filter((e=>e)).map((e=>this.lexer.splitDerivation(e)));s.set(n,r)}l.log(s),this.initialStateNode={id:0,items:[{nonTerminal:o,derivation:[t],matchPoint:0}],edges:[]},w(this.initialStateNode.items,s,this.lexer);const a=new Map;this.allStateNodesMap=a,a.set(T(this.initialStateNode.items),this.initialStateNode);const c=[];let m=0;for(;a.size!=m;){m=a.size;for(let e of a.values())if(!c[e.id]){c[e.id]=!0;for(let t of e.items)t.nonTerminal===o&&1===t.matchPoint&&e.edges.push({tocken:i,next:{id:-1,items:[],edges:[]}});for(let t of n){let n=[];for(let r of e.items)r.derivation.length!==r.matchPoint&&r.derivation[r.matchPoint]===t&&n.push({nonTerminal:r.nonTerminal,derivation:r.derivation,matchPoint:r.matchPoint+1});if(!n.length)continue;w(n,s,this.lexer);const r=T(n);a.has(r)||a.set(r,{id:a.size,items:n,edges:[]}),e.edges.push({tocken:t,next:a.get(r)})}for(let t of r){let n=[];for(let r of e.items)r.derivation.length!==r.matchPoint&&r.derivation[r.matchPoint]===t[0]&&n.push({nonTerminal:r.nonTerminal,derivation:r.derivation,matchPoint:r.matchPoint+1});if(!n.length)continue;w(n,s,this.lexer);const r=T(n);a.has(r)||a.set(r,{id:a.size,items:n,edges:[]}),e.edges.push({tocken:t[0],next:a.get(r)})}}}}*generateStateProgressive(e,t,n,r){if(!n||!r){const t=d(e);n=t.nonTerminals,r=t.terminals}const o="Augument_S";l.log("[nonTerminals]",n),l.log("[terminals]",r),this.grammers=e,this.lexer=new f(r,n);const s=new Map;for(let t of e){t=t.replaceAll(/\s/g,"");const e=t.split(/(=>)|(->)/).filter((e=>"=>"!==e&&"->"!==e&&e)),n=e[0],r=e[1].split("|").filter((e=>e)).map((e=>this.lexer.splitDerivation(e)));s.set(n,r)}l.log(s),this.initialStateNode={id:0,items:[{nonTerminal:o,derivation:[t],matchPoint:0}],edges:[]},w(this.initialStateNode.items,s,this.lexer),yield;const a=new Map;this.allStateNodesMap=a,a.set(T(this.initialStateNode.items),this.initialStateNode);const c=[];let m=0;for(;a.size!=m;){m=a.size;for(let e of a.values())if(!c[e.id]){c[e.id]=!0;for(let t of e.items)t.nonTerminal===o&&1===t.matchPoint&&e.edges.push({tocken:i,next:{id:-1,items:[],edges:[]}});for(let t of n){let n=[];for(let r of e.items)r.derivation.length!==r.matchPoint&&r.derivation[r.matchPoint]===t&&n.push({nonTerminal:r.nonTerminal,derivation:r.derivation,matchPoint:r.matchPoint+1});if(!n.length)continue;w(n,s,this.lexer);const r=T(n);a.has(r)||a.set(r,{id:a.size,items:n,edges:[]}),e.edges.push({tocken:t,next:a.get(r)}),yield}for(let t of r){let n=[];for(let r of e.items)r.derivation.length!==r.matchPoint&&r.derivation[r.matchPoint]===t[0]&&n.push({nonTerminal:r.nonTerminal,derivation:r.derivation,matchPoint:r.matchPoint+1});if(!n.length)continue;w(n,s,this.lexer);const r=T(n);a.has(r)||a.set(r,{id:a.size,items:n,edges:[]}),e.edges.push({tocken:t[0],next:a.get(r)}),yield}}}}predictInput(e,t){if(!this.lexer)throw new Error("[generatePredictTable] must call generateState before generatePredictTable");let n=[];for(e=e.replaceAll(/\s/g,""),n.push({stack:[0],symbols:[],input:[...this.lexer.splitDerivation(e),i]});;){const e=n[n.length-1],r=JSON.parse(JSON.stringify(e)),i=t[e.stack[e.stack.length-1]].action.get(e.input[0]);if(i.length>1)throw new Error(`move collision ${i}`);if(!i.length)throw new Error(`move is empty ${i}`);let o=i[0];if("acc"===o){e.move="接受";break}if(o.startsWith("S"))e.move=`移入${e.input[0]}`,r.symbols.push(r.input.shift()),r.stack.push(Number(o.slice(1)));else{e.move=`根据${o}归约`;const n=o.slice(2,-1).replaceAll(/\s/g,""),i=n.split("=>")[0],s=this.lexer.splitDerivation(n.split("=>")[1]);for(let e=0;e<s.length;e++)r.stack.pop(),r.symbols.pop();r.symbols.push(i);const l=t[e.stack[r.stack.length-1]];r.stack.push(l.goto.get(i)[0])}n.push(r)}return n}generateLR0PredictTable(){if(!this.initialStateNode||!this.allStateNodesMap||!this.lexer)throw new Error("[generatePredictTable] must call generateState before generatePredictTable");const e=[];for(let t of this.allStateNodesMap.values()){let n={id:t.id,action:new Map,goto:new Map};for(let e of this.lexer.nonTerminals)n.goto.set(e,[]);for(let e of this.lexer.terminals)n.action.set(e[0],[]);n.action.set(i,[]);for(let e of t.edges)e.tocken!==i?this.lexer.isTerminal(e.tocken)?n.action.get(e.tocken).push(`S${e.next.id}`):n.goto.get(e.tocken).push(e.next.id):n.action.get(e.tocken).push("acc");for(let e of t.items)if(e.matchPoint===e.derivation.length)for(let t of this.lexer.terminals)n.action.get(t[0]).push(`r(${e.nonTerminal} => ${e.derivation.join(" ")})`);e.push(n)}return e.sort(((e,t)=>e.id-t.id)),e}generateSLR1PredictTable(){if(!(this.initialStateNode&&this.allStateNodesMap&&this.lexer&&this.grammers))throw new Error("[generatePredictTable] must call generateState before generatePredictTable");const e=m(this.lexer,this.grammers),t=[];for(let n of this.allStateNodesMap.values()){let r={id:n.id,action:new Map,goto:new Map};for(let e of this.lexer.nonTerminals)r.goto.set(e,[]);for(let e of this.lexer.terminals)r.action.set(e[0],[]);r.action.set(i,[]);for(let e of n.edges)e.tocken!==i?this.lexer.isTerminal(e.tocken)?r.action.get(e.tocken).push(`S${e.next.id}`):r.goto.get(e.tocken).push(e.next.id):r.action.get(e.tocken).push("acc");for(let t of n.items)if(t.matchPoint===t.derivation.length){let n=[];for(let r of e)if(r.tocken===t.nonTerminal){n=[...r.terminals.values()];break}for(let e of n)r.action.get(e[0]).push(`r(${t.nonTerminal} => ${t.derivation.join(" ")})`)}t.push(r)}return t.sort(((e,t)=>e.id-t.id)),t}get stateGraph(){const e=[],t=n=>{if(e[n.id])return e[n.id];const r={};e[n.id]=r,r.id=n.id,r.items=n.items.map((e=>k(e))),r.edges=[];for(let e of n.edges)r.edges.push({tocken:e.tocken,next:t(e.next)});return r};return t(this.initialStateNode)}},e.Lexer=f,e.checkNeedClearRightRecursion=function(e,t,n){if(!t||!n){const r=d(e);t=r.nonTerminals,n=r.terminals}l.log("[nonTerminals]",t),l.log("[terminals]",n);let r=new f(n,t);const i=new Map;for(let t of e){t=t.replaceAll(/\s/g,"");const e=t.split(/(=>)|(->)/).filter((e=>"=>"!==e&&"->"!==e&&e)),n=e[0],o=e[1].split("|").filter((e=>e)).map((e=>r.splitDerivation(e)));i.set(n,o)}l.log("[nonTerminals2DerivationMap]",i);for(let e=0;e<t.length;e++){const n=i.get(t[e]);for(let r=n.length-1;r>=0;r--){if(n[r][0]===t[e])return!0}}return!1},e.checkNeedliftUpCommonTocken=function(e,t,n){let r=e;if(!t||!n){const r=d(e);t=r.nonTerminals,n=r.terminals}let i=new f(n,t);for(let e of r){e=e.replaceAll(/\s/g,"");const t=e.split(/(=>)|(->)/).filter((e=>"=>"!==e&&"->"!==e&&e))[1].split("|").filter((e=>e)).map((e=>(l.log("[debug]",r),i.splitDerivation(e)))),n=new Map;t.forEach((e=>{let t=n.get(e[0]);t?t.push(e.slice(1)):t=[e.slice(1)],n.set(e[0],t)}));for(let e of n.keys())if(1!==n.get(e)?.length)return!0}return!1},e.checkNeedunionGrammers=function(e){let t=new Map;for(let n of e){n=n.replaceAll(/\s/g,"");const e=n.split(/(=>)|(->)/).filter((e=>"=>"!==e&&"->"!==e&&e)),r=e[0],i=e[1];if(t.has(r))return!0;t.set(r,[i])}return!1},e.clearRightRecursion=function(e,t,n){const i=[];if(!t||!n){const r=d(e);t=r.nonTerminals,n=r.terminals}l.log("[nonTerminals]",t),l.log("[terminals]",n);let o=new f(n,t);const s=new Map;for(let t of e){t=t.replaceAll(/\s/g,"");const e=t.split(/(=>)|(->)/).filter((e=>"=>"!==e&&"->"!==e&&e)),n=e[0],r=e[1].split("|").filter((e=>e)).map((e=>o.splitDerivation(e)));s.set(n,r)}l.log("[nonTerminals2DerivationMap]",s);for(let e=0;e<t.length;e++){const n=s.get(t[e]);for(let r=0;r<e;r++){const e=s.get(t[r]);for(let i=n.length-1;i>=0;i--){const o=n[i];if(o[0]===t[r]){l.log(o,t[r]);for(let t of e)l.log("[-]",t),n?.push([...t,...o.slice(1)]);n?.splice(i,1)}}}const i=[];for(let r=n.length-1;r>=0;r--){n[r][0]===t[e]&&i.push(r)}if(i.length){const l=o.getNewNonTerminal(t[e]),a=[],c=[];for(let e=n.length-1;e>=0;e--)-1===i.indexOf(e)&&a.push([...n[e][0]===r?n[e].slice(1):n[e],l]);for(let e of i)c.push([...n[e].slice(1),l]);c.push([r]),s.set(t[e],[...a,...i.length?[]:n]),s.set(l,c)}l.log("[nonTerminals2DerivationMap in process]",s,n)}for(let e of s.keys()){const t=s.get(e).map((e=>e.join(" "))).join(" | ");i.push(`${e} => ${t}`)}return i},e.getTockFromSimpleGrammers=d,e.liftUpCommonTocken=function(e,t,n){let r=e;if(!t||!n){const r=d(e);t=r.nonTerminals,n=r.terminals}let i=new f(n,t);for(;;){let e=[];const t=r.map((t=>{const n=(t=t.replaceAll(/\s/g,"")).split(/(=>)|(->)/).filter((e=>"=>"!==e&&"->"!==e&&e)),o=n[0],s=n[1].split("|").filter((e=>e)).map((e=>(l.log("[debug]",r),i.splitDerivation(e)))),a=[],c=new Map;s.forEach((e=>{let t=c.get(e[0]);t?t.push(e.slice(1)):t=[e.slice(1)],c.set(e[0],t)}));for(let t of c.keys()){if(1===c.get(t)?.length){a.push(t+c.get(t)[0].join(""));continue}const n=c.get(t),r=i.getNewNonTerminal(o);a.push(t+r),e.push(r+" => "+n?.map((e=>e.join(" "))).join(" | "))}return o+" => "+a.join(" | ")}));l.log("[pre]",t,e);const n=[...t,...e];if(l.log("[com]",r,n),r.length===n.length)break;r=n}return r},e.unionGrammers=function(e,t,n){let r=new Map;const i=[];if(!t||!n){const r=d(e);t=r.nonTerminals,n=r.terminals}let o=new f(n,t);e.forEach((e=>{const t=(e=e.replaceAll(/\s/g,"")).split(/(=>)|(->)/).filter((e=>"=>"!==e&&"->"!==e&&e)),n=t[0],s=t[1].split("|").filter((e=>e)).map((e=>(l.log("[debug]",i),o.splitDerivation(e))));if(r.has(n)){const e=r.get(n);s.forEach((t=>{const n=t.join(" ");-1===e?.indexOf(n)&&e.push(n)}))}else r.set(n,s.map((e=>e.join(" "))))}));for(let e of r.keys()){const t=[...new Set(r.get(e))];i.push(`${e} => ${t.join("|")}`.split("|").join(" | "))}return l.log(i),i}}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXgudW1kLmpzIiwic291cmNlcyI6WyIuLi9zcmMvdXRpbHMvaW5kZXgudHMiLCIuLi9zcmMvdXRpbHMvY29uc3QudHMiLCIuLi9zcmMvdXRpbHMvbG9nLnRzIiwiLi4vc3JjL2ZpcnN0U2V0LnRzIiwiLi4vc3JjL2ZvbGxvd1NldC50cyIsIi4uL3NyYy9sZXhlci50cyIsIi4uL3NyYy9MTDEvcHJlZGljdFRhYmxlLnRzIiwiLi4vc3JjL3NpbXBsZUdyYW1tZXJIZWxwZXIudHMiLCIuLi9zcmMvTFIwL0xSU3RhdGUudHMiLCIuLi9zcmMvTEwxL3BhcnNlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTGV4ZXIgZnJvbSBcIkAvbGV4ZXJcIjtcclxuaW1wb3J0IHsgR3JhbW1lcnMgfSBmcm9tIFwiQC90eXBlcy90eXBlXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmZXJTdHJpbmcyR3JhbW1lcnMobGV4ZXI6IExleGVyLCBncmFtbWVyczogQXJyYXk8c3RyaW5nPik6IEdyYW1tZXJzIHtcclxuICAgIHJldHVybiBncmFtbWVycy5tYXAoZ3JhbW1lciA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGdyYW1tZXIucmVwbGFjZUFsbCgvXFxzL2csIFwiXCIpO1xyXG4gICAgfSkubWFwKGdyYW1tZXIgPT4ge1xyXG4gICAgICAgIGNvbnN0IGFyciA9IGdyYW1tZXIuc3BsaXQoLyg9Pil8KC0+KS8pLmZpbHRlcih2ID0+IHYgIT09IFwiPT5cIiAmJiB2ICE9PSBcIi0+XCIgJiYgdik7XHJcbiAgICAgICAgY29uc3QgZGVyaXZhdGlvbnMgPSBhcnJbMV0uc3BsaXQoXCJ8XCIpLmZpbHRlcih2ID0+IHYgJiYgdiAhPT0gXCJ8XCIpLm1hcChkZXJpdmF0aW9uID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGxleGVyLnNwbGl0RGVyaXZhdGlvbihkZXJpdmF0aW9uKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5vblRlcm1pbmFsOiBhcnJbMF0sXHJcbiAgICAgICAgICAgIGRlcml2YXRpb25zOiBkZXJpdmF0aW9ucyxcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1NldEluY2x1ZGVzKGE6IFNldDx1bmtub3duPiwgYjogU2V0PHVua25vd24+KTogYm9vbGVhbiB7XHJcbiAgICBmb3IgKGxldCBpdGVtIG9mIGIua2V5cygpKSB7XHJcbiAgICAgICAgaWYgKCFhLmhhcyhpdGVtKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzYWZlUmVnQ2hhcmFjdGVyKGNoYXI6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBzd2l0Y2ggKGNoYXIpIHtcclxuICAgIGNhc2UgXCIrXCI6XHJcbiAgICBjYXNlIFwiKlwiOlxyXG4gICAgY2FzZSBcIihcIjpcclxuICAgIGNhc2UgXCIpXCI6XHJcbiAgICAgICAgcmV0dXJuIGBcXFxcJHtjaGFyfWA7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiBjaGFyO1xyXG4gICAgfVxyXG59IiwiXG5cbmV4cG9ydCBjb25zdCBFbXB0eUNoYXJhY3RlciA9IFwizrVcIjtcbmV4cG9ydCBjb25zdCBFbmRpbmdDaGFyYWN0ZXIgPSBcIiRcIjsiLCIvKlNUQVJULk9OTFlURVNUKi9cclxuaW1wb3J0IGNvbG9ycyBmcm9tIFwiY29sb3JzXCJcclxuLypFTkQuT05MWVRFU1QqL1xyXG5cclxuZW51bSBMb2dMZXZlbCB7XHJcbiAgICBOb3JtYWwsXHJcbiAgICBXYXJubmluZyxcclxuICAgIEVycm9yLFxyXG4gICAgTm9uZVxyXG59XHJcbmludGVyZmFjZSBMb2dDaGFubmVsIHtcclxuICAgIGxvZyguLi5kYXRhOiBhbnlbXSk6IHZvaWQ7XHJcbiAgICB3YXJuKC4uLmRhdGE6IGFueVtdKTogdm9pZDtcclxuICAgIGVycm9yKC4uLmRhdGE6IGFueVtdKTogdm9pZDtcclxuXHJcbn1cclxuXHJcbmNsYXNzIExvZ2dlciB7XHJcbiAgICBwdWJsaWMgbG9nTGV2ZWw6IExvZ0xldmVsO1xyXG4gICAgcHVibGljIGxvZ0NoYW5uZWw6IExvZ0NoYW5uZWw7XHJcbiAgICBjb25zdHJ1Y3Rvcihsb2dMZXZlbDogTG9nTGV2ZWwgPSBMb2dMZXZlbC5Ob3JtYWwsIGxvZ0NoYW5uZWw6IExvZ0NoYW5uZWwgPSBjb25zb2xlKSB7XHJcbiAgICAgICAgdGhpcy5sb2dMZXZlbCA9IGxvZ0xldmVsO1xyXG4gICAgICAgIHRoaXMubG9nQ2hhbm5lbCA9IGxvZ0NoYW5uZWw7XHJcbiAgICB9XHJcbiAgICBsb2coLi4uaW5mbzogYW55W10pIHtcclxuICAgICAgICBpZiAodGhpcy5sb2dMZXZlbCA8PSBMb2dMZXZlbC5Ob3JtYWwpIHtcclxuICAgICAgICAgICAgLypTVEFSVC5PTkxZVEVTVCovXHJcbiAgICAgICAgICAgIGNvbG9ycy5lbmFibGUoKTtcclxuICAgICAgICAgICAgLypFTkQuT05MWVRFU1QqL1xyXG4gICAgICAgICAgICB0aGlzLmxvZ0NoYW5uZWwubG9nKFwiW25vcm1hbF1cIi8qU1RBUlQuT05MWVRFU1QqLy5yYWluYm93LypFTkQuT05MWVRFU1QqLywgLi4uaW5mbyk7XHJcbiAgICAgICAgICAgIC8qU1RBUlQuT05MWVRFU1QqL1xyXG4gICAgICAgICAgICBjb2xvcnMuZGlzYWJsZSgpO1xyXG4gICAgICAgICAgICAvKkVORC5PTkxZVEVTVCovXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgd2FybiguLi5pbmZvOiBhbnlbXSkge1xyXG4gICAgICAgIGlmICh0aGlzLmxvZ0xldmVsIDw9IExvZ0xldmVsLldhcm5uaW5nKSB7XHJcbiAgICAgICAgICAgIC8qU1RBUlQuT05MWVRFU1QqL1xyXG4gICAgICAgICAgICBjb2xvcnMuZW5hYmxlKCk7XHJcbiAgICAgICAgICAgIC8qRU5ELk9OTFlURVNUKi9cclxuICAgICAgICAgICAgdGhpcy5sb2dDaGFubmVsLndhcm4oXCJbd2Fybl1cIi8qU1RBUlQuT05MWVRFU1QqLy55ZWxsb3cvKkVORC5PTkxZVEVTVCovLCAuLi5pbmZvKTtcclxuICAgICAgICAgICAgLypTVEFSVC5PTkxZVEVTVCovXHJcbiAgICAgICAgICAgIGNvbG9ycy5kaXNhYmxlKCk7XHJcbiAgICAgICAgICAgIC8qRU5ELk9OTFlURVNUKi9cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZXJyb3IoLi4uaW5mbzogYW55W10pIHtcclxuICAgICAgICBpZiAodGhpcy5sb2dMZXZlbCA8PSBMb2dMZXZlbC5FcnJvcikge1xyXG4gICAgICAgICAgICAvKlNUQVJULk9OTFlURVNUKi9cclxuICAgICAgICAgICAgY29sb3JzLmVuYWJsZSgpO1xyXG4gICAgICAgICAgICAvKkVORC5PTkxZVEVTVCovXHJcbiAgICAgICAgICAgIHRoaXMubG9nQ2hhbm5lbC5lcnJvcihcIltlcnJvcl1cIi8qU1RBUlQuT05MWVRFU1QqLy5yZWQvKkVORC5PTkxZVEVTVCovLCAuLi5pbmZvKTtcclxuICAgICAgICAgICAgLypTVEFSVC5PTkxZVEVTVCovXHJcbiAgICAgICAgICAgIGNvbG9ycy5kaXNhYmxlKCk7XHJcbiAgICAgICAgICAgIC8qRU5ELk9OTFlURVNUKi9cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBsb2dUbyhsb2dDaGFubmVsOiBMb2dDaGFubmVsKSB7XHJcbiAgICAgICAgdGhpcy5sb2dDaGFubmVsID0gbG9nQ2hhbm5lbDtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgTnVsbExvZ0NoYW5uZWwge1xyXG4gICAgcHVibGljIGxvZyguLi5kYXRhOiBhbnlbXSk6IHZvaWQgeyB9XHJcbiAgICBwdWJsaWMgd2FybiguLi5kYXRhOiBhbnlbXSk6IHZvaWQgeyB9XHJcbiAgICBwdWJsaWMgZXJyb3IoLi4uZGF0YTogYW55W10pOiB2b2lkIHsgfVxyXG59XHJcbmV4cG9ydCBjb25zdCBudWxsTG9nQ2hhbm5lbCA9IG5ldyBOdWxsTG9nQ2hhbm5lbCgpO1xyXG5cclxubGV0IGxvZ0xldmVsX2luaXQgPSBMb2dMZXZlbC5Ob3JtYWxcclxudmFyIF9fZW52X18gPSBcIlwiO1xyXG5zd2l0Y2ggKF9fZW52X18pIHtcclxuY2FzZSBcInByb2RcIjpcclxuICAgIGxvZ0xldmVsX2luaXQgPSBMb2dMZXZlbC5FcnJvclxyXG59XHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBMb2dnZXIobG9nTGV2ZWxfaW5pdClcclxuIiwiaW1wb3J0IExleGVyIGZyb20gXCIuL2xleGVyXCI7XG5pbXBvcnQgeyBHcmFtbWVyU2V0LCBHcmFtbWVyU2V0TGluZSwgTm9uVGVybWluYWwsIFByb2Nlc3MsIFJ1bGUsIFRlcm1pbmFsIH0gZnJvbSBcIi4vdHlwZXMvdHlwZVwiO1xuaW1wb3J0IHsgdHJhbnNmZXJTdHJpbmcyR3JhbW1lcnMgfSBmcm9tIFwiLi91dGlsc1wiXG5pbXBvcnQgeyBFbXB0eUNoYXJhY3RlciB9IGZyb20gXCIuL3V0aWxzL2NvbnN0XCI7XG5pbXBvcnQgbG9nIGZyb20gXCIuL3V0aWxzL2xvZ1wiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZW5lcmF0ZUZpcnN0U2V0KGxleGVyOiBMZXhlciwgaW5HcmFtbWVyczogQXJyYXk8c3RyaW5nPik6IEdyYW1tZXJTZXQge1xuICAgIGxvZy5sb2coXCJbZ2VuZXJhdGVGaXJzdFNldCBzdGFydF1cIik7XG4gICAgY29uc3QgZ3JhbW1lcnMgPSB0cmFuc2ZlclN0cmluZzJHcmFtbWVycyhsZXhlciwgaW5HcmFtbWVycyk7XG4gICAgbG9nLmxvZyhcIltncmFtbWVycyBhZnRlciB0cmFuc2ZlclN0cmluZzJHcmFtbWVyc11cIiwgZ3JhbW1lcnMpO1xuICAgIGNvbnN0IGZpcnN0U2V0OiBHcmFtbWVyU2V0ID0gbmV3IEFycmF5KC4uLmdyYW1tZXJzLm1hcChncmFtbWVyID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvY2tlbjogZ3JhbW1lci5ub25UZXJtaW5hbCxcbiAgICAgICAgICAgIHRlcm1pbmFsczogbmV3IFNldDxUZXJtaW5hbD4oKSxcbiAgICAgICAgfVxuICAgIH0pKTtcbiAgICBjb25zdCBncmFtbWVyTWFwID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZ1tdW10+KCk7XG4gICAgZ3JhbW1lcnMuZm9yRWFjaChncmFtbWVyID0+IHtcbiAgICAgICAgZ3JhbW1lck1hcC5zZXQoZ3JhbW1lci5ub25UZXJtaW5hbCwgZ3JhbW1lci5kZXJpdmF0aW9ucyk7XG4gICAgfSlcbiAgICAvKiBcbiAgICAgICAg5aaC5p6cWOW8j+S4gOS4que7iOe7k+espuWPt++8jOmCo+S5iEZJUlNUKFgpID0gWCBcbiAgICAqL1xuICAgIGZpcnN0U2V0LnB1c2goLi4ubGV4ZXIudGVybWluYWxzLm1hcCh0ZXJtaW5hbCA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b2NrZW46IHRlcm1pbmFsWzBdLFxuICAgICAgICAgICAgdGVybWluYWxzOiBuZXcgU2V0KFt0ZXJtaW5hbFswXV0pLFxuICAgICAgICAgICAgaXNUZXJtaW5hbDogdHJ1ZVxuICAgICAgICB9XG4gICAgfSkpXG4gICAgLyogXG4gICAgICAgIOWmguaenCBYID0+IM61IOaYr+S4gOS4quS6p+eUn+W8j++8jOmCo+S5iOWwhmXliqDkurrliLAgRklSU1TvvIhYKeS4reOAglxuICAgICovXG4gICAgZmlyc3RTZXQuZm9yRWFjaChzZXRMaW5lID0+IHtcbiAgICAgICAgaWYgKHNldExpbmUuaXNUZXJtaW5hbCkgcmV0dXJuO1xuICAgICAgICBmb3IgKGxldCBkZXJpdmF0aW9uIG9mIGdyYW1tZXJNYXAuZ2V0KHNldExpbmUudG9ja2VuKSEpIHtcbiAgICAgICAgICAgIGlmIChkZXJpdmF0aW9uLmxlbmd0aCA9PT0gMSAmJiBkZXJpdmF0aW9uWzBdID09PSBFbXB0eUNoYXJhY3RlciAmJiAhc2V0TGluZS50ZXJtaW5hbHMuaGFzKEVtcHR5Q2hhcmFjdGVyKSkge1xuICAgICAgICAgICAgICAgIHNldExpbmUudGVybWluYWxzLmFkZChFbXB0eUNoYXJhY3Rlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxuICAgIGNvbnN0IGZpcnN0U2V0TWFwID0gbmV3IE1hcDxzdHJpbmcsIEdyYW1tZXJTZXRMaW5lPigpO1xuICAgIGZvciAobGV0IHNldExpbmUgb2YgZmlyc3RTZXQpIHtcbiAgICAgICAgZmlyc3RTZXRNYXAuc2V0KHNldExpbmUudG9ja2VuLCBzZXRMaW5lKTtcbiAgICB9XG4gICAgLy8g5b6q546v5LiL6Z2i5q2l6aqkIOebtOWIsOayoeacieWPmOWMluS4uuatolxuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGxldCBoYXNDaGFuZ2UgPSBmYWxzZTtcbiAgICAgICAgLyogXG4gICAgICAgICAgICBBID0+IEIwQjFCMkIzXG4gICAgICAgICAgICBpID0gMFxuICAgICAgICAgICAgRklSU1QoQmkpIC0gRW1wdHlDaGFyYWN0ZXIg5Yqg5YWl5YiwIEZJUlNUKEEp5LitXG4gICAgICAgICAgICDlpoLmnpxGSVJTVChCMSnkuI3lkKvmnIlFbXB0eUNoYXJhY3RlcumAgOWHuuW+queOr1xuICAgICAgICAgICAgXG4gICAgICAgICAgICDoi6VCMC1CM+Wdh+WQq+aciUVtcHR5Q2hhcmFjdGVyIOWwhkVtcHR5Q2hhcmFjdGVy5Yqg5YWl5YiwRklSU1QoQSnkuK1cbiAgICAgICAgKi9cbiAgICAgICAgZmlyc3RTZXQuZm9yRWFjaChzZXRMaW5lID0+IHtcbiAgICAgICAgICAgIGlmIChzZXRMaW5lLmlzVGVybWluYWwpIHJldHVybjtcbiAgICAgICAgICAgIGZvciAobGV0IGRlcml2YXRpb24gb2YgZ3JhbW1lck1hcC5nZXQoc2V0TGluZS50b2NrZW4pISkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVyaXZhdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2NrZW4gPSBkZXJpdmF0aW9uW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGV4ZXIuaXNUZXJtaW5hbCh0b2NrZW4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNldExpbmUudGVybWluYWxzLmhhcyh0b2NrZW4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmxvZyh0b2NrZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGluZS50ZXJtaW5hbHMuYWRkKHRvY2tlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9ja2VuICE9PSBFbXB0eUNoYXJhY3Rlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dFNldExpbmUgPSBmaXJzdFNldE1hcC5nZXQodG9ja2VuKSE7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0U2V0TGluZS50ZXJtaW5hbHMuZm9yRWFjaCh0ZXJtaW5hbCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlcm1pbmFsICE9PSBFbXB0eUNoYXJhY3Rlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNldExpbmUudGVybWluYWxzLmhhcyh0ZXJtaW5hbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRMaW5lLnRlcm1pbmFscy5hZGQodGVybWluYWwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmV4dFNldExpbmUudGVybWluYWxzLmhhcyhFbXB0eUNoYXJhY3RlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gZGVyaXZhdGlvbi5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRMaW5lLnRlcm1pbmFscy5hZGQoRW1wdHlDaGFyYWN0ZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBpZiAoIWhhc0NoYW5nZSkgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBmaXJzdFNldC5maWx0ZXIodiA9PiAhdi5pc1Rlcm1pbmFsKS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGlmIChhLnRvY2tlbiA8IGIudG9ja2VuKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgIH0pLm1hcChzZXRMaW5lID0+IHtcbiAgICAgICAgc2V0TGluZS50ZXJtaW5hbHMgPSBuZXcgU2V0KEFycmF5LmZyb20oc2V0TGluZS50ZXJtaW5hbHMpLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGlmIChhIDwgYikge1xuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKVxuICAgICAgICByZXR1cm4gc2V0TGluZTtcbiAgICB9KTtcbn1cblxuXG5cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERlcml2YXRpb25GaXJzdFNldChsZXhlcjogTGV4ZXIsIGRlcml2YXRpb246IHN0cmluZ1tdLCBmaXJzdFNldE1hcDogTWFwPE5vblRlcm1pbmFsLCBHcmFtbWVyU2V0TGluZT4pOiBHcmFtbWVyU2V0TGluZSB7XG4gICAgY29uc3QgdGVybWluYWxzID0gbmV3IFNldDxUZXJtaW5hbD4oKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRlcml2YXRpb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgdG9ja2VuID0gZGVyaXZhdGlvbltpXTtcbiAgICAgICAgaWYgKGxleGVyLmlzVGVybWluYWwodG9ja2VuKSkge1xuICAgICAgICAgICAgaWYgKHRvY2tlbiAhPT0gRW1wdHlDaGFyYWN0ZXIpIHtcbiAgICAgICAgICAgICAgICB0ZXJtaW5hbHMuYWRkKHRvY2tlbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmaXJzdFNldE1hcC5nZXQodG9ja2VuKT8udGVybWluYWxzLmZvckVhY2godGVybWluYWwgPT4ge1xuICAgICAgICAgICAgICAgIHRlcm1pbmFscy5hZGQodGVybWluYWwpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGlmICghZmlyc3RTZXRNYXAuZ2V0KHRvY2tlbikhLnRlcm1pbmFscy5oYXMoRW1wdHlDaGFyYWN0ZXIpKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkgPT09IGRlcml2YXRpb24ubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgdGVybWluYWxzLmFkZChFbXB0eUNoYXJhY3Rlcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdG9ja2VuOiBkZXJpdmF0aW9uLmpvaW4oXCJcIiksXG4gICAgICAgIHRlcm1pbmFscyxcbiAgICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiogZ2VuZXJhdGVGaXJzdFNldFByb2dyZXNzaXZlKGxleGVyOiBMZXhlciwgaW5HcmFtbWVyczogQXJyYXk8c3RyaW5nPik6IEl0ZXJhYmxlSXRlcmF0b3I8UnVsZSB8IFByb2Nlc3M8R3JhbW1lclNldD4+IHtcbiAgICB5aWVsZCBbXG4gICAgICAgIFwiMS4g5aaC5p6cWOW8j+S4gOS4que7iOe7k+espuWPt++8jOmCo+S5iEZJUlNUKFgpID0gWCBcIixcbiAgICAgICAgXCIyLiDlpoLmnpwgWCA9PiDOtSDmmK/kuIDkuKrkuqfnlJ/lvI/vvIzpgqPkuYjlsIZl5Yqg5Lq65YiwIEZJUlNU77yIWCnkuK3jgIJcIixcbiAgICAgICAgYDMuIEEgPT4gQjBCMUIyQjNcbiAgICAgICAgICAgIGkgPSAwXG4gICAgICAgICAgICBGSVJTVChCaSkgLSBFbXB0eUNoYXJhY3RlciDliqDlhaXliLAgRklSU1QoQSnkuK1cbiAgICAgICAgICAgIOWmguaenEZJUlNUKEIxKeS4jeWQq+aciUVtcHR5Q2hhcmFjdGVy6YCA5Ye65b6q546vXG4gICAgICAgICAgICDoi6VCMCAtIEIz5Z2H5ZCr5pyJRW1wdHlDaGFyYWN0ZXIg5bCGRW1wdHlDaGFyYWN0ZXLliqDlhaXliLBGSVJTVChBKeS4rVxuICAgICAgICBgLFxuICAgICAgICBcIjQuIOWOu+mZpOaJgOaciee7iOe7k+espuWPt+eahOihqOmhuVwiLFxuICAgIF1cbiAgICBsb2cubG9nKFwiW2dlbmVyYXRlRmlyc3RTZXQgc3RhcnRdXCIpO1xuICAgIGNvbnN0IGdyYW1tZXJzID0gdHJhbnNmZXJTdHJpbmcyR3JhbW1lcnMobGV4ZXIsIGluR3JhbW1lcnMpO1xuICAgIGxvZy5sb2coXCJbZ3JhbW1lcnMgYWZ0ZXIgdHJhbnNmZXJTdHJpbmcyR3JhbW1lcnNdXCIsIGdyYW1tZXJzKTtcbiAgICBjb25zdCBmaXJzdFNldDogR3JhbW1lclNldCA9IG5ldyBBcnJheSguLi5ncmFtbWVycy5tYXAoZ3JhbW1lciA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b2NrZW46IGdyYW1tZXIubm9uVGVybWluYWwsXG4gICAgICAgICAgICB0ZXJtaW5hbHM6IG5ldyBTZXQ8VGVybWluYWw+KCksXG4gICAgICAgIH1cbiAgICB9KSk7XG4gICAgY29uc3QgZ3JhbW1lck1hcCA9IG5ldyBNYXA8c3RyaW5nLCBzdHJpbmdbXVtdPigpO1xuICAgIGdyYW1tZXJzLmZvckVhY2goZ3JhbW1lciA9PiB7XG4gICAgICAgIGdyYW1tZXJNYXAuc2V0KGdyYW1tZXIubm9uVGVybWluYWwsIGdyYW1tZXIuZGVyaXZhdGlvbnMpO1xuICAgIH0pXG4gICAgLyogXG4gICAgICAgIOWmguaenFjlvI/kuIDkuKrnu4jnu5PnrKblj7fvvIzpgqPkuYhGSVJTVChYKSA9IFggXG4gICAgKi9cbiAgICBmaXJzdFNldC5wdXNoKC4uLmxleGVyLnRlcm1pbmFscy5tYXAodGVybWluYWwgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG9ja2VuOiB0ZXJtaW5hbFswXSxcbiAgICAgICAgICAgIHRlcm1pbmFsczogbmV3IFNldChbdGVybWluYWxbMF1dKSxcbiAgICAgICAgICAgIGlzVGVybWluYWw6IHRydWVcbiAgICAgICAgfVxuICAgIH0pKVxuICAgIHlpZWxkIHtcbiAgICAgICAgcnVsZUluZGV4OiAwLFxuICAgICAgICByZXN1bHQ6IGZpcnN0U2V0XG4gICAgfTtcbiAgICAvKiBcbiAgICAgICAg5aaC5p6cIFggPT4gzrUg5piv5LiA5Liq5Lqn55Sf5byP77yM6YKj5LmI5bCGZeWKoOS6uuWIsCBGSVJTVO+8iFgp5Lit44CCXG4gICAgKi9cbiAgICBmaXJzdFNldC5mb3JFYWNoKHNldExpbmUgPT4ge1xuICAgICAgICBpZiAoc2V0TGluZS5pc1Rlcm1pbmFsKSByZXR1cm47XG4gICAgICAgIGZvciAobGV0IGRlcml2YXRpb24gb2YgZ3JhbW1lck1hcC5nZXQoc2V0TGluZS50b2NrZW4pISkge1xuICAgICAgICAgICAgaWYgKGRlcml2YXRpb24ubGVuZ3RoID09PSAxICYmIGRlcml2YXRpb25bMF0gPT09IEVtcHR5Q2hhcmFjdGVyICYmICFzZXRMaW5lLnRlcm1pbmFscy5oYXMoRW1wdHlDaGFyYWN0ZXIpKSB7XG4gICAgICAgICAgICAgICAgc2V0TGluZS50ZXJtaW5hbHMuYWRkKEVtcHR5Q2hhcmFjdGVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pXG4gICAgeWllbGQge1xuICAgICAgICBydWxlSW5kZXg6IDEsXG4gICAgICAgIHJlc3VsdDogZmlyc3RTZXRcbiAgICB9O1xuICAgIGNvbnN0IGZpcnN0U2V0TWFwID0gbmV3IE1hcDxzdHJpbmcsIEdyYW1tZXJTZXRMaW5lPigpO1xuICAgIGZvciAobGV0IHNldExpbmUgb2YgZmlyc3RTZXQpIHtcbiAgICAgICAgZmlyc3RTZXRNYXAuc2V0KHNldExpbmUudG9ja2VuLCBzZXRMaW5lKTtcbiAgICB9XG4gICAgLy8g5b6q546v5LiL6Z2i5q2l6aqkIOebtOWIsOayoeacieWPmOWMluS4uuatolxuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGxldCBoYXNDaGFuZ2UgPSBmYWxzZTtcbiAgICAgICAgLyogXG4gICAgICAgICAgICBBID0+IEIwQjFCMkIzXG4gICAgICAgICAgICBpID0gMFxuICAgICAgICAgICAgRklSU1QoQmkpIC0gRW1wdHlDaGFyYWN0ZXIg5Yqg5YWl5YiwIEZJUlNUKEEp5LitXG4gICAgICAgICAgICDlpoLmnpxGSVJTVChCMSnkuI3lkKvmnIlFbXB0eUNoYXJhY3RlcumAgOWHuuW+queOr1xuICAgICAgICAgICAgXG4gICAgICAgICAgICDoi6VCMC1CM+Wdh+WQq+aciUVtcHR5Q2hhcmFjdGVyIOWwhkVtcHR5Q2hhcmFjdGVy5Yqg5YWl5YiwRklSU1QoQSnkuK1cbiAgICAgICAgKi9cbiAgICAgICAgZmlyc3RTZXQuZm9yRWFjaChzZXRMaW5lID0+IHtcbiAgICAgICAgICAgIGlmIChzZXRMaW5lLmlzVGVybWluYWwpIHJldHVybjtcbiAgICAgICAgICAgIGZvciAobGV0IGRlcml2YXRpb24gb2YgZ3JhbW1lck1hcC5nZXQoc2V0TGluZS50b2NrZW4pISkge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGVyaXZhdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2NrZW4gPSBkZXJpdmF0aW9uW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGV4ZXIuaXNUZXJtaW5hbCh0b2NrZW4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNldExpbmUudGVybWluYWxzLmhhcyh0b2NrZW4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nLmxvZyh0b2NrZW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGluZS50ZXJtaW5hbHMuYWRkKHRvY2tlbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodG9ja2VuICE9PSBFbXB0eUNoYXJhY3Rlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dFNldExpbmUgPSBmaXJzdFNldE1hcC5nZXQodG9ja2VuKSE7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0U2V0TGluZS50ZXJtaW5hbHMuZm9yRWFjaCh0ZXJtaW5hbCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlcm1pbmFsICE9PSBFbXB0eUNoYXJhY3Rlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNldExpbmUudGVybWluYWxzLmhhcyh0ZXJtaW5hbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRMaW5lLnRlcm1pbmFscy5hZGQodGVybWluYWwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbmV4dFNldExpbmUudGVybWluYWxzLmhhcyhFbXB0eUNoYXJhY3RlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gZGVyaXZhdGlvbi5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRMaW5lLnRlcm1pbmFscy5hZGQoRW1wdHlDaGFyYWN0ZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBpZiAoIWhhc0NoYW5nZSkgYnJlYWs7XG4gICAgICAgIHlpZWxkIHtcbiAgICAgICAgICAgIHJ1bGVJbmRleDogMixcbiAgICAgICAgICAgIHJlc3VsdDogZmlyc3RTZXRcbiAgICAgICAgfTtcbiAgICB9XG4gICAgeWllbGQge1xuICAgICAgICBydWxlSW5kZXg6IDMsXG4gICAgICAgIHJlc3VsdDogZmlyc3RTZXQuZmlsdGVyKHYgPT4gIXYuaXNUZXJtaW5hbCkuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgaWYgKGEudG9ja2VuIDwgYi50b2NrZW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5tYXAoc2V0TGluZSA9PiB7XG4gICAgICAgICAgICBzZXRMaW5lLnRlcm1pbmFscyA9IG5ldyBTZXQoQXJyYXkuZnJvbShzZXRMaW5lLnRlcm1pbmFscykuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChhIDwgYikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICByZXR1cm4gc2V0TGluZTtcbiAgICAgICAgfSlcbiAgICB9XG59IiwiaW1wb3J0IGdlbmVyYXRlRmlyc3RTZXQgZnJvbSBcIi4vZmlyc3RTZXRcIjtcbmltcG9ydCBMZXhlciBmcm9tIFwiLi9sZXhlclwiO1xuaW1wb3J0IHsgR3JhbW1lclNldCwgR3JhbW1lclNldExpbmUsIFByb2Nlc3MsIFJ1bGUsIFRlcm1pbmFsIH0gZnJvbSBcIi4vdHlwZXMvdHlwZVwiO1xuaW1wb3J0IHsgdHJhbnNmZXJTdHJpbmcyR3JhbW1lcnMgfSBmcm9tIFwiLi91dGlsc1wiO1xuaW1wb3J0IHsgRW1wdHlDaGFyYWN0ZXIsIEVuZGluZ0NoYXJhY3RlciB9IGZyb20gXCIuL3V0aWxzL2NvbnN0XCI7XG5pbXBvcnQgbG9nIGZyb20gXCIuL3V0aWxzL2xvZ1wiO1xuXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdlbmVyYXRlRmxsb3dTZXQobGV4ZXI6IExleGVyLCBpbkdyYW1tZXJzOiBBcnJheTxzdHJpbmc+LCBmaXJzdFNldD86IEdyYW1tZXJTZXQpOiBHcmFtbWVyU2V0IHtcbiAgICBsb2cubG9nKFwiW2dlbmVyYXRlRmxsb3dTZXQgc3RhcnRdXCIpO1xuICAgIGlmICghZmlyc3RTZXQpIHtcbiAgICAgICAgZmlyc3RTZXQgPSBnZW5lcmF0ZUZpcnN0U2V0KGxleGVyLCBpbkdyYW1tZXJzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBmaXJzdFNldCA9IEFycmF5LmZyb20oZmlyc3RTZXQpO1xuICAgIH1cbiAgICBjb25zdCBncmFtbWVycyA9IHRyYW5zZmVyU3RyaW5nMkdyYW1tZXJzKGxleGVyLCBpbkdyYW1tZXJzKTtcbiAgICBsb2cubG9nKFwiW2dyYW1tZXJzIGFmdGVyIHRyYW5zZmVyU3RyaW5nMkdyYW1tZXJzXVwiLCBncmFtbWVycyk7XG4gICAgLypcbiAgICAgICAgMS4g5bCGJOaUvuWIsEZPTExPVyhTKeS4rVxuICAgICovXG4gICAgY29uc3QgZm9sbG93U2V0OiBHcmFtbWVyU2V0ID0gbmV3IEFycmF5KC4uLmdyYW1tZXJzLm1hcChncmFtbWVyID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvY2tlbjogZ3JhbW1lci5ub25UZXJtaW5hbCxcbiAgICAgICAgICAgIHRlcm1pbmFsczogbmV3IFNldDxUZXJtaW5hbD4oW0VuZGluZ0NoYXJhY3Rlcl0pLFxuICAgICAgICB9XG4gICAgfSkpO1xuICAgIGNvbnN0IGdyYW1tZXJNYXAgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nW11bXT4oKTtcbiAgICBncmFtbWVycy5mb3JFYWNoKGdyYW1tZXIgPT4ge1xuICAgICAgICBncmFtbWVyTWFwLnNldChncmFtbWVyLm5vblRlcm1pbmFsLCBncmFtbWVyLmRlcml2YXRpb25zKTtcbiAgICB9KVxuICAgIGZvbGxvd1NldC5wdXNoKC4uLmxleGVyLnRlcm1pbmFscy5tYXAodGVybWluYWwgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG9ja2VuOiB0ZXJtaW5hbFswXSxcbiAgICAgICAgICAgIHRlcm1pbmFsczogbmV3IFNldChbRW5kaW5nQ2hhcmFjdGVyXSksXG4gICAgICAgICAgICBpc1Rlcm1pbmFsOiB0cnVlXG4gICAgICAgIH1cbiAgICB9KSlcblxuICAgIGNvbnN0IGZvbGxvd1NldE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBHcmFtbWVyU2V0TGluZT4oKTtcbiAgICBmb3IgKGxldCBzZXRMaW5lIG9mIGZvbGxvd1NldCkge1xuICAgICAgICBmb2xsb3dTZXRNYXAuc2V0KHNldExpbmUudG9ja2VuLCBzZXRMaW5lKTtcbiAgICB9XG5cbiAgICBmaXJzdFNldC5wdXNoKC4uLmxleGVyLnRlcm1pbmFscy5tYXAodGVybWluYWwgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG9ja2VuOiB0ZXJtaW5hbFswXSxcbiAgICAgICAgICAgIHRlcm1pbmFsczogbmV3IFNldChbdGVybWluYWxbMF1dKSxcbiAgICAgICAgICAgIGlzVGVybWluYWw6IHRydWVcbiAgICAgICAgfVxuICAgIH0pKVxuICAgIGNvbnN0IGZpcnN0U2V0TWFwID0gbmV3IE1hcDxzdHJpbmcsIEdyYW1tZXJTZXRMaW5lPigpO1xuICAgIGZvciAobGV0IHNldExpbmUgb2YgZmlyc3RTZXQpIHtcbiAgICAgICAgZmlyc3RTZXRNYXAuc2V0KHNldExpbmUudG9ja2VuLCBzZXRMaW5lKTtcbiAgICB9XG4gICAgLy8g5b6q546v5LiL6Z2i5q2l6aqkIOebtOWIsOayoeacieWPmOWMluS4uuatolxuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGxldCBoYXNDaGFuZ2UgPSBmYWxzZTtcbiAgICAgICAgLyogXG4gICAgICAgICAgICAyLuWmguaenOWtmOWcqOS4gOS4quS6p+eUn+W8j0EgPT4gYUJiIO+8jCDpgqPkuYhGSVJTVChiKSDkuK3pmaTOtSDkuYvlpJbnmoTmiYDmnInnrKblj7fpg73lnKhGT0xMT1coQinkuK3jgIJcbiAgICAgICAgICAgIGF0dGVudGlvbjogQSA9PiBhQkNkIOmCo+S5iOaKimZpcnN0KENkKeWKoOWFpeWIsEZvbGxvdyhCKeS4reWOu1xuICAgICAgICAqL1xuICAgICAgICBncmFtbWVycy5mb3JFYWNoKGdyYW1tZXIgPT4ge1xuICAgICAgICAgICAgZm9yIChsZXQgZGVyaXZhdGlvbiBvZiBncmFtbWVyLmRlcml2YXRpb25zKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IGRlcml2YXRpb24ubGVuZ3RoIC0gMjsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2V0TGluZSA9IGZvbGxvd1NldE1hcC5nZXQoZGVyaXZhdGlvbltpXSk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSBpICsgMTsgaiA8IGRlcml2YXRpb24ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRlcm1pbmFscyA9IGZpcnN0U2V0TWFwLmdldChkZXJpdmF0aW9uW2pdKSEudGVybWluYWxzO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdGVybWluYWwgb2YgdGVybWluYWxzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlcm1pbmFsID09PSBFbXB0eUNoYXJhY3RlcikgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldExpbmU/LnRlcm1pbmFscy5oYXModGVybWluYWwpKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNDaGFuZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldExpbmU/LnRlcm1pbmFscy5hZGQodGVybWluYWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0ZXJtaW5hbHMuaGFzKEVtcHR5Q2hhcmFjdGVyKSkgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcblxuICAgICAgICAvKlxuICAgICAgICAgICAgMy7lpoLmnpzlrZjlnKjkuIDkuKrkuqfnlJ/lvI8gQSA9PiBhQiDvvIwg5oiW5a2Y5Zyo5Lqn55Sf5byPIEEgPT4gYUJiIOS4lEZJUlNUKGIpIOWMheWQqyDOtSDvvIzpgqPkuYhGT0xMT1coQSnkuK3nmoTmiYDmnInnrKblj7fpg73lnKhGT0xMT1coQinkuK3jgIJcbiAgICAgICAgKi9cbiAgICAgICAgZ3JhbW1lcnMuZm9yRWFjaChncmFtbWVyID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBTZXRMaW5lID0gZm9sbG93U2V0TWFwLmdldChncmFtbWVyLm5vblRlcm1pbmFsKTtcbiAgICAgICAgICAgIGZvciAobGV0IGRlcml2YXRpb24gb2YgZ3JhbW1lci5kZXJpdmF0aW9ucykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBkZXJpdmF0aW9uLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvY2tlbiA9IGRlcml2YXRpb25baV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNldExpbmUgPSBmb2xsb3dTZXRNYXAuZ2V0KHRvY2tlbik7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHRlcm1pbmFsIG9mIHBTZXRMaW5lIS50ZXJtaW5hbHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXJtaW5hbCA9PT0gRW1wdHlDaGFyYWN0ZXIpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldExpbmU/LnRlcm1pbmFscy5oYXModGVybWluYWwpKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0NoYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRMaW5lPy50ZXJtaW5hbHMuYWRkKHRlcm1pbmFsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpcnN0U2V0TWFwLmdldCh0b2NrZW4pIS50ZXJtaW5hbHMuaGFzKEVtcHR5Q2hhcmFjdGVyKSkgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBpZiAoIWhhc0NoYW5nZSkgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBmb2xsb3dTZXQuZmlsdGVyKHYgPT4gIXYuaXNUZXJtaW5hbCkuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBpZiAoYS50b2NrZW4gPCBiLnRvY2tlbikge1xuICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH1cbiAgICB9KS5tYXAoc2V0TGluZSA9PiB7XG4gICAgICAgIHNldExpbmUudGVybWluYWxzID0gbmV3IFNldChBcnJheS5mcm9tKHNldExpbmUudGVybWluYWxzKS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICBpZiAoYSA8IGIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSlcbiAgICAgICAgcmV0dXJuIHNldExpbmU7XG4gICAgfSk7XG59XG5cblxuXG5leHBvcnQgZnVuY3Rpb24qIGdlbmVyYXRlRmxsb3dTZXRQcm9ncmVzc2l2ZShsZXhlcjogTGV4ZXIsIGluR3JhbW1lcnM6IEFycmF5PHN0cmluZz4sIGZpcnN0U2V0PzogR3JhbW1lclNldCk6IEl0ZXJhYmxlSXRlcmF0b3I8UnVsZSB8IFByb2Nlc3M8R3JhbW1lclNldD4+IHtcbiAgICB5aWVsZCBbXG4gICAgICAgIFwiMS4g5bCGJOaUvuWIsEZPTExPVyhTKeS4rVwiLFxuICAgICAgICBcIjIuIOWmguaenOWtmOWcqOS4gOS4quS6p+eUn+W8j0EgPT4gYUJiIO+8jCDpgqPkuYhGSVJTVChiKSDkuK3pmaTOtSDkuYvlpJbnmoTmiYDmnInnrKblj7fpg73lnKhGT0xMT1coQinkuK3jgIJhdHRlbnRpb246IEEgPT4gYUJDZCDpgqPkuYjmiopmaXJzdChDZCnliqDlhaXliLBGb2xsb3coQinkuK3ljrtcIixcbiAgICAgICAgXCIzLuWmguaenOWtmOWcqOS4gOS4quS6p+eUn+W8jyBBID0+IGFCIO+8jCDmiJblrZjlnKjkuqfnlJ/lvI8gQSA9PiBhQmIg5LiURklSU1QoYikg5YyF5ZCrIM61IO+8jOmCo+S5iEZPTExPVyhBKeS4reeahOaJgOacieespuWPt+mDveWcqEZPTExPVyhCKeS4reOAglwiLFxuICAgICAgICBcIjQuIOWOu+mZpOaJgOaciee7iOe7k+espuWPt+eahOihqOmhuVwiLFxuICAgIF1cbiAgICBsb2cubG9nKFwiW2dlbmVyYXRlRmxsb3dTZXQgc3RhcnRdXCIpO1xuICAgIGlmICghZmlyc3RTZXQpIHtcbiAgICAgICAgZmlyc3RTZXQgPSBnZW5lcmF0ZUZpcnN0U2V0KGxleGVyLCBpbkdyYW1tZXJzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBmaXJzdFNldCA9IEFycmF5LmZyb20oZmlyc3RTZXQpO1xuICAgIH1cbiAgICBjb25zdCBncmFtbWVycyA9IHRyYW5zZmVyU3RyaW5nMkdyYW1tZXJzKGxleGVyLCBpbkdyYW1tZXJzKTtcbiAgICBsb2cubG9nKFwiW2dyYW1tZXJzIGFmdGVyIHRyYW5zZmVyU3RyaW5nMkdyYW1tZXJzXVwiLCBncmFtbWVycyk7XG4gICAgLypcbiAgICAgICAgMS4g5bCGJOaUvuWIsEZPTExPVyhTKeS4rVxuICAgICovXG4gICAgY29uc3QgZm9sbG93U2V0OiBHcmFtbWVyU2V0ID0gbmV3IEFycmF5KC4uLmdyYW1tZXJzLm1hcChncmFtbWVyID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvY2tlbjogZ3JhbW1lci5ub25UZXJtaW5hbCxcbiAgICAgICAgICAgIHRlcm1pbmFsczogbmV3IFNldDxUZXJtaW5hbD4oW0VuZGluZ0NoYXJhY3Rlcl0pLFxuICAgICAgICB9XG4gICAgfSkpO1xuICAgIGNvbnN0IGdyYW1tZXJNYXAgPSBuZXcgTWFwPHN0cmluZywgc3RyaW5nW11bXT4oKTtcbiAgICBncmFtbWVycy5mb3JFYWNoKGdyYW1tZXIgPT4ge1xuICAgICAgICBncmFtbWVyTWFwLnNldChncmFtbWVyLm5vblRlcm1pbmFsLCBncmFtbWVyLmRlcml2YXRpb25zKTtcbiAgICB9KVxuICAgIGZvbGxvd1NldC5wdXNoKC4uLmxleGVyLnRlcm1pbmFscy5tYXAodGVybWluYWwgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdG9ja2VuOiB0ZXJtaW5hbFswXSxcbiAgICAgICAgICAgIHRlcm1pbmFsczogbmV3IFNldChbRW5kaW5nQ2hhcmFjdGVyXSksXG4gICAgICAgICAgICBpc1Rlcm1pbmFsOiB0cnVlXG4gICAgICAgIH1cbiAgICB9KSlcbiAgICB5aWVsZCB7XG4gICAgICAgIHJ1bGVJbmRleDogMCxcbiAgICAgICAgcmVzdWx0OiBmb2xsb3dTZXRcbiAgICB9XG5cbiAgICBjb25zdCBmb2xsb3dTZXRNYXAgPSBuZXcgTWFwPHN0cmluZywgR3JhbW1lclNldExpbmU+KCk7XG4gICAgZm9yIChsZXQgc2V0TGluZSBvZiBmb2xsb3dTZXQpIHtcbiAgICAgICAgZm9sbG93U2V0TWFwLnNldChzZXRMaW5lLnRvY2tlbiwgc2V0TGluZSk7XG4gICAgfVxuXG4gICAgZmlyc3RTZXQucHVzaCguLi5sZXhlci50ZXJtaW5hbHMubWFwKHRlcm1pbmFsID0+IHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRvY2tlbjogdGVybWluYWxbMF0sXG4gICAgICAgICAgICB0ZXJtaW5hbHM6IG5ldyBTZXQoW3Rlcm1pbmFsWzBdXSksXG4gICAgICAgICAgICBpc1Rlcm1pbmFsOiB0cnVlXG4gICAgICAgIH1cbiAgICB9KSlcbiAgICBjb25zdCBmaXJzdFNldE1hcCA9IG5ldyBNYXA8c3RyaW5nLCBHcmFtbWVyU2V0TGluZT4oKTtcbiAgICBmb3IgKGxldCBzZXRMaW5lIG9mIGZpcnN0U2V0KSB7XG4gICAgICAgIGZpcnN0U2V0TWFwLnNldChzZXRMaW5lLnRvY2tlbiwgc2V0TGluZSk7XG4gICAgfVxuICAgIC8vIOW+queOr+S4i+mdouatpemqpCDnm7TliLDmsqHmnInlj5jljJbkuLrmraJcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBsZXQgaGFzQ2hhbmdlID0gZmFsc2U7XG4gICAgICAgIC8qIFxuICAgICAgICAgICAgMi7lpoLmnpzlrZjlnKjkuIDkuKrkuqfnlJ/lvI9BID0+IGFCYiDvvIwg6YKj5LmIRklSU1QoYikg5Lit6ZmkzrUg5LmL5aSW55qE5omA5pyJ56ym5Y+36YO95ZyoRk9MTE9XKEIp5Lit44CCXG4gICAgICAgICAgICBhdHRlbnRpb246IEEgPT4gYUJDZCDpgqPkuYjmiopmaXJzdChDZCnliqDlhaXliLBGb2xsb3coQinkuK3ljrtcbiAgICAgICAgKi9cbiAgICAgICAgZ3JhbW1lcnMuZm9yRWFjaChncmFtbWVyID0+IHtcbiAgICAgICAgICAgIGZvciAobGV0IGRlcml2YXRpb24gb2YgZ3JhbW1lci5kZXJpdmF0aW9ucykge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBkZXJpdmF0aW9uLmxlbmd0aCAtIDI7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNldExpbmUgPSBmb2xsb3dTZXRNYXAuZ2V0KGRlcml2YXRpb25baV0pO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCBkZXJpdmF0aW9uLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXJtaW5hbHMgPSBmaXJzdFNldE1hcC5nZXQoZGVyaXZhdGlvbltqXSkhLnRlcm1pbmFscztcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IHRlcm1pbmFsIG9mIHRlcm1pbmFscykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXJtaW5hbCA9PT0gRW1wdHlDaGFyYWN0ZXIpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXRMaW5lPy50ZXJtaW5hbHMuaGFzKHRlcm1pbmFsKSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFzQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRMaW5lPy50ZXJtaW5hbHMuYWRkKHRlcm1pbmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGVybWluYWxzLmhhcyhFbXB0eUNoYXJhY3RlcikpIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGlmIChoYXNDaGFuZ2UpIHtcbiAgICAgICAgICAgIHlpZWxkIHtcbiAgICAgICAgICAgICAgICBydWxlSW5kZXg6IDEsXG4gICAgICAgICAgICAgICAgcmVzdWx0OiBmb2xsb3dTZXRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGhhc0NoYW5nZSA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLypcbiAgICAgICAgICAgIDMu5aaC5p6c5a2Y5Zyo5LiA5Liq5Lqn55Sf5byPIEEgPT4gYUIg77yMIOaIluWtmOWcqOS6p+eUn+W8jyBBID0+IGFCYiDkuJRGSVJTVChiKSDljIXlkKsgzrUg77yM6YKj5LmIRk9MTE9XKEEp5Lit55qE5omA5pyJ56ym5Y+36YO95ZyoRk9MTE9XKEIp5Lit44CCXG4gICAgICAgICovXG4gICAgICAgIGdyYW1tZXJzLmZvckVhY2goZ3JhbW1lciA9PiB7XG4gICAgICAgICAgICBjb25zdCBwU2V0TGluZSA9IGZvbGxvd1NldE1hcC5nZXQoZ3JhbW1lci5ub25UZXJtaW5hbCk7XG4gICAgICAgICAgICBmb3IgKGxldCBkZXJpdmF0aW9uIG9mIGdyYW1tZXIuZGVyaXZhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gZGVyaXZhdGlvbi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0b2NrZW4gPSBkZXJpdmF0aW9uW2ldO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXRMaW5lID0gZm9sbG93U2V0TWFwLmdldCh0b2NrZW4pO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB0ZXJtaW5hbCBvZiBwU2V0TGluZSEudGVybWluYWxzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVybWluYWwgPT09IEVtcHR5Q2hhcmFjdGVyKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXRMaW5lPy50ZXJtaW5hbHMuaGFzKHRlcm1pbmFsKSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYXNDaGFuZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0TGluZT8udGVybWluYWxzLmFkZCh0ZXJtaW5hbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdFNldE1hcC5nZXQodG9ja2VuKSEudGVybWluYWxzLmhhcyhFbXB0eUNoYXJhY3RlcikpIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgaWYgKGhhc0NoYW5nZSkge1xuICAgICAgICAgICAgeWllbGQge1xuICAgICAgICAgICAgICAgIHJ1bGVJbmRleDogMixcbiAgICAgICAgICAgICAgICByZXN1bHQ6IGZvbGxvd1NldFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghaGFzQ2hhbmdlKSBicmVhaztcbiAgICB9XG4gICAgeWllbGQge1xuICAgICAgICBydWxlSW5kZXg6IDMsXG4gICAgICAgIHJlc3VsdDogZm9sbG93U2V0LmZpbHRlcih2ID0+ICF2LmlzVGVybWluYWwpLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIGlmIChhLnRvY2tlbiA8IGIudG9ja2VuKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkubWFwKHNldExpbmUgPT4ge1xuICAgICAgICAgICAgc2V0TGluZS50ZXJtaW5hbHMgPSBuZXcgU2V0KEFycmF5LmZyb20oc2V0TGluZS50ZXJtaW5hbHMpLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYSA8IGIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgcmV0dXJuIHNldExpbmU7XG4gICAgICAgIH0pXG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTm9uVGVybWluYWwsIFRlcm1pbmFsLCBUb2NrZW4gfSBmcm9tIFwiLi90eXBlcy90eXBlXCI7XG5pbXBvcnQgeyBzYWZlUmVnQ2hhcmFjdGVyIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IEVtcHR5Q2hhcmFjdGVyLCBFbmRpbmdDaGFyYWN0ZXIgfSBmcm9tIFwiLi91dGlscy9jb25zdFwiO1xuaW1wb3J0IGxvZyBmcm9tIFwiLi91dGlscy9sb2dcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGV4ZXIge1xuICAgIHB1YmxpYyBub25UZXJtaW5hbHM6IEFycmF5PHN0cmluZz47XG4gICAgcHVibGljIHRlcm1pbmFsczogQXJyYXk8W3N0cmluZywgUmVnRXhwXT47XG4gICAgY3VycmVudExpbmU6IG51bWJlciA9IDA7XG4gICAgY3VycmVudENvbHVtbjogbnVtYmVyID0gMDtcbiAgICBzb3VyY2U6IHN0cmluZyA9IFwiXCI7XG4gICAgY29uc3RydWN0b3IodGVybWluYWxzOiBBcnJheTxbc3RyaW5nLCBSZWdFeHBdPiwgbm9uVGVybWluYWxzOiBBcnJheTxzdHJpbmc+KSB7XG4gICAgLy8g6L6T5YWl5omA5pyJ55qE57uI57uT56ym5Y+36ZuG5ZCIXG4gICAgICAgIHRoaXMubm9uVGVybWluYWxzID0gWy4uLm5vblRlcm1pbmFsc107XG4gICAgICAgIHRoaXMudGVybWluYWxzID0gWy4uLnRlcm1pbmFsc107XG4gICAgfVxuICAgIHB1YmxpYyBzZXRTb3VyY2Uoc291cmNlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICAgIHRoaXMuY3VycmVudExpbmUgPSAwO1xuICAgICAgICB0aGlzLmN1cnJlbnRDb2x1bW4gPSAwO1xuICAgIH1cbiAgICBwdWJsaWMgcmVtYWluU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zbGljZSh0aGlzLmN1cnJlbnRDb2x1bW4pO1xuICAgIH1cbiAgICBwdWJsaWMgbmV4dCgpOiBUb2NrZW4ge1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50Q29sdW1uID49IHRoaXMuc291cmNlLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0b2NrZW46IEVuZGluZ0NoYXJhY3RlcixcbiAgICAgICAgICAgICAgICBvcmlnaW46IEVuZGluZ0NoYXJhY3RlclxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCB0ZXJtaW5hbCBvZiB0aGlzLnRlcm1pbmFscykge1xuICAgICAgICAgICAgY29uc3QgbWF0Y2hSZXN1bHQgPSB0aGlzLnNvdXJjZS5zbGljZSh0aGlzLmN1cnJlbnRDb2x1bW4pLm1hdGNoKHRlcm1pbmFsWzFdKTtcbiAgICAgICAgICAgIGlmIChtYXRjaFJlc3VsdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHRvY2tlbjogdGVybWluYWxbMF0sXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbjogbWF0Y2hSZXN1bHRbMF1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBbbGV4ZXIgbmV4dF06IG1hdGNoIG5leHQgVGVybWluYWwgZXJyb3IgXFxuIHNvdXJlY0lucHV0OiAke3RoaXMuc291cmNlfVxcbiByZW1haW5TdHJpbmc6ICR7dGhpcy5zb3VyY2Uuc2xpY2UodGhpcy5jdXJyZW50Q29sdW1uKX1gKTtcbiAgICB9XG4gICAgcHVibGljIHBvcCgpOiBUb2NrZW4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdG9ja2VuOiBUb2NrZW4gPSB0aGlzLm5leHQoKTtcbiAgICAgICAgICAgIGlmICh0b2NrZW4udG9ja2VuICE9PSBFbmRpbmdDaGFyYWN0ZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRDb2x1bW4gKz0gdG9ja2VuLm9yaWdpbi5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdG9ja2VuO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBuZXh0Tm90RW1wdHlUZXJtaW5hbCgpOiBUb2NrZW4ge1xuICAgICAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAgICAgY29uc3QgdG9ja2VuID0gdGhpcy5uZXh0KCk7XG4gICAgICAgICAgICBpZiAodG9ja2VuLnRvY2tlbiAhPT0gXCJ3aGl0ZVNwYWNlXCIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9ja2VuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jdXJyZW50Q29sdW1uICs9IHRvY2tlbi5vcmlnaW4ubGVuZ3RoO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBuZXh0Tm90RW1wdHkoc3RlcDogbnVtYmVyKTogVG9ja2VuIHtcbiAgICAgICAgY29uc3QgYmFjayA9IHRoaXMuY3VycmVudENvbHVtbjtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdGVwIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnBvcE5vdEVtcHR5VGVybWluYWwoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB0b2NrZW4gPSB0aGlzLm5leHROb3RFbXB0eVRlcm1pbmFsKCk7XG4gICAgICAgIHRoaXMuY3VycmVudENvbHVtbiA9IGJhY2s7XG4gICAgICAgIHJldHVybiB0b2NrZW47XG4gICAgfVxuICAgIHB1YmxpYyBwb3BOb3RFbXB0eVRlcm1pbmFsKCk6IFRvY2tlbiB7XG4gICAgICAgIGNvbnN0IHRvY2tlbiA9IHRoaXMubmV4dE5vdEVtcHR5VGVybWluYWwoKTtcbiAgICAgICAgaWYgKHRvY2tlbi50b2NrZW4gIT09IEVuZGluZ0NoYXJhY3Rlcikge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50Q29sdW1uICs9IHRvY2tlbi5vcmlnaW4ubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b2NrZW47XG4gICAgfVxuICAgIHB1YmxpYyBpc1Rlcm1pbmFsKHN0cjogc3RyaW5nKSB7XG4gICAgICAgIGxldCBpc1Rlcm1pbmFsID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5ub25UZXJtaW5hbHMuc29tZSh2ID0+IHtcbiAgICAgICAgICAgIGlmICh2ID09PSBzdHIpIHtcbiAgICAgICAgICAgICAgICBpc1Rlcm1pbmFsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBpc1Rlcm1pbmFsO1xuICAgIH1cbiAgICAvLyDliIflibLmjqjlr7zlvI9cbiAgICBwdWJsaWMgc3BsaXREZXJpdmF0aW9uKHN0cjogc3RyaW5nKTogQXJyYXk8Tm9uVGVybWluYWwgfCBUZXJtaW5hbD4ge1xuICAgICAgICBjb25zdCB0ZXJtaW5hbHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGxldCBjb3VudFRpbWUgPSAwO1xuICAgICAgICBjb25zdCBNQVhfRVhDVVRFID0gNTAwMDA7XG4gICAgICAgIGNvbnN0IGluU3RyID0gc3RyO1xuICAgICAgICB3aGlsZSAoc3RyLmxlbmd0aCkge1xuICAgICAgICAgICAgZm9yIChsZXQgbm9uVGVybWluYWwgb2YgdGhpcy5ub25UZXJtaW5hbHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXRjaFJlc3VsdCA9IHN0ci5tYXRjaChuZXcgUmVnRXhwKFwiXlwiICsgbm9uVGVybWluYWwpKVxuICAgICAgICAgICAgICAgIGlmIChtYXRjaFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICB0ZXJtaW5hbHMucHVzaChub25UZXJtaW5hbCk7XG4gICAgICAgICAgICAgICAgICAgIHN0ciA9IHN0ci5zbGljZShtYXRjaFJlc3VsdFswXS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGxldCB0ZXJtaW5hbCBvZiB0aGlzLnRlcm1pbmFscykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoUmVzdWx0ID0gc3RyLm1hdGNoKG5ldyBSZWdFeHAoXCJeXCIgKyBzYWZlUmVnQ2hhcmFjdGVyKHRlcm1pbmFsWzBdKSkpXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRlcm1pbmFscy5wdXNoKHRlcm1pbmFsWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgc3RyID0gc3RyLnNsaWNlKG1hdGNoUmVzdWx0WzBdLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvdW50VGltZSsrO1xuICAgICAgICAgICAgaWYgKGNvdW50VGltZSA+IE1BWF9FWENVVEUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFtzcGxpdERlcml2YXRpb25dIGVycm9yOiBleGN1dGUgb3ZlciBNQVhfRVhDVVRFIHN0cjogJHtpblN0cn0gIHJlbWFpbmluZyBzdHI6ICR7c3RyfSBgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGVybWluYWxzO1xuICAgIH1cbiAgICAvKlxuICAgIOeUn+aIkOaPkOWFrOWboOWtkCDku6Xlj4og5raI6Zmk5bem6YCS5b2S5L2/55So55qE6Z2e57uI57uT56ymXG4gICovXG4gICAgcHVibGljIGdldE5ld05vblRlcm1pbmFsKG5vblRlcm1pbmFsOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBsZXQgdG1wID0gbm9uVGVybWluYWw7XG4gICAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgICAgICB0bXAgKz0gXCInXCI7XG4gICAgICAgICAgICBpZiAodGhpcy5ub25UZXJtaW5hbHMuaW5kZXhPZih0bXApID09PSAtMSkge1xuICAgICAgICAgICAgICAgIHRoaXMubm9uVGVybWluYWxzLnVuc2hpZnQodG1wKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG1wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCB7IGdldERlcml2YXRpb25GaXJzdFNldCB9IGZyb20gXCJAL2ZpcnN0U2V0XCI7XHJcbmltcG9ydCBMZXhlciBmcm9tIFwiQC9sZXhlclwiO1xyXG5pbXBvcnQgeyBBc3ROb2RlLCBHcmFtbWVyLCBHcmFtbWVyU2V0LCBHcmFtbWVyU2V0TGluZSwgTm9uVGVybWluYWwsIFByZWRpY3RMaW5lLCBQcmVkaWN0UHJvY2Vzc0xpbmUsIFByZWRpY3RUYWJsZSwgUHJvY2VzcywgUnVsZSwgVGVybWluYWwgfSBmcm9tIFwiQC90eXBlcy90eXBlXCI7XHJcbmltcG9ydCB7IHRyYW5zZmVyU3RyaW5nMkdyYW1tZXJzIH0gZnJvbSBcIkAvdXRpbHNcIjtcclxuaW1wb3J0IHsgRW1wdHlDaGFyYWN0ZXIsIEVuZGluZ0NoYXJhY3RlciB9IGZyb20gXCJAL3V0aWxzL2NvbnN0XCI7XHJcbmltcG9ydCBsb2cgZnJvbSBcIkAvdXRpbHMvbG9nXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZW5lcmF0b3JQcmVkaWN0VGFibGUoXHJcbiAgICBsZXhlcjogTGV4ZXIsXHJcbiAgICBpbkdyYW1tZXJzOiBBcnJheTxzdHJpbmc+LFxyXG4gICAgZmlyc3RTZXQ6IEdyYW1tZXJTZXQsXHJcbiAgICBmb2xsb3dTZXQ6IEdyYW1tZXJTZXQsXHJcbik6IFByZWRpY3RUYWJsZSB7XHJcbiAgICAvKlxyXG4gICAg5a+56K+t5rOV5Lit55qE5q+P5p2h5Lqn55Sf5byP77yaIEEgLT4gdSDvvJpcclxuICAgICAgKDEp5a+5IEZpcnN0KHUpIOS4reeahOaJgOaciee7iOe7k+espiBhIO+8iOS4jeWQqyDOtSDvvInvvIznva4gTVtBLCBhXSA9IOKAnEEgLT4gdeKAnSDvvJtcclxuICAgICAgKDIp6IulIEZpcnN0KHUpIOWQqyDOtSDvvIzliJnlr7kgRm9sbG93KEEpIOS4reeahOaJgOacieespuWPtyBhIO+8iOWPr+WQqyAkIO+8ie+8jOe9riBNW0EsIGFdID0g4oCcQSAtPiB14oCdIFxyXG4gICovXHJcbiAgICBjb25zdCBncmFtbWVycyA9IHRyYW5zZmVyU3RyaW5nMkdyYW1tZXJzKGxleGVyLCBpbkdyYW1tZXJzKTtcclxuICAgIGNvbnN0IHByZWRpY3RUYWJsZTogUHJlZGljdFRhYmxlID0gW107XHJcbiAgICBjb25zdCBub25UZXJtaW5hbDJUYWJsZVJvd01hcCA9IG5ldyBNYXA8Tm9uVGVybWluYWwsIFByZWRpY3RMaW5lPigpO1xyXG4gICAgbGV4ZXIubm9uVGVybWluYWxzLmZvckVhY2gobm9uVGVybWluYWwgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRhYmxlTGluZSA9IHtcclxuICAgICAgICAgICAgbm9uVGVybWluYWw6IG5vblRlcm1pbmFsLFxyXG4gICAgICAgICAgICB0ZXJtaW5hbDJEZXJpdmF0aW9uOiBuZXcgTWFwPFRlcm1pbmFsLCBHcmFtbWVyPigpLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbm9uVGVybWluYWwyVGFibGVSb3dNYXAuc2V0KG5vblRlcm1pbmFsLCB0YWJsZUxpbmUpO1xyXG4gICAgICAgIHByZWRpY3RUYWJsZS5wdXNoKHRhYmxlTGluZSk7XHJcbiAgICB9KVxyXG4gICAgY29uc3Qgbm9uVGVybWluYWwyRmlyc3RTZXRNYXAgPSBuZXcgTWFwPE5vblRlcm1pbmFsLCBHcmFtbWVyU2V0TGluZT4oKTtcclxuICAgIGNvbnN0IG5vblRlcm1pbmFsMkZvbGxvd1NldExpbmUgPSBuZXcgTWFwPE5vblRlcm1pbmFsLCBHcmFtbWVyU2V0TGluZT4oKTtcclxuICAgIGZvciAobGV0IHNldExpbmUgb2YgZm9sbG93U2V0KSB7XHJcbiAgICAgICAgbm9uVGVybWluYWwyRm9sbG93U2V0TGluZS5zZXQoc2V0TGluZS50b2NrZW4sIHNldExpbmUpO1xyXG4gICAgfVxyXG4gICAgZm9yIChsZXQgc2V0TGluZSBvZiBmaXJzdFNldCkge1xyXG4gICAgICAgIG5vblRlcm1pbmFsMkZpcnN0U2V0TWFwLnNldChzZXRMaW5lLnRvY2tlbiwgc2V0TGluZSk7XHJcbiAgICB9XHJcbiAgICBncmFtbWVycy5mb3JFYWNoKGdyYW1tZXIgPT4ge1xyXG4gICAgICAgIGZvciAobGV0IGRlcml2YXRpb24gb2YgZ3JhbW1lci5kZXJpdmF0aW9ucykge1xyXG4gICAgICAgICAgICBjb25zdCBkZXJpdmF0aW9uRmlyc3RTZXQgPSBnZXREZXJpdmF0aW9uRmlyc3RTZXQobGV4ZXIsIGRlcml2YXRpb24sIG5vblRlcm1pbmFsMkZpcnN0U2V0TWFwKTtcclxuICAgICAgICAgICAgY29uc3QgdGFibGVMaW5lID0gbm9uVGVybWluYWwyVGFibGVSb3dNYXAuZ2V0KGdyYW1tZXIubm9uVGVybWluYWwpO1xyXG4gICAgICAgICAgICBsb2cubG9nKGRlcml2YXRpb25GaXJzdFNldCk7XHJcbiAgICAgICAgICAgIC8vICgxKeWvuSBGaXJzdCh1KSDkuK3nmoTmiYDmnInnu4jnu5PnrKYgYSDvvIjkuI3lkKsgzrUg77yJ77yM572uIE1bQSwgYV0gPSDigJxBIC0+IHXigJ0g77ybXHJcbiAgICAgICAgICAgIGxldCBoYXNTZXQ6IE1hcDxzdHJpbmcsYm9vbGVhbj4gPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IHRlcm1pbmFsIG9mIGRlcml2YXRpb25GaXJzdFNldC50ZXJtaW5hbHMpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0ZXJtaW5hbCA9PT0gRW1wdHlDaGFyYWN0ZXIpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNlbGxHcmFtbWVyOiBHcmFtbWVyIHwgdW5kZWZpbmVkID0gdGFibGVMaW5lPy50ZXJtaW5hbDJEZXJpdmF0aW9uLmdldCh0ZXJtaW5hbCk7XHJcbiAgICAgICAgICAgICAgICBoYXNTZXQuc2V0KHRlcm1pbmFsLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjZWxsR3JhbW1lcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNlbGxHcmFtbWVyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub25UZXJtaW5hbDogZ3JhbW1lci5ub25UZXJtaW5hbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVyaXZhdGlvbnM6IFtdXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB0YWJsZUxpbmU/LnRlcm1pbmFsMkRlcml2YXRpb24uc2V0KHRlcm1pbmFsLCBjZWxsR3JhbW1lcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjZWxsR3JhbW1lci5kZXJpdmF0aW9ucy5wdXNoKGRlcml2YXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICgyKeiLpSBGaXJzdCh1KSDlkKsgzrUg77yM5YiZ5a+5IEZvbGxvdyhBKSDkuK3nmoTmiYDmnInnrKblj7cgYSDvvIjlj6/lkKsgJCDvvInvvIznva4gTVtBLCBhXSA9IOKAnEEgLT4gdeKAnSBcclxuICAgICAgICAgICAgaWYgKGRlcml2YXRpb25GaXJzdFNldC50ZXJtaW5hbHMuaGFzKEVtcHR5Q2hhcmFjdGVyKSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgdGVybWluYWwgb2Ygbm9uVGVybWluYWwyRm9sbG93U2V0TGluZS5nZXQoZ3JhbW1lci5ub25UZXJtaW5hbCkhLnRlcm1pbmFscykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGhhc1NldC5oYXModGVybWluYWwpKWNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjZWxsR3JhbW1lcjogR3JhbW1lciB8IHVuZGVmaW5lZCA9IHRhYmxlTGluZT8udGVybWluYWwyRGVyaXZhdGlvbi5nZXQodGVybWluYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghY2VsbEdyYW1tZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2VsbEdyYW1tZXIgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub25UZXJtaW5hbDogZ3JhbW1lci5ub25UZXJtaW5hbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlcml2YXRpb25zOiBbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUxpbmU/LnRlcm1pbmFsMkRlcml2YXRpb24uc2V0KHRlcm1pbmFsLCBjZWxsR3JhbW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNlbGxHcmFtbWVyLmRlcml2YXRpb25zLnB1c2goZGVyaXZhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIHByZWRpY3RUYWJsZTtcclxufVxyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja1ByZWRpY2tUYWJsZUlzVmFsaWQobGV4ZXI6IExleGVyLCB0YWJsZTogUHJlZGljdFRhYmxlKTogYm9vbGVhbiB7XHJcbiAgICAvLyDmr4/kuIBDZWxs5pyA5aSa5Y+q6IO95pyJ5LiA5Liq5o6o5a+85byPIFxyXG4gICAgZm9yIChsZXQgdGVybWluYWwgb2YgbGV4ZXIudGVybWluYWxzKSB7XHJcbiAgICAgICAgY29uc3QgdG9ja2VuID0gdGVybWluYWxbMF07XHJcbiAgICAgICAgdGFibGUuZm9yRWFjaCh0YWJsZUxpbmUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0MmQgPSB0YWJsZUxpbmUudGVybWluYWwyRGVyaXZhdGlvbi5nZXQodG9ja2VuKTtcclxuICAgICAgICAgICAgaWYgKHQyZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHQyZC5kZXJpdmF0aW9ucy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcHJlZGljdChsZXhlcjogTGV4ZXIsIHRhYmxlOiBQcmVkaWN0VGFibGUsIF9pbnB1dDogc3RyaW5nLCBwYXJzZVN0YXJ0Tm9uVGVybWluYWw6IE5vblRlcm1pbmFsKTogQXJyYXk8UHJlZGljdFByb2Nlc3NMaW5lPiB7XHJcbiAgICBsZXQgaW5wdXQgPSBfaW5wdXQucmVwbGFjZUFsbCgvXFxzL2csIFwiXCIpO1xyXG4gICAgY29uc3QgcHJlZGljdFByb2Nlc3M6IEFycmF5PFByZWRpY3RQcm9jZXNzTGluZT4gPSBbXTtcclxuICAgIGxldCBhc3RJZHggPSAxO1xyXG4gICAgY29uc3QgYXN0Tm9kZTogQXN0Tm9kZSA9IHtcclxuICAgICAgICBpZDogMCxcclxuICAgICAgICB0ZXh0OiBwYXJzZVN0YXJ0Tm9uVGVybWluYWwsXHJcbiAgICAgICAgY2hlY2s6IGZhbHNlLFxyXG4gICAgfTtcclxuICAgIGNvbnN0IGFzdFN0YWNrID0gW2FzdE5vZGVdO1xyXG4gICAgbGV0IGN1cnJlbnRTdGF0ZTogUHJlZGljdFByb2Nlc3NMaW5lID0ge1xyXG4gICAgICAgIHBhcnNlU3RhY2s6IFtFbmRpbmdDaGFyYWN0ZXIsIHBhcnNlU3RhcnROb25UZXJtaW5hbF0sXHJcbiAgICAgICAgcmVtYWluaW5nSW5wdXQ6IF9pbnB1dCxcclxuICAgICAgICBwYXJzZUFjdGlvbjogXCJcIixcclxuICAgIH1cclxuICAgIGxleGVyLnNldFNvdXJjZShpbnB1dCk7XHJcbiAgICBjb25zdCBub25UZXJtaW5hbDJUYWJsZVJvd01hcCA9IG5ldyBNYXA8Tm9uVGVybWluYWwsIFByZWRpY3RMaW5lPigpO1xyXG4gICAgdGFibGUuZm9yRWFjaCh0YWJsZUxpbmUgPT4ge1xyXG4gICAgICAgIG5vblRlcm1pbmFsMlRhYmxlUm93TWFwLnNldCh0YWJsZUxpbmUubm9uVGVybWluYWwsIHRhYmxlTGluZSk7XHJcbiAgICB9KVxyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICAvLyDlj5blh7rmoIjpobblhYPntKBcclxuICAgICAgICAgICAgY29uc3QgdG9ja2VuID0gY3VycmVudFN0YXRlLnBhcnNlU3RhY2tbY3VycmVudFN0YXRlLnBhcnNlU3RhY2subGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgIGlmIChsZXhlci5pc1Rlcm1pbmFsKHRvY2tlbikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRlcm1pbmFsID0gbGV4ZXIubmV4dCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRvY2tlbiA9PT0gdGVybWluYWwudG9ja2VuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbWF0Y2ggc3VjY2Vzc1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZS5wYXJzZUFjdGlvbiA9IGBtYXRjaCAke3Rlcm1pbmFsLnRvY2tlbn0gJHt0ZXJtaW5hbC5vcmlnaW59YFxyXG4gICAgICAgICAgICAgICAgICAgIHByZWRpY3RQcm9jZXNzLnB1c2goY3VycmVudFN0YXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGN1cnJlbnRTdGF0ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxleGVyLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZS5wYXJzZUFjdGlvbiA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlLnJlbWFpbmluZ0lucHV0ID0gbGV4ZXIucmVtYWluU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlLnBhcnNlU3RhY2sucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZS5wYXJzZVN0YWNrLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYXN0Tm9kZSA9IGFzdFN0YWNrLnBvcCgpITtcclxuICAgICAgICAgICAgICAgICAgICBpZighYXN0Tm9kZS5jaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3ROb2RlLmNoaWxkcmVuID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGFzdE5vZGUuY2hpbGRyZW4ucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBhc3RJZHgrKyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogdGVybWluYWwub3JpZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVjazogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBbcHJlZGljdCBlcnJvcl0gdGVybWluYWwgbWF0Y2ggZXJyb3IgdG9ja2VuOiAke3RvY2tlbn0gc3RhY2s6ICR7Y3VycmVudFN0YXRlLnBhcnNlU3RhY2t9IHJlbWFpbmluZ0lucHV0OiAke2xleGVyLnJlbWFpblN0cmluZygpfWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAgICAgY29uc3QgdGVybWluYWwgPSBsZXhlci5uZXh0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRhYmxlTGluZTogUHJlZGljdExpbmUgPSBub25UZXJtaW5hbDJUYWJsZVJvd01hcC5nZXQodG9ja2VuKSE7XHJcbiAgICAgICAgICAgIGNvbnN0IGdyYW1tZXI6IEdyYW1tZXIgPSB0YWJsZUxpbmUhLnRlcm1pbmFsMkRlcml2YXRpb24uZ2V0KHRlcm1pbmFsLnRvY2tlbik7XHJcbiAgICAgICAgICAgIGlmIChncmFtbWVyPy5kZXJpdmF0aW9ucz8ubGVuZ3RoICE9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFtwcmVkaWN0IGVycm9yXSBwYXJzZSBpbnB1dCBmYWlsIFxcbiB0ZXJtaW5hbDogJHt0ZXJtaW5hbH0gXFxuICByZW1haW5pbmdJbnB1dDogJHtsZXhlci5yZW1haW5TdHJpbmcoKX0gXFxuIGdyYW1tZXI6ICR7Z3JhbW1lcn0gYCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3VycmVudFN0YXRlLnBhcnNlQWN0aW9uID0gYFByZWRpY3QgJHtncmFtbWVyLm5vblRlcm1pbmFsfSA9PiAke2dyYW1tZXIuZGVyaXZhdGlvbnNbMF0uam9pbihcIiBcIil9YDtcclxuICAgICAgICAgICAgbG9nLmxvZyhcIltwcmVkaWN0IFN0YXRlXVwiLCBjdXJyZW50U3RhdGUpO1xyXG4gICAgICAgICAgICBwcmVkaWN0UHJvY2Vzcy5wdXNoKGN1cnJlbnRTdGF0ZSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY3VycmVudFN0YXRlKSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRTdGF0ZS5wYXJzZVN0YWNrLnBvcCgpO1xyXG4gICAgICAgICAgICBjb25zdCBhc3ROb2RlID0gYXN0U3RhY2sucG9wKCkhO1xyXG4gICAgICAgICAgICBjb25zdCBkZXJpdmF0aW9uID0gZ3JhbW1lci5kZXJpdmF0aW9uc1swXS5maWx0ZXIoY2hhciA9PiBjaGFyICE9PSBFbXB0eUNoYXJhY3Rlcik7XHJcbiAgICAgICAgICAgIGlmKCFhc3ROb2RlLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICBhc3ROb2RlLmNoaWxkcmVuID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZm9yKGxldCB0b2NrZW4gb2YgZGVyaXZhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgYXN0Tm9kZS5jaGlsZHJlbi5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogYXN0SWR4KyssXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogdG9ja2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXN0U3RhY2sucHVzaCguLi5bLi4uYXN0Tm9kZS5jaGlsZHJlbl0ucmV2ZXJzZSgpKTtcclxuICAgICAgICAgICAgY3VycmVudFN0YXRlLnBhcnNlU3RhY2sucHVzaCguLi5kZXJpdmF0aW9uLnJldmVyc2UoKSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRTdGF0ZS5wYXJzZUFjdGlvbiA9IFwiXCI7XHJcbiAgICAgICAgICAgIGN1cnJlbnRTdGF0ZS5yZW1haW5pbmdJbnB1dCA9IGxleGVyLnJlbWFpblN0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH0gY2F0Y2goZTogYW55KSB7XHJcbiAgICAgICAgY3VycmVudFN0YXRlLnBhcnNlQWN0aW9uID0gZS50b1N0cmluZygpO1xyXG4gICAgICAgIHByZWRpY3RQcm9jZXNzLnB1c2goY3VycmVudFN0YXRlKTtcclxuICAgIH1cclxuICAgIChwcmVkaWN0UHJvY2VzcyBhcyBhbnkpLmFzdE5vZGUgPSBhc3ROb2RlXHJcbiAgICByZXR1cm4gcHJlZGljdFByb2Nlc3M7XHJcbn1cclxuXHJcblxyXG5leHBvcnQgZnVuY3Rpb24qIGdlbmVyYXRlUHJlZGljdFRhYmxlUHJvZ3Jlc3NpdmUoXHJcbiAgICBsZXhlcjogTGV4ZXIsXHJcbiAgICBpbkdyYW1tZXJzOiBBcnJheTxzdHJpbmc+LFxyXG4gICAgZmlyc3RTZXQ6IEdyYW1tZXJTZXQsXHJcbiAgICBmb2xsb3dTZXQ6IEdyYW1tZXJTZXQsXHJcbik6IEl0ZXJhYmxlSXRlcmF0b3I8UnVsZSB8IFByb2Nlc3M8UHJlZGljdFRhYmxlPj4ge1xyXG4gICAgLypcclxuICAgIOWvueivreazleS4reeahOavj+adoeS6p+eUn+W8j++8miBBIC0+IHUg77yaXHJcbiAgICAgICgxKeWvuSBGaXJzdCh1KSDkuK3nmoTmiYDmnInnu4jnu5PnrKYgYSDvvIjkuI3lkKsgzrUg77yJ77yM572uIE1bQSwgYV0gPSBBIC0+IHVcclxuICAgICAgKDIp6IulIEZpcnN0KHUpIOWQqyDOtSDvvIzliJnlr7kgRm9sbG93KEEpIOS4reeahOaJgOacieespuWPtyBhIO+8iOWPr+WQqyAkIO+8ie+8jOe9riBNW0EsIGFdID0gQSAtPiB1XHJcbiAgKi9cclxuICAgIHlpZWxkIFtcclxuICAgICAgICBcIjEuIOWvuSBGaXJzdCh1KSDkuK3nmoTmiYDmnInnu4jnu5PnrKYgYSDvvIjkuI3lkKsgzrUg77yJ77yM572uIE1bQSwgYV0gPSBBIC0+IHVcIixcclxuICAgICAgICBcIjIuIOiLpSBGaXJzdCh1KSDlkKsgzrUg77yM5YiZ5a+5IEZvbGxvdyhBKSDkuK3nmoTmiYDmnInnrKblj7cgYSDvvIjlj6/lkKsgJCDvvInvvIznva4gTVtBLCBhXSA9IEEgLT4gdVwiXHJcbiAgICBdXHJcbiAgICBjb25zdCBncmFtbWVycyA9IHRyYW5zZmVyU3RyaW5nMkdyYW1tZXJzKGxleGVyLCBpbkdyYW1tZXJzKTtcclxuICAgIGNvbnN0IHByZWRpY3RUYWJsZTogUHJlZGljdFRhYmxlID0gW107XHJcbiAgICBjb25zdCBub25UZXJtaW5hbDJUYWJsZVJvd01hcCA9IG5ldyBNYXA8Tm9uVGVybWluYWwsIFByZWRpY3RMaW5lPigpO1xyXG4gICAgbGV4ZXIubm9uVGVybWluYWxzLmZvckVhY2gobm9uVGVybWluYWwgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRhYmxlTGluZSA9IHtcclxuICAgICAgICAgICAgbm9uVGVybWluYWw6IG5vblRlcm1pbmFsLFxyXG4gICAgICAgICAgICB0ZXJtaW5hbDJEZXJpdmF0aW9uOiBuZXcgTWFwPFRlcm1pbmFsLCBHcmFtbWVyPigpLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgbm9uVGVybWluYWwyVGFibGVSb3dNYXAuc2V0KG5vblRlcm1pbmFsLCB0YWJsZUxpbmUpO1xyXG4gICAgICAgIHByZWRpY3RUYWJsZS5wdXNoKHRhYmxlTGluZSk7XHJcbiAgICB9KVxyXG4gICAgY29uc3Qgbm9uVGVybWluYWwyRmlyc3RTZXRNYXAgPSBuZXcgTWFwPE5vblRlcm1pbmFsLCBHcmFtbWVyU2V0TGluZT4oKTtcclxuICAgIGNvbnN0IG5vblRlcm1pbmFsMkZvbGxvd1NldExpbmUgPSBuZXcgTWFwPE5vblRlcm1pbmFsLCBHcmFtbWVyU2V0TGluZT4oKTtcclxuICAgIGZvciAobGV0IHNldExpbmUgb2YgZm9sbG93U2V0KSB7XHJcbiAgICAgICAgbm9uVGVybWluYWwyRm9sbG93U2V0TGluZS5zZXQoc2V0TGluZS50b2NrZW4sIHNldExpbmUpO1xyXG4gICAgfVxyXG4gICAgZm9yIChsZXQgc2V0TGluZSBvZiBmaXJzdFNldCkge1xyXG4gICAgICAgIG5vblRlcm1pbmFsMkZpcnN0U2V0TWFwLnNldChzZXRMaW5lLnRvY2tlbiwgc2V0TGluZSk7XHJcbiAgICB9XHJcbiAgICBmb3IgKGxldCBncmFtbWVyIG9mIGdyYW1tZXJzKSB7XHJcbiAgICAgICAgZm9yIChsZXQgZGVyaXZhdGlvbiBvZiBncmFtbWVyLmRlcml2YXRpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlcml2YXRpb25GaXJzdFNldCA9IGdldERlcml2YXRpb25GaXJzdFNldChsZXhlciwgZGVyaXZhdGlvbiwgbm9uVGVybWluYWwyRmlyc3RTZXRNYXApO1xyXG4gICAgICAgICAgICBjb25zdCB0YWJsZUxpbmUgPSBub25UZXJtaW5hbDJUYWJsZVJvd01hcC5nZXQoZ3JhbW1lci5ub25UZXJtaW5hbCk7XHJcbiAgICAgICAgICAgIGxvZy5sb2coZGVyaXZhdGlvbkZpcnN0U2V0KTtcclxuICAgICAgICAgICAgLy8gKDEp5a+5IEZpcnN0KHUpIOS4reeahOaJgOaciee7iOe7k+espiBhIO+8iOS4jeWQqyDOtSDvvInvvIznva4gTVtBLCBhXSA9IOKAnEEgLT4gdeKAnSDvvJtcclxuICAgICAgICAgICAgZm9yIChsZXQgdGVybWluYWwgb2YgZGVyaXZhdGlvbkZpcnN0U2V0LnRlcm1pbmFscykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRlcm1pbmFsID09PSBFbXB0eUNoYXJhY3RlcikgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2VsbEdyYW1tZXI6IEdyYW1tZXIgfCB1bmRlZmluZWQgPSB0YWJsZUxpbmU/LnRlcm1pbmFsMkRlcml2YXRpb24uZ2V0KHRlcm1pbmFsKTtcclxuICAgICAgICAgICAgICAgIGlmICghY2VsbEdyYW1tZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjZWxsR3JhbW1lciA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9uVGVybWluYWw6IGdyYW1tZXIubm9uVGVybWluYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcml2YXRpb25zOiBbXVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgdGFibGVMaW5lPy50ZXJtaW5hbDJEZXJpdmF0aW9uLnNldCh0ZXJtaW5hbCwgY2VsbEdyYW1tZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2VsbEdyYW1tZXIuZGVyaXZhdGlvbnMucHVzaChkZXJpdmF0aW9uKTtcclxuICAgICAgICAgICAgICAgIHlpZWxkIHtcclxuICAgICAgICAgICAgICAgICAgICBydWxlSW5kZXg6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0OiBwcmVkaWN0VGFibGVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyAoMinoi6UgRmlyc3QodSkg5ZCrIM61IO+8jOWImeWvuSBGb2xsb3coQSkg5Lit55qE5omA5pyJ56ym5Y+3IGEg77yI5Y+v5ZCrICQg77yJ77yM572uIE1bQSwgYV0gPSDigJxBIC0+IHXigJ0gXHJcbiAgICAgICAgICAgIGlmIChkZXJpdmF0aW9uRmlyc3RTZXQudGVybWluYWxzLmhhcyhFbXB0eUNoYXJhY3RlcikpIHtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IHRlcm1pbmFsIG9mIG5vblRlcm1pbmFsMkZvbGxvd1NldExpbmUuZ2V0KGdyYW1tZXIubm9uVGVybWluYWwpIS50ZXJtaW5hbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY2VsbEdyYW1tZXI6IEdyYW1tZXIgfCB1bmRlZmluZWQgPSB0YWJsZUxpbmU/LnRlcm1pbmFsMkRlcml2YXRpb24uZ2V0KHRlcm1pbmFsKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNlbGxHcmFtbWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxHcmFtbWVyID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9uVGVybWluYWw6IGdyYW1tZXIubm9uVGVybWluYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXJpdmF0aW9uczogW11cclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVMaW5lPy50ZXJtaW5hbDJEZXJpdmF0aW9uLnNldCh0ZXJtaW5hbCwgY2VsbEdyYW1tZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjZWxsR3JhbW1lci5kZXJpdmF0aW9ucy5wdXNoKGRlcml2YXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcnVsZUluZGV4OiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQ6IHByZWRpY3RUYWJsZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsImltcG9ydCBMZXhlciBmcm9tIFwiLi9sZXhlclwiO1xuaW1wb3J0IHsgTm9uVGVybWluYWwsIFRlcm1pbmFsIH0gZnJvbSBcIi4vdHlwZXMvdHlwZVwiO1xuaW1wb3J0IHsgRW1wdHlDaGFyYWN0ZXIgfSBmcm9tIFwiLi91dGlscy9jb25zdFwiO1xuaW1wb3J0IGxvZyBmcm9tIFwiLi91dGlscy9sb2dcIjtcblxuLypcbiAgICDlpoLmnpznlKjmiLfovpPlhaXnmoTmmK/kuabkuIrpgqPnp43nroDljZXmlofms5XvvIzor6Xlh73mlbDoh6rliqjor4bliKvlh7rnu4jnu5PnrKblkozpnZ7nu4jnu5PnrKZcbiAgICDpnZ7nu4jnu5PnrKY6IC9eW0EtWl0nKiAvXG4gICAg57uI57uT56ymOiAvW2EtenxcXHUwMzkxLVxcdTAzQzldLyAgKOWwj+WGmeWtl+avjeS7peWPikdyZWVrIFN5bWJvbHMpXG4gICAgZXg6IGh0dHBzOi8vdW5pY29kZS10YWJsZS5jb20vZW4vc2V0cy9ncmVlay1zeW1ib2xzL1xuICAgIOaOqOWvvOespuWPtzogPT4gLT5cbiovXG5jb25zdCBzaW1wbGVOb25UZXJtaW5hbFJlZyA9IC9eW0EtWl0nKi87XG5jb25zdCBzaW1wbGVUZXJtaW5hbFJlZyA9IC9bYS16fFxcdTAzOTEtXFx1MDNDOV0vO1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRvY2tGcm9tU2ltcGxlR3JhbW1lcnMoaW5HcmFtbWVyczogQXJyYXk8c3RyaW5nPik6IHtcbiAgICBub25UZXJtaW5hbHM6IEFycmF5PHN0cmluZz4sXG4gICAgdGVybWluYWxzOiBBcnJheTxbc3RyaW5nLCBSZWdFeHBdPixcbn0ge1xuICAgIGNvbnN0IG5vblRlcm1pbmFsczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XG4gICAgY29uc3QgdGVybWluYWxzOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcbiAgICBpbkdyYW1tZXJzLmZvckVhY2goZ3JhbW1lciA9PiB7XG4gICAgICAgIGNvbnN0IGFyciA9IGdyYW1tZXIucmVwbGFjZUFsbCgvXFxzL2csIFwiXCIpLnNwbGl0KC8oPT4pfCgtPikvKS5maWx0ZXIodiA9PiB2ICE9PSBcIj0+XCIgJiYgdiAhPT0gXCItPlwiICYmIHYpO1xuICAgICAgICBjb25zdCBub25UZXJtaW5hbCA9IGFyclswXTtcbiAgICAgICAgbm9uVGVybWluYWxzLmFkZChub25UZXJtaW5hbCk7XG4gICAgICAgIGFyclsxXS5zcGxpdChcInxcIikuZmlsdGVyKHYgPT4gdiAmJiB2ICE9PSBcInxcIikuZm9yRWFjaChkZXJpdmF0aW9uID0+IHtcbiAgICAgICAgICAgIHdoaWxlIChkZXJpdmF0aW9uLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGxldCBtYXRjaFJlc3VsdCA9IG51bGw7XG4gICAgICAgICAgICAgICAgbWF0Y2hSZXN1bHQgPSBkZXJpdmF0aW9uLm1hdGNoKHNpbXBsZU5vblRlcm1pbmFsUmVnKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9uVGVybWluYWxzLmFkZChtYXRjaFJlc3VsdFswXSk7XG4gICAgICAgICAgICAgICAgICAgIGRlcml2YXRpb24gPSBkZXJpdmF0aW9uLnNsaWNlKG1hdGNoUmVzdWx0WzBdLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtYXRjaFJlc3VsdCA9IGRlcml2YXRpb24ubWF0Y2goc2ltcGxlVGVybWluYWxSZWcpO1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaFJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICB0ZXJtaW5hbHMuYWRkKEpTT04uc3RyaW5naWZ5KFttYXRjaFJlc3VsdFswXSwgXCJeXCIgKyBtYXRjaFJlc3VsdFswXV0pKTtcbiAgICAgICAgICAgICAgICAgICAgZGVyaXZhdGlvbiA9IGRlcml2YXRpb24uc2xpY2UobWF0Y2hSZXN1bHRbMF0ubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgW2dldFRvY2tGcm9tU2ltcGxlR3JhbW1lcnMgZXJyb3JdIGNhbnQgcmVjb2duaXplIHRoZSBjaGFyYWN0ZXIgcmVtYWluaW5nOiAke2Rlcml2YXRpb259YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfSlcbiAgICByZXR1cm4ge1xuICAgICAgICBub25UZXJtaW5hbHM6IEFycmF5LmZyb20obm9uVGVybWluYWxzKS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAvLyDlgZrkuIDkuKrnroDljZXmjpLluo8g6Ziy5q2iQiDlkowgQicg5Yay56qBXG4gICAgICAgICAgICByZXR1cm4gYi5sZW5ndGggLSBhLmxlbmd0aDtcbiAgICAgICAgfSksXG4gICAgICAgIHRlcm1pbmFsczogQXJyYXkuZnJvbSh0ZXJtaW5hbHMpLm1hcChqc29uRGF0YSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ZXJtaW5hbCA9IEpTT04ucGFyc2UoanNvbkRhdGEpO1xuICAgICAgICAgICAgdGVybWluYWxbMV0gPSBuZXcgUmVnRXhwKHRlcm1pbmFsWzFdKTtcbiAgICAgICAgICAgIHJldHVybiB0ZXJtaW5hbDtcbiAgICAgICAgfSlcbiAgICB9XG59XG5cbi8qXG4gICAg5qOA5rWL5paH5rOV5piv5ZCm6ZyA6KaB566A5Y2V5ZCI5bm25Y676YeNXG4qL1xuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrTmVlZHVuaW9uR3JhbW1lcnMoZ3JhbW1lcnM6IEFycmF5PHN0cmluZz4pOiBib29sZWFuIHtcbiAgICBsZXQgdW5pb25NYXAgPSBuZXcgTWFwPHN0cmluZywgQXJyYXk8c3RyaW5nPj4oKTtcbiAgICBmb3IgKGxldCBncmFtbWVyIG9mIGdyYW1tZXJzKSB7XG4gICAgICAgIGdyYW1tZXIgPSBncmFtbWVyLnJlcGxhY2VBbGwoL1xccy9nLCBcIlwiKTtcbiAgICAgICAgY29uc3QgYXJyID0gZ3JhbW1lci5zcGxpdCgvKD0+KXwoLT4pLykuZmlsdGVyKHYgPT4gdiAhPT0gXCI9PlwiICYmIHYgIT09IFwiLT5cIiAmJiB2KTtcbiAgICAgICAgY29uc3Qgbm9uVGVybWluYWwgPSBhcnJbMF07XG4gICAgICAgIGNvbnN0IGRlcml2YXRpb24gPSBhcnJbMV07XG4gICAgICAgIGlmICh1bmlvbk1hcC5oYXMobm9uVGVybWluYWwpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVuaW9uTWFwLnNldChub25UZXJtaW5hbCwgW2Rlcml2YXRpb25dKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG4vKlxuICAgIEEgLT4gYVxuICAgIEEgLT4gY1xuICAgID09PT5cbiAgICBBIC0+IGEgfCBjXG5cbiAgICDlubbkuJTkvJrnroDljZXljrvph41cbiovXG5leHBvcnQgZnVuY3Rpb24gdW5pb25HcmFtbWVycyhncmFtbWVyczogQXJyYXk8c3RyaW5nPiwgbm9uVGVybWluYWxzPzogQXJyYXk8c3RyaW5nPiwgdGVybWluYWxzPzogQXJyYXk8W3N0cmluZywgUmVnRXhwXT4pOiBBcnJheTxzdHJpbmc+IHtcbiAgICBsZXQgdW5pb25NYXAgPSBuZXcgTWFwPHN0cmluZywgQXJyYXk8c3RyaW5nPj4oKTtcbiAgICBjb25zdCByZXN1bHQ6IEFycmF5PHN0cmluZz4gPSBbXTtcbiAgICBpZiAoIW5vblRlcm1pbmFscyB8fCAhdGVybWluYWxzKSB7XG4gICAgICAgIGNvbnN0IHRvY2tlbkFuYVJlcyA9IGdldFRvY2tGcm9tU2ltcGxlR3JhbW1lcnMoZ3JhbW1lcnMpO1xuICAgICAgICBub25UZXJtaW5hbHMgPSB0b2NrZW5BbmFSZXMubm9uVGVybWluYWxzO1xuICAgICAgICB0ZXJtaW5hbHMgPSB0b2NrZW5BbmFSZXMudGVybWluYWxzO1xuICAgIH1cbiAgICBsZXQgbGV4ZXIgPSBuZXcgTGV4ZXIodGVybWluYWxzLCBub25UZXJtaW5hbHMpO1xuICAgIGdyYW1tZXJzLmZvckVhY2goZ3JhbW1lciA9PiB7XG4gICAgICAgIGdyYW1tZXIgPSBncmFtbWVyLnJlcGxhY2VBbGwoL1xccy9nLCBcIlwiKTtcbiAgICAgICAgY29uc3QgYXJyID0gZ3JhbW1lci5zcGxpdCgvKD0+KXwoLT4pLykuZmlsdGVyKHYgPT4gdiAhPT0gXCI9PlwiICYmIHYgIT09IFwiLT5cIiAmJiB2KTtcbiAgICAgICAgY29uc3Qgbm9uVGVybWluYWwgPSBhcnJbMF07XG4gICAgICAgIGNvbnN0IGRlcml2YXRpb25zID0gYXJyWzFdLnNwbGl0KFwifFwiKS5maWx0ZXIodiA9PiB2KS5tYXAoZGVyaXZhdGlvbiA9PiB7XG4gICAgICAgICAgICBsb2cubG9nKFwiW2RlYnVnXVwiLCByZXN1bHQpO1xuICAgICAgICAgICAgcmV0dXJuIGxleGVyLnNwbGl0RGVyaXZhdGlvbihkZXJpdmF0aW9uKTtcbiAgICAgICAgfSlcblxuICAgICAgICBpZiAodW5pb25NYXAuaGFzKG5vblRlcm1pbmFsKSkge1xuICAgICAgICAgICAgY29uc3QgYXJyID0gdW5pb25NYXAuZ2V0KG5vblRlcm1pbmFsKTtcbiAgICAgICAgICAgIGRlcml2YXRpb25zLmZvckVhY2goZGVyaXZhdGlvbj0+e1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlcmkgPSBkZXJpdmF0aW9uLmpvaW4oXCIgXCIpO1xuICAgICAgICAgICAgICAgIGlmKGFycj8uaW5kZXhPZihkZXJpKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2goZGVyaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVuaW9uTWFwLnNldChub25UZXJtaW5hbCwgZGVyaXZhdGlvbnMubWFwKGRlcml2YXRpb249PntcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVyaXZhdGlvbi5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH0pXG4gICAgZm9yIChsZXQgbm9uVGVybWluYWwgb2YgdW5pb25NYXAua2V5cygpKSB7XG4gICAgICAgIGNvbnN0IGRlcml2YXRpb25zID0gWy4uLm5ldyBTZXQodW5pb25NYXAuZ2V0KG5vblRlcm1pbmFsKSEpXTtcbiAgICAgICAgcmVzdWx0LnB1c2goYCR7bm9uVGVybWluYWx9ID0+ICR7ZGVyaXZhdGlvbnMuam9pbihcInxcIil9YC5zcGxpdChcInxcIikuam9pbihcIiB8IFwiKSk7XG4gICAgfVxuICAgIGxvZy5sb2cocmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKlxuICAgIOajgOa1i+aYr+WQpumcgOimgei/m+ihjOaPkOW3puWFrOWFseWboOWtkFxuKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGVja05lZWRsaWZ0VXBDb21tb25Ub2NrZW4oZ3JhbW1lcnM6IEFycmF5PHN0cmluZz4sIG5vblRlcm1pbmFscz86IEFycmF5PHN0cmluZz4sIHRlcm1pbmFscz86IEFycmF5PFtzdHJpbmcsIFJlZ0V4cF0+KTogYm9vbGVhbiB7XG4gICAgbGV0IHJlc3VsdDogQXJyYXk8c3RyaW5nPiA9IGdyYW1tZXJzO1xuICAgIGlmICghbm9uVGVybWluYWxzIHx8ICF0ZXJtaW5hbHMpIHtcbiAgICAgICAgY29uc3QgdG9ja2VuQW5hUmVzID0gZ2V0VG9ja0Zyb21TaW1wbGVHcmFtbWVycyhncmFtbWVycyk7XG4gICAgICAgIG5vblRlcm1pbmFscyA9IHRvY2tlbkFuYVJlcy5ub25UZXJtaW5hbHM7XG4gICAgICAgIHRlcm1pbmFscyA9IHRvY2tlbkFuYVJlcy50ZXJtaW5hbHM7XG4gICAgfVxuICAgIGxldCBsZXhlciA9IG5ldyBMZXhlcih0ZXJtaW5hbHMsIG5vblRlcm1pbmFscyk7XG4gICAgZm9yIChsZXQgZ3JhbW1lciBvZiByZXN1bHQpIHtcbiAgICAgICAgZ3JhbW1lciA9IGdyYW1tZXIucmVwbGFjZUFsbCgvXFxzL2csIFwiXCIpO1xuICAgICAgICBjb25zdCBhcnIgPSBncmFtbWVyLnNwbGl0KC8oPT4pfCgtPikvKS5maWx0ZXIodiA9PiB2ICE9PSBcIj0+XCIgJiYgdiAhPT0gXCItPlwiICYmIHYpO1xuICAgICAgICBjb25zdCBkZXJpdmF0aW9ucyA9IGFyclsxXS5zcGxpdChcInxcIikuZmlsdGVyKHYgPT4gdikubWFwKGRlcml2YXRpb24gPT4ge1xuICAgICAgICAgICAgbG9nLmxvZyhcIltkZWJ1Z11cIiwgcmVzdWx0KTtcbiAgICAgICAgICAgIHJldHVybiBsZXhlci5zcGxpdERlcml2YXRpb24oZGVyaXZhdGlvbik7XG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IGZpcnN0VG9ja2VuMkRlcml2YXRpb25zTWFwID0gbmV3IE1hcDxOb25UZXJtaW5hbCB8IFRlcm1pbmFsLCBzdHJpbmdbXVtdPigpO1xuICAgICAgICBkZXJpdmF0aW9ucy5mb3JFYWNoKGRlcml2YXRpb24gPT4ge1xuICAgICAgICAgICAgbGV0IGFyciA9IGZpcnN0VG9ja2VuMkRlcml2YXRpb25zTWFwLmdldChkZXJpdmF0aW9uWzBdKTtcbiAgICAgICAgICAgIGlmICghYXJyKSB7XG4gICAgICAgICAgICAgICAgYXJyID0gW2Rlcml2YXRpb24uc2xpY2UoMSldO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcnIucHVzaChkZXJpdmF0aW9uLnNsaWNlKDEpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpcnN0VG9ja2VuMkRlcml2YXRpb25zTWFwLnNldChkZXJpdmF0aW9uWzBdLCBhcnIpO1xuICAgICAgICB9KVxuICAgICAgICBmb3IgKGxldCB0b2NrZW4gb2YgZmlyc3RUb2NrZW4yRGVyaXZhdGlvbnNNYXAua2V5cygpKSB7XG4gICAgICAgICAgICBpZiAoZmlyc3RUb2NrZW4yRGVyaXZhdGlvbnNNYXAuZ2V0KHRvY2tlbik/Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGxpZnRVcENvbW1vblRvY2tlbihncmFtbWVyczogQXJyYXk8c3RyaW5nPiwgbm9uVGVybWluYWxzPzogQXJyYXk8c3RyaW5nPiwgdGVybWluYWxzPzogQXJyYXk8W3N0cmluZywgUmVnRXhwXT4pOiBBcnJheTxzdHJpbmc+IHtcbiAgICBsZXQgcmVzdWx0OiBBcnJheTxzdHJpbmc+ID0gZ3JhbW1lcnM7XG4gICAgaWYgKCFub25UZXJtaW5hbHMgfHwgIXRlcm1pbmFscykge1xuICAgICAgICBjb25zdCB0b2NrZW5BbmFSZXMgPSBnZXRUb2NrRnJvbVNpbXBsZUdyYW1tZXJzKGdyYW1tZXJzKTtcbiAgICAgICAgbm9uVGVybWluYWxzID0gdG9ja2VuQW5hUmVzLm5vblRlcm1pbmFscztcbiAgICAgICAgdGVybWluYWxzID0gdG9ja2VuQW5hUmVzLnRlcm1pbmFscztcbiAgICB9XG4gICAgbGV0IGxleGVyID0gbmV3IExleGVyKHRlcm1pbmFscywgbm9uVGVybWluYWxzKTtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBsZXQgbmV3QWRkR3JhbW1lcnM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGNvbnN0IHRtcFJlc3VsdCA9IHJlc3VsdC5tYXAoZ3JhbW1lciA9PiB7XG4gICAgICAgICAgICBncmFtbWVyID0gZ3JhbW1lci5yZXBsYWNlQWxsKC9cXHMvZywgXCJcIik7XG4gICAgICAgICAgICBjb25zdCBhcnIgPSBncmFtbWVyLnNwbGl0KC8oPT4pfCgtPikvKS5maWx0ZXIodiA9PiB2ICE9PSBcIj0+XCIgJiYgdiAhPT0gXCItPlwiICYmIHYpO1xuICAgICAgICAgICAgY29uc3Qgbm9uVGVybWluYWwgPSBhcnJbMF07XG4gICAgICAgICAgICBjb25zdCBkZXJpdmF0aW9ucyA9IGFyclsxXS5zcGxpdChcInxcIikuZmlsdGVyKHYgPT4gdikubWFwKGRlcml2YXRpb24gPT4ge1xuICAgICAgICAgICAgICAgIGxvZy5sb2coXCJbZGVidWddXCIsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGxleGVyLnNwbGl0RGVyaXZhdGlvbihkZXJpdmF0aW9uKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjb25zdCBuZXdEZXJpdmF0aW9uID0gW107XG4gICAgICAgICAgICBjb25zdCBmaXJzdFRvY2tlbjJEZXJpdmF0aW9uc01hcCA9IG5ldyBNYXA8Tm9uVGVybWluYWwgfCBUZXJtaW5hbCwgc3RyaW5nW11bXT4oKTtcbiAgICAgICAgICAgIGRlcml2YXRpb25zLmZvckVhY2goZGVyaXZhdGlvbiA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGFyciA9IGZpcnN0VG9ja2VuMkRlcml2YXRpb25zTWFwLmdldChkZXJpdmF0aW9uWzBdKTtcbiAgICAgICAgICAgICAgICBpZiAoIWFycikge1xuICAgICAgICAgICAgICAgICAgICBhcnIgPSBbZGVyaXZhdGlvbi5zbGljZSgxKV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2goZGVyaXZhdGlvbi5zbGljZSgxKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZpcnN0VG9ja2VuMkRlcml2YXRpb25zTWFwLnNldChkZXJpdmF0aW9uWzBdLCBhcnIpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGZvciAobGV0IHRvY2tlbiBvZiBmaXJzdFRvY2tlbjJEZXJpdmF0aW9uc01hcC5rZXlzKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RUb2NrZW4yRGVyaXZhdGlvbnNNYXAuZ2V0KHRvY2tlbik/Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBuZXdEZXJpdmF0aW9uLnB1c2godG9ja2VuICsgZmlyc3RUb2NrZW4yRGVyaXZhdGlvbnNNYXAuZ2V0KHRvY2tlbikhWzBdLmpvaW4oXCJcIikpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgZGVyaXZhdGlvbnMgPSBmaXJzdFRvY2tlbjJEZXJpdmF0aW9uc01hcC5nZXQodG9ja2VuKTtcbiAgICAgICAgICAgICAgICAvLyDlj6/ku6Xmj5Dlj5blhazlm6DlrZBcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdVblRlcm1pbmFsID0gbGV4ZXIuZ2V0TmV3Tm9uVGVybWluYWwobm9uVGVybWluYWwpO1xuICAgICAgICAgICAgICAgIG5ld0Rlcml2YXRpb24ucHVzaCh0b2NrZW4gKyBuZXdVblRlcm1pbmFsKTtcbiAgICAgICAgICAgICAgICBuZXdBZGRHcmFtbWVycy5wdXNoKG5ld1VuVGVybWluYWwgKyBcIiA9PiBcIiArIGRlcml2YXRpb25zPy5tYXAodiA9PiB2LmpvaW4oXCIgXCIpKS5qb2luKFwiIHwgXCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBub25UZXJtaW5hbCArIFwiID0+IFwiICsgbmV3RGVyaXZhdGlvbi5qb2luKFwiIHwgXCIpO1xuICAgICAgICB9KTtcbiAgICAgICAgbG9nLmxvZyhcIltwcmVdXCIsIHRtcFJlc3VsdCwgbmV3QWRkR3JhbW1lcnMpO1xuICAgICAgICBjb25zdCBuZXdSZXN1bHQgPSBbLi4udG1wUmVzdWx0LCAuLi5uZXdBZGRHcmFtbWVyc107XG4gICAgICAgIGxvZy5sb2coXCJbY29tXVwiLCByZXN1bHQsIG5ld1Jlc3VsdCk7XG4gICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID09PSBuZXdSZXN1bHQubGVuZ3RoKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQgPSBuZXdSZXN1bHQ7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59XG4vKlxuICAgIOajgOafpeaYr+WQpumcgOimgea4healmuW3pumAkuW9klxuKi9cbmV4cG9ydCBmdW5jdGlvbiBjaGVja05lZWRDbGVhclJpZ2h0UmVjdXJzaW9uKGdyYW1tZXJzOiBBcnJheTxzdHJpbmc+LCBub25UZXJtaW5hbHM/OiBBcnJheTxzdHJpbmc+LCB0ZXJtaW5hbHM/OiBBcnJheTxbc3RyaW5nLCBSZWdFeHBdPik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHJlc3VsdDogQXJyYXk8c3RyaW5nPiA9IFtdO1xuICAgIGlmICghbm9uVGVybWluYWxzIHx8ICF0ZXJtaW5hbHMpIHtcbiAgICAgICAgY29uc3QgdG9ja2VuQW5hUmVzID0gZ2V0VG9ja0Zyb21TaW1wbGVHcmFtbWVycyhncmFtbWVycyk7XG4gICAgICAgIG5vblRlcm1pbmFscyA9IHRvY2tlbkFuYVJlcy5ub25UZXJtaW5hbHM7XG4gICAgICAgIHRlcm1pbmFscyA9IHRvY2tlbkFuYVJlcy50ZXJtaW5hbHM7XG4gICAgfVxuICAgIGxvZy5sb2coXCJbbm9uVGVybWluYWxzXVwiLCBub25UZXJtaW5hbHMpO1xuICAgIGxvZy5sb2coXCJbdGVybWluYWxzXVwiLCB0ZXJtaW5hbHMpO1xuICAgIGxldCBsZXhlciA9IG5ldyBMZXhlcih0ZXJtaW5hbHMsIG5vblRlcm1pbmFscyk7XG4gICAgY29uc3Qgbm9uVGVybWluYWxzMkRlcml2YXRpb25NYXAgPSBuZXcgTWFwPE5vblRlcm1pbmFsLCBzdHJpbmdbXVtdPigpO1xuICAgIGZvciAobGV0IGdyYW1tZXIgb2YgZ3JhbW1lcnMpIHtcbiAgICAgICAgZ3JhbW1lciA9IGdyYW1tZXIucmVwbGFjZUFsbCgvXFxzL2csIFwiXCIpO1xuICAgICAgICBjb25zdCBhcnIgPSBncmFtbWVyLnNwbGl0KC8oPT4pfCgtPikvKS5maWx0ZXIodiA9PiB2ICE9PSBcIj0+XCIgJiYgdiAhPT0gXCItPlwiICYmIHYpO1xuICAgICAgICBjb25zdCBub25UZXJtaW5hbCA9IGFyclswXTtcbiAgICAgICAgY29uc3QgZGVyaXZhdGlvbnMgPSBhcnJbMV0uc3BsaXQoXCJ8XCIpLmZpbHRlcih2ID0+IHYpLm1hcChkZXJpdmF0aW9uID0+IHtcbiAgICAgICAgICAgIHJldHVybiBsZXhlci5zcGxpdERlcml2YXRpb24oZGVyaXZhdGlvbik7XG4gICAgICAgIH0pO1xuICAgICAgICBub25UZXJtaW5hbHMyRGVyaXZhdGlvbk1hcC5zZXQobm9uVGVybWluYWwsIGRlcml2YXRpb25zKTtcbiAgICB9XG4gICAgbG9nLmxvZyhcIltub25UZXJtaW5hbHMyRGVyaXZhdGlvbk1hcF1cIiwgbm9uVGVybWluYWxzMkRlcml2YXRpb25NYXApO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9uVGVybWluYWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGdJID0gbm9uVGVybWluYWxzMkRlcml2YXRpb25NYXAuZ2V0KG5vblRlcm1pbmFsc1tpXSk7XG4gICAgICAgIC8vIOa2iOmZpOW3pumAkuW9klxuICAgICAgICBmb3IgKGxldCBqID0gZ0khLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgICAgICBjb25zdCBncmFtbWVyID0gZ0khW2pdO1xuICAgICAgICAgICAgaWYgKGdyYW1tZXJbMF0gPT09IG5vblRlcm1pbmFsc1tpXSkge1xuICAgICAgICAgICAgICAgIC8vIOWtmOWcqOW3pumAkuW9klxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbi8qXG4gICAg5raI6Zmk5bem6YCS5b2SXG4gICAg55u05o6l5bem6YCS5b2SLemXtOaOpeW3pumAkuW9klxuICAgIOimgeaxgu+8miDovpPlhaXmlofms5XkuI3lkKvmnIlFbXB0eUNoYXJhdGVyIOWSjCDnjq9cbiovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJSaWdodFJlY3Vyc2lvbihncmFtbWVyczogQXJyYXk8c3RyaW5nPiwgbm9uVGVybWluYWxzPzogQXJyYXk8c3RyaW5nPiwgdGVybWluYWxzPzogQXJyYXk8W3N0cmluZywgUmVnRXhwXT4pOiBBcnJheTxzdHJpbmc+IHtcbiAgICBjb25zdCByZXN1bHQ6IEFycmF5PHN0cmluZz4gPSBbXTtcbiAgICBpZiAoIW5vblRlcm1pbmFscyB8fCAhdGVybWluYWxzKSB7XG4gICAgICAgIGNvbnN0IHRvY2tlbkFuYVJlcyA9IGdldFRvY2tGcm9tU2ltcGxlR3JhbW1lcnMoZ3JhbW1lcnMpO1xuICAgICAgICBub25UZXJtaW5hbHMgPSB0b2NrZW5BbmFSZXMubm9uVGVybWluYWxzO1xuICAgICAgICB0ZXJtaW5hbHMgPSB0b2NrZW5BbmFSZXMudGVybWluYWxzO1xuICAgIH1cbiAgICBsb2cubG9nKFwiW25vblRlcm1pbmFsc11cIiwgbm9uVGVybWluYWxzKTtcbiAgICBsb2cubG9nKFwiW3Rlcm1pbmFsc11cIiwgdGVybWluYWxzKTtcbiAgICBsZXQgbGV4ZXIgPSBuZXcgTGV4ZXIodGVybWluYWxzLCBub25UZXJtaW5hbHMpO1xuICAgIGNvbnN0IG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwID0gbmV3IE1hcDxOb25UZXJtaW5hbCwgc3RyaW5nW11bXT4oKTtcbiAgICBmb3IgKGxldCBncmFtbWVyIG9mIGdyYW1tZXJzKSB7XG4gICAgICAgIGdyYW1tZXIgPSBncmFtbWVyLnJlcGxhY2VBbGwoL1xccy9nLCBcIlwiKTtcbiAgICAgICAgY29uc3QgYXJyID0gZ3JhbW1lci5zcGxpdCgvKD0+KXwoLT4pLykuZmlsdGVyKHYgPT4gdiAhPT0gXCI9PlwiICYmIHYgIT09IFwiLT5cIiAmJiB2KTtcbiAgICAgICAgY29uc3Qgbm9uVGVybWluYWwgPSBhcnJbMF07XG4gICAgICAgIGNvbnN0IGRlcml2YXRpb25zID0gYXJyWzFdLnNwbGl0KFwifFwiKS5maWx0ZXIodiA9PiB2KS5tYXAoZGVyaXZhdGlvbiA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbGV4ZXIuc3BsaXREZXJpdmF0aW9uKGRlcml2YXRpb24pO1xuICAgICAgICB9KTtcbiAgICAgICAgbm9uVGVybWluYWxzMkRlcml2YXRpb25NYXAuc2V0KG5vblRlcm1pbmFsLCBkZXJpdmF0aW9ucyk7XG4gICAgfVxuICAgIGxvZy5sb2coXCJbbm9uVGVybWluYWxzMkRlcml2YXRpb25NYXBdXCIsIG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vblRlcm1pbmFscy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBnSSA9IG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwLmdldChub25UZXJtaW5hbHNbaV0pO1xuICAgICAgICAvLyDmm7/mjaLkuqfnlJ/lvI9cbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpOyBqKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGdKID0gbm9uVGVybWluYWxzMkRlcml2YXRpb25NYXAuZ2V0KG5vblRlcm1pbmFsc1tqXSk7XG4gICAgICAgICAgICBmb3IgKGxldCBrID0gZ0khLmxlbmd0aCAtIDE7IGsgPj0gMDsgay0tKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ3JhbW1lciA9IGdJIVtrXTtcbiAgICAgICAgICAgICAgICBpZiAoZ3JhbW1lclswXSA9PT0gbm9uVGVybWluYWxzW2pdKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlcGxhY2VcbiAgICAgICAgICAgICAgICAgICAgbG9nLmxvZyhncmFtbWVyLCBub25UZXJtaW5hbHNbal0pO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBqZ3JhbW1lciBvZiBnSiEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvZy5sb2coXCJbLV1cIiwgamdyYW1tZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZ0k/LnB1c2goWy4uLmpncmFtbWVyLCAuLi5ncmFtbWVyLnNsaWNlKDEpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZ0k/LnNwbGljZShrLCAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbmVlZEhhbmRsZUluZGV4OiBudW1iZXJbXSA9IFtdO1xuICAgICAgICAvLyDmtojpmaTlt6bpgJLlvZJcbiAgICAgICAgZm9yIChsZXQgaiA9IGdJIS5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgICAgICAgY29uc3QgZ3JhbW1lciA9IGdJIVtqXTtcbiAgICAgICAgICAgIGlmIChncmFtbWVyWzBdID09PSBub25UZXJtaW5hbHNbaV0pIHtcbiAgICAgICAgICAgICAgICAvLyDlrZjlnKjlt6bpgJLlvZJcbiAgICAgICAgICAgICAgICBuZWVkSGFuZGxlSW5kZXgucHVzaChqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobmVlZEhhbmRsZUluZGV4Lmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgbmV3Tm9uVGVybWluYWxUb2NrZW4gPSBsZXhlci5nZXROZXdOb25UZXJtaW5hbChub25UZXJtaW5hbHNbaV0pO1xuICAgICAgICAgICAgY29uc3QgbmV3R3JhbW1lcnM6IHN0cmluZ1tdW10gPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IG5ld05vblRlcm1pbmFsR3JhbW1lcnM6IHN0cmluZ1tdW10gPSBbXTtcblxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IGdJIS5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuICAgICAgICAgICAgICAgIGlmIChuZWVkSGFuZGxlSW5kZXguaW5kZXhPZihqKSAhPT0gLTEpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIC8vIEVtcHR5Q2hhcmFjdGVy5L2c5Li66aaW5Liq56ym5Y+3IOayoeacieaEj+S5iVxuICAgICAgICAgICAgICAgIG5ld0dyYW1tZXJzLnB1c2goWy4uLihnSSFbal1bMF0gPT09IEVtcHR5Q2hhcmFjdGVyID8gZ0khW2pdLnNsaWNlKDEpIDogZ0khW2pdKSwgbmV3Tm9uVGVybWluYWxUb2NrZW5dKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4IG9mIG5lZWRIYW5kbGVJbmRleCkge1xuICAgICAgICAgICAgICAgIG5ld05vblRlcm1pbmFsR3JhbW1lcnMucHVzaChbLi4uZ0khW2luZGV4XS5zbGljZSgxKSwgbmV3Tm9uVGVybWluYWxUb2NrZW5dKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbmV3Tm9uVGVybWluYWxHcmFtbWVycy5wdXNoKFtFbXB0eUNoYXJhY3Rlcl0pO1xuICAgICAgICAgICAgbm9uVGVybWluYWxzMkRlcml2YXRpb25NYXAuc2V0KG5vblRlcm1pbmFsc1tpXSwgWy4uLm5ld0dyYW1tZXJzLCAuLi4obmVlZEhhbmRsZUluZGV4Lmxlbmd0aCA/IFtdIDogZ0khKV0pO1xuICAgICAgICAgICAgbm9uVGVybWluYWxzMkRlcml2YXRpb25NYXAuc2V0KG5ld05vblRlcm1pbmFsVG9ja2VuLCBuZXdOb25UZXJtaW5hbEdyYW1tZXJzKTtcbiAgICAgICAgfVxuICAgICAgICBsb2cubG9nKFwiW25vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwIGluIHByb2Nlc3NdXCIsIG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwLCBnSSk7XG4gICAgfVxuICAgIGZvciAobGV0IG5vblRlcm1pbmFsIG9mIG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwLmtleXMoKSkge1xuICAgICAgICBjb25zdCBkZXJpdmF0aW9uOiBzdHJpbmcgPSBub25UZXJtaW5hbHMyRGVyaXZhdGlvbk1hcC5nZXQobm9uVGVybWluYWwpIS5tYXAoZGVyaXZhdGlvbiA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZGVyaXZhdGlvbi5qb2luKFwiIFwiKTtcbiAgICAgICAgfSkuam9pbihcIiB8IFwiKTtcbiAgICAgICAgcmVzdWx0LnB1c2goYCR7bm9uVGVybWluYWx9ID0+ICR7ZGVyaXZhdGlvbn1gKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuXG4iLCJpbXBvcnQgZ2VuZXJhdGVGaXJzdFNldCBmcm9tIFwiQC9maXJzdFNldFwiO1xuaW1wb3J0IGdlbmVyYXRlRmxsb3dTZXQgZnJvbSBcIkAvZm9sbG93U2V0XCI7XG5pbXBvcnQgTGV4ZXIgZnJvbSBcIkAvbGV4ZXJcIjtcbmltcG9ydCB7IGdldFRvY2tGcm9tU2ltcGxlR3JhbW1lcnMgfSBmcm9tIFwiQC9zaW1wbGVHcmFtbWVySGVscGVyXCI7XG5pbXBvcnQgeyBHcmFtbWVycywgTFJQcmVkaWN0TGluZSwgTFJQcmVkaWN0UmVzdWx0VGFibGUsIExSUHJlZGljdFRhYmxlTGluZSwgTFJQcmVkaWN0VGFibGUsIExSU3RhdGVOb2RlLCBMUlN0YXRlTm9kZUZvclNob3csIExSU3RhdGVOb2RlSXRlbSB9IGZyb20gXCJAL3R5cGVzL3R5cGVcIjtcbmltcG9ydCB7IEVuZGluZ0NoYXJhY3RlciB9IGZyb20gXCJAL3V0aWxzL2NvbnN0XCI7XG5pbXBvcnQgbG9nIGZyb20gXCJAL3V0aWxzL2xvZ1wiO1xuXG5leHBvcnQgY2xhc3MgTFJQYXJzZXIgIHtcbiAgICBpbml0aWFsU3RhdGVOb2RlOiBMUlN0YXRlTm9kZSB8IG51bGw7XG4gICAgYWxsU3RhdGVOb2Rlc01hcD86IE1hcDxzdHJpbmcsTFJTdGF0ZU5vZGU+O1xuICAgIGxleGVyPzogTGV4ZXI7XG4gICAgZ3JhbW1lcnM/OiBzdHJpbmdbXTtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5pbml0aWFsU3RhdGVOb2RlID0gbnVsbDtcbiAgICB9XG4gICAgZ2VuZXJhdGVTdGF0ZShncmFtbWVyczogc3RyaW5nW10sIHBhcnNlU3RhcnROb25UZXJtaW5hbDogc3RyaW5nLG5vblRlcm1pbmFscz86IEFycmF5PHN0cmluZz4sIHRlcm1pbmFscz86IEFycmF5PFtzdHJpbmcsIFJlZ0V4cF0+KSB7XG4gICAgICAgIGlmICghbm9uVGVybWluYWxzIHx8ICF0ZXJtaW5hbHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHRvY2tlbkFuYVJlcyA9IGdldFRvY2tGcm9tU2ltcGxlR3JhbW1lcnMoZ3JhbW1lcnMpO1xuICAgICAgICAgICAgbm9uVGVybWluYWxzID0gdG9ja2VuQW5hUmVzLm5vblRlcm1pbmFscztcbiAgICAgICAgICAgIHRlcm1pbmFscyA9IHRvY2tlbkFuYVJlcy50ZXJtaW5hbHM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgQXVndW1lbnRTdGFydCA9IFwiQXVndW1lbnRfU1wiO1xuICAgICAgICBsb2cubG9nKFwiW25vblRlcm1pbmFsc11cIiwgbm9uVGVybWluYWxzKTtcbiAgICAgICAgbG9nLmxvZyhcIlt0ZXJtaW5hbHNdXCIsIHRlcm1pbmFscyk7XG4gICAgICAgIHRoaXMuZ3JhbW1lcnMgPSBncmFtbWVycztcbiAgICAgICAgdGhpcy5sZXhlciA9IG5ldyBMZXhlcih0ZXJtaW5hbHMsIG5vblRlcm1pbmFscyk7XG5cbiAgICAgICAgY29uc3Qgbm9uVGVybWluYWxzMkRlcml2YXRpb25NYXAgPSBuZXcgTWFwPHN0cmluZyxzdHJpbmdbXVtdPigpO1xuICAgICAgICBmb3IgKGxldCBncmFtbWVyIG9mIGdyYW1tZXJzKSB7XG4gICAgICAgICAgICBncmFtbWVyID0gZ3JhbW1lci5yZXBsYWNlQWxsKC9cXHMvZywgXCJcIik7XG4gICAgICAgICAgICBjb25zdCBhcnIgPSBncmFtbWVyLnNwbGl0KC8oPT4pfCgtPikvKS5maWx0ZXIodiA9PiB2ICE9PSBcIj0+XCIgJiYgdiAhPT0gXCItPlwiICYmIHYpO1xuICAgICAgICAgICAgY29uc3Qgbm9uVGVybWluYWwgPSBhcnJbMF07XG4gICAgICAgICAgICBjb25zdCBkZXJpdmF0aW9ucyA9IGFyclsxXS5zcGxpdChcInxcIikuZmlsdGVyKHYgPT4gdikubWFwKGRlcml2YXRpb24gPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmxleGVyIS5zcGxpdERlcml2YXRpb24oZGVyaXZhdGlvbik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwLnNldChub25UZXJtaW5hbCwgZGVyaXZhdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGxvZy5sb2cobm9uVGVybWluYWxzMkRlcml2YXRpb25NYXApO1xuXG4gICAgICAgIHRoaXMuaW5pdGlhbFN0YXRlTm9kZSA9IHtcbiAgICAgICAgICAgIGlkOiAwLFxuICAgICAgICAgICAgaXRlbXM6IFt7XG4gICAgICAgICAgICAgICAgbm9uVGVybWluYWw6IEF1Z3VtZW50U3RhcnQsXG4gICAgICAgICAgICAgICAgZGVyaXZhdGlvbjogW3BhcnNlU3RhcnROb25UZXJtaW5hbF0sXG4gICAgICAgICAgICAgICAgbWF0Y2hQb2ludDogMCxcbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgZWRnZXM6IFtdLFxuICAgICAgICB9XG4gICAgICAgIGV4cGFuZFN0YXRlSXRlbXModGhpcy5pbml0aWFsU3RhdGVOb2RlLml0ZW1zLG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwLHRoaXMubGV4ZXIpO1xuICAgICAgICBjb25zdCBhbGxTdGF0ZU5vZGVzTWFwID0gbmV3IE1hcDxzdHJpbmcsTFJTdGF0ZU5vZGU+KCk7XG4gICAgICAgIHRoaXMuYWxsU3RhdGVOb2Rlc01hcCA9IGFsbFN0YXRlTm9kZXNNYXA7XG4gICAgICAgIGFsbFN0YXRlTm9kZXNNYXAuc2V0KHN0YXRlSXRlbXNUb1N0cmluZyh0aGlzLmluaXRpYWxTdGF0ZU5vZGUuaXRlbXMpLHRoaXMuaW5pdGlhbFN0YXRlTm9kZSk7XG4gICAgICAgIGNvbnN0IHZpczogYm9vbGVhbltdID0gW107XG4gICAgICAgIGxldCBwcmVTaXplID0gMDtcbiAgICAgICAgd2hpbGUodHJ1ZSkge1xuICAgICAgICAgICAgaWYoYWxsU3RhdGVOb2Rlc01hcC5zaXplID09IHByZVNpemUpYnJlYWs7XG4gICAgICAgICAgICBwcmVTaXplID0gYWxsU3RhdGVOb2Rlc01hcC5zaXplO1xuICAgICAgICAgICAgZm9yKGxldCBzdGF0ZSBvZiBhbGxTdGF0ZU5vZGVzTWFwLnZhbHVlcygpKSB7XG4gICAgICAgICAgICAgICAgaWYodmlzW3N0YXRlLmlkXSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgdmlzW3N0YXRlLmlkXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgLy8g5Yik5pat5piv5ZCm5Y+v5Lul5Yiw5o6l5Y+X54q25oCBXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpdGVtIG9mIHN0YXRlLml0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0ubm9uVGVybWluYWwgPT09IEF1Z3VtZW50U3RhcnQgJiYgaXRlbS5tYXRjaFBvaW50ID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZS5lZGdlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2NrZW46IEVuZGluZ0NoYXJhY3RlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAtMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGdlczogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IobGV0IG5vblRlcm1pbmFsIG9mIG5vblRlcm1pbmFscykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2hJdGVtczogTFJTdGF0ZU5vZGVJdGVtW10gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpdGVtIG9mIHN0YXRlLml0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpdGVtLmRlcml2YXRpb24ubGVuZ3RoID09PSBpdGVtLm1hdGNoUG9pbnQpY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpdGVtLmRlcml2YXRpb25baXRlbS5tYXRjaFBvaW50XSA9PT0gbm9uVGVybWluYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaEl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub25UZXJtaW5hbDogaXRlbS5ub25UZXJtaW5hbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVyaXZhdGlvbjogaXRlbS5kZXJpdmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFBvaW50OiBpdGVtLm1hdGNoUG9pbnQrMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZighbWF0Y2hJdGVtcy5sZW5ndGgpY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGV4cGFuZFN0YXRlSXRlbXMobWF0Y2hJdGVtcyxub25UZXJtaW5hbHMyRGVyaXZhdGlvbk1hcCx0aGlzLmxleGVyKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gc3RhdGVJdGVtc1RvU3RyaW5nKG1hdGNoSXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICBpZighYWxsU3RhdGVOb2Rlc01hcC5oYXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxsU3RhdGVOb2Rlc01hcC5zZXQoa2V5LHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogYWxsU3RhdGVOb2Rlc01hcC5zaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBtYXRjaEl0ZW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuZWRnZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2NrZW46IG5vblRlcm1pbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogYWxsU3RhdGVOb2Rlc01hcC5nZXQoa2V5KSEsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IobGV0IHRlcm1pbmFsIG9mIHRlcm1pbmFscykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2hJdGVtczogTFJTdGF0ZU5vZGVJdGVtW10gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpdGVtIG9mIHN0YXRlLml0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpdGVtLmRlcml2YXRpb24ubGVuZ3RoID09PSBpdGVtLm1hdGNoUG9pbnQpY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpdGVtLmRlcml2YXRpb25baXRlbS5tYXRjaFBvaW50XSA9PT0gdGVybWluYWxbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaEl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub25UZXJtaW5hbDogaXRlbS5ub25UZXJtaW5hbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVyaXZhdGlvbjogaXRlbS5kZXJpdmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFBvaW50OiBpdGVtLm1hdGNoUG9pbnQrMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZighbWF0Y2hJdGVtcy5sZW5ndGgpY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGV4cGFuZFN0YXRlSXRlbXMobWF0Y2hJdGVtcyxub25UZXJtaW5hbHMyRGVyaXZhdGlvbk1hcCx0aGlzLmxleGVyKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gc3RhdGVJdGVtc1RvU3RyaW5nKG1hdGNoSXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICBpZighYWxsU3RhdGVOb2Rlc01hcC5oYXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxsU3RhdGVOb2Rlc01hcC5zZXQoa2V5LHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogYWxsU3RhdGVOb2Rlc01hcC5zaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBtYXRjaEl0ZW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuZWRnZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2NrZW46IHRlcm1pbmFsWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogYWxsU3RhdGVOb2Rlc01hcC5nZXQoa2V5KSEsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAqZ2VuZXJhdGVTdGF0ZVByb2dyZXNzaXZlKGdyYW1tZXJzOiBzdHJpbmdbXSwgcGFyc2VTdGFydE5vblRlcm1pbmFsOiBzdHJpbmcsbm9uVGVybWluYWxzPzogQXJyYXk8c3RyaW5nPiwgdGVybWluYWxzPzogQXJyYXk8W3N0cmluZywgUmVnRXhwXT4pOiBJdGVyYWJsZUl0ZXJhdG9yPHVuZGVmaW5lZD4ge1xuICAgICAgICBpZiAoIW5vblRlcm1pbmFscyB8fCAhdGVybWluYWxzKSB7XG4gICAgICAgICAgICBjb25zdCB0b2NrZW5BbmFSZXMgPSBnZXRUb2NrRnJvbVNpbXBsZUdyYW1tZXJzKGdyYW1tZXJzKTtcbiAgICAgICAgICAgIG5vblRlcm1pbmFscyA9IHRvY2tlbkFuYVJlcy5ub25UZXJtaW5hbHM7XG4gICAgICAgICAgICB0ZXJtaW5hbHMgPSB0b2NrZW5BbmFSZXMudGVybWluYWxzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IEF1Z3VtZW50U3RhcnQgPSBcIkF1Z3VtZW50X1NcIjtcbiAgICAgICAgbG9nLmxvZyhcIltub25UZXJtaW5hbHNdXCIsIG5vblRlcm1pbmFscyk7XG4gICAgICAgIGxvZy5sb2coXCJbdGVybWluYWxzXVwiLCB0ZXJtaW5hbHMpO1xuICAgICAgICB0aGlzLmdyYW1tZXJzID0gZ3JhbW1lcnM7XG4gICAgICAgIHRoaXMubGV4ZXIgPSBuZXcgTGV4ZXIodGVybWluYWxzLCBub25UZXJtaW5hbHMpO1xuXG4gICAgICAgIGNvbnN0IG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwID0gbmV3IE1hcDxzdHJpbmcsc3RyaW5nW11bXT4oKTtcbiAgICAgICAgZm9yIChsZXQgZ3JhbW1lciBvZiBncmFtbWVycykge1xuICAgICAgICAgICAgZ3JhbW1lciA9IGdyYW1tZXIucmVwbGFjZUFsbCgvXFxzL2csIFwiXCIpO1xuICAgICAgICAgICAgY29uc3QgYXJyID0gZ3JhbW1lci5zcGxpdCgvKD0+KXwoLT4pLykuZmlsdGVyKHYgPT4gdiAhPT0gXCI9PlwiICYmIHYgIT09IFwiLT5cIiAmJiB2KTtcbiAgICAgICAgICAgIGNvbnN0IG5vblRlcm1pbmFsID0gYXJyWzBdO1xuICAgICAgICAgICAgY29uc3QgZGVyaXZhdGlvbnMgPSBhcnJbMV0uc3BsaXQoXCJ8XCIpLmZpbHRlcih2ID0+IHYpLm1hcChkZXJpdmF0aW9uID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5sZXhlciEuc3BsaXREZXJpdmF0aW9uKGRlcml2YXRpb24pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBub25UZXJtaW5hbHMyRGVyaXZhdGlvbk1hcC5zZXQobm9uVGVybWluYWwsIGRlcml2YXRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBsb2cubG9nKG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwKTtcblxuICAgICAgICB0aGlzLmluaXRpYWxTdGF0ZU5vZGUgPSB7XG4gICAgICAgICAgICBpZDogMCxcbiAgICAgICAgICAgIGl0ZW1zOiBbe1xuICAgICAgICAgICAgICAgIG5vblRlcm1pbmFsOiBBdWd1bWVudFN0YXJ0LFxuICAgICAgICAgICAgICAgIGRlcml2YXRpb246IFtwYXJzZVN0YXJ0Tm9uVGVybWluYWxdLFxuICAgICAgICAgICAgICAgIG1hdGNoUG9pbnQ6IDAsXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIGVkZ2VzOiBbXSxcbiAgICAgICAgfVxuICAgICAgICBleHBhbmRTdGF0ZUl0ZW1zKHRoaXMuaW5pdGlhbFN0YXRlTm9kZS5pdGVtcyxub25UZXJtaW5hbHMyRGVyaXZhdGlvbk1hcCx0aGlzLmxleGVyKTtcbiAgICAgICAgeWllbGQ7XG4gICAgICAgIGNvbnN0IGFsbFN0YXRlTm9kZXNNYXAgPSBuZXcgTWFwPHN0cmluZyxMUlN0YXRlTm9kZT4oKTtcbiAgICAgICAgdGhpcy5hbGxTdGF0ZU5vZGVzTWFwID0gYWxsU3RhdGVOb2Rlc01hcDtcbiAgICAgICAgYWxsU3RhdGVOb2Rlc01hcC5zZXQoc3RhdGVJdGVtc1RvU3RyaW5nKHRoaXMuaW5pdGlhbFN0YXRlTm9kZS5pdGVtcyksdGhpcy5pbml0aWFsU3RhdGVOb2RlKTtcbiAgICAgICAgY29uc3QgdmlzOiBib29sZWFuW10gPSBbXTtcbiAgICAgICAgbGV0IHByZVNpemUgPSAwO1xuICAgICAgICB3aGlsZSh0cnVlKSB7XG4gICAgICAgICAgICBpZihhbGxTdGF0ZU5vZGVzTWFwLnNpemUgPT0gcHJlU2l6ZSlicmVhaztcbiAgICAgICAgICAgIHByZVNpemUgPSBhbGxTdGF0ZU5vZGVzTWFwLnNpemU7XG4gICAgICAgICAgICBmb3IobGV0IHN0YXRlIG9mIGFsbFN0YXRlTm9kZXNNYXAudmFsdWVzKCkpIHtcbiAgICAgICAgICAgICAgICBpZih2aXNbc3RhdGUuaWRdKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB2aXNbc3RhdGUuaWRdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAvLyDliKTmlq3mmK/lkKblj6/ku6XliLDmjqXlj5fnirbmgIFcbiAgICAgICAgICAgICAgICBmb3IobGV0IGl0ZW0gb2Ygc3RhdGUuaXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoaXRlbS5ub25UZXJtaW5hbCA9PT0gQXVndW1lbnRTdGFydCAmJiBpdGVtLm1hdGNoUG9pbnQgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlLmVkZ2VzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvY2tlbjogRW5kaW5nQ2hhcmFjdGVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IC0xLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZvcihsZXQgbm9uVGVybWluYWwgb2Ygbm9uVGVybWluYWxzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaEl0ZW1zOiBMUlN0YXRlTm9kZUl0ZW1bXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGl0ZW0gb2Ygc3RhdGUuaXRlbXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0uZGVyaXZhdGlvbi5sZW5ndGggPT09IGl0ZW0ubWF0Y2hQb2ludCljb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGl0ZW0uZGVyaXZhdGlvbltpdGVtLm1hdGNoUG9pbnRdID09PSBub25UZXJtaW5hbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoSXRlbXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vblRlcm1pbmFsOiBpdGVtLm5vblRlcm1pbmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXJpdmF0aW9uOiBpdGVtLmRlcml2YXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoUG9pbnQ6IGl0ZW0ubWF0Y2hQb2ludCsxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9IFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKCFtYXRjaEl0ZW1zLmxlbmd0aCljb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgZXhwYW5kU3RhdGVJdGVtcyhtYXRjaEl0ZW1zLG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwLHRoaXMubGV4ZXIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSBzdGF0ZUl0ZW1zVG9TdHJpbmcobWF0Y2hJdGVtcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmKCFhbGxTdGF0ZU5vZGVzTWFwLmhhcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxTdGF0ZU5vZGVzTWFwLnNldChrZXkse1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBhbGxTdGF0ZU5vZGVzTWFwLnNpemUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM6IG1hdGNoSXRlbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRnZXM6IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzdGF0ZS5lZGdlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvY2tlbjogbm9uVGVybWluYWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXh0OiBhbGxTdGF0ZU5vZGVzTWFwLmdldChrZXkpISxcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IobGV0IHRlcm1pbmFsIG9mIHRlcm1pbmFscykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWF0Y2hJdGVtczogTFJTdGF0ZU5vZGVJdGVtW10gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpdGVtIG9mIHN0YXRlLml0ZW1zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpdGVtLmRlcml2YXRpb24ubGVuZ3RoID09PSBpdGVtLm1hdGNoUG9pbnQpY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpdGVtLmRlcml2YXRpb25baXRlbS5tYXRjaFBvaW50XSA9PT0gdGVybWluYWxbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaEl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub25UZXJtaW5hbDogaXRlbS5ub25UZXJtaW5hbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVyaXZhdGlvbjogaXRlbS5kZXJpdmF0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFBvaW50OiBpdGVtLm1hdGNoUG9pbnQrMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZighbWF0Y2hJdGVtcy5sZW5ndGgpY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIGV4cGFuZFN0YXRlSXRlbXMobWF0Y2hJdGVtcyxub25UZXJtaW5hbHMyRGVyaXZhdGlvbk1hcCx0aGlzLmxleGVyKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gc3RhdGVJdGVtc1RvU3RyaW5nKG1hdGNoSXRlbXMpO1xuICAgICAgICAgICAgICAgICAgICBpZighYWxsU3RhdGVOb2Rlc01hcC5oYXMoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxsU3RhdGVOb2Rlc01hcC5zZXQoa2V5LHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogYWxsU3RhdGVOb2Rlc01hcC5zaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBtYXRjaEl0ZW1zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkZ2VzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc3RhdGUuZWRnZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2NrZW46IHRlcm1pbmFsWzBdLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dDogYWxsU3RhdGVOb2Rlc01hcC5nZXQoa2V5KSEsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB5aWVsZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBwcmVkaWN0SW5wdXQoaW5wdXQ6IHN0cmluZyxwcmVkaWN0VGFibGU6IExSUHJlZGljdFRhYmxlKTogTFJQcmVkaWN0UmVzdWx0VGFibGUge1xuICAgICAgICBpZighdGhpcy5sZXhlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiW2dlbmVyYXRlUHJlZGljdFRhYmxlXSBtdXN0IGNhbGwgZ2VuZXJhdGVTdGF0ZSBiZWZvcmUgZ2VuZXJhdGVQcmVkaWN0VGFibGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGFuczogTFJQcmVkaWN0UmVzdWx0VGFibGUgPSBbXTtcbiAgICAgICAgaW5wdXQgPSBpbnB1dC5yZXBsYWNlQWxsKC9cXHMvZywgXCJcIik7XG4gICAgICAgIGFucy5wdXNoKHtcbiAgICAgICAgICAgIHN0YWNrOiBbMF0sXG4gICAgICAgICAgICBzeW1ib2xzOiBbXSxcbiAgICAgICAgICAgIGlucHV0OiBbLi4udGhpcy5sZXhlci5zcGxpdERlcml2YXRpb24oaW5wdXQpLEVuZGluZ0NoYXJhY3Rlcl0sXG4gICAgICAgIH0pXG4gICAgICAgIHdoaWxlKHRydWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0ZXAgPSBhbnNbYW5zLmxlbmd0aC0xXTtcbiAgICAgICAgICAgIGNvbnN0IG5leHQgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHN0ZXApKSBhcyBMUlByZWRpY3RMaW5lO1xuICAgICAgICAgICAgY29uc3Qgc3RhdGVJZCA9IHN0ZXAuc3RhY2tbc3RlcC5zdGFjay5sZW5ndGggLSAxXTtcblxuICAgICAgICAgICAgY29uc3QgcHJlZGljdExpbmUgPSBwcmVkaWN0VGFibGVbc3RhdGVJZF07XG4gICAgICAgICAgICBjb25zdCBtb3ZlID0gcHJlZGljdExpbmUuYWN0aW9uLmdldChzdGVwLmlucHV0WzBdKSE7XG4gICAgICAgICAgICBpZihtb3ZlLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYG1vdmUgY29sbGlzaW9uICR7bW92ZX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCFtb3ZlLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgbW92ZSBpcyBlbXB0eSAke21vdmV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgY01vdmUgPSBtb3ZlWzBdIGFzIHN0cmluZztcbiAgICAgICAgICAgIGlmKGNNb3ZlID09PSBcImFjY1wiKSB7XG4gICAgICAgICAgICAgICAgc3RlcC5tb3ZlID0gXCLmjqXlj5dcIjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGNNb3ZlLnN0YXJ0c1dpdGgoXCJTXCIpKSB7XG4gICAgICAgICAgICAgICAgLy8gc2hpZnRcbiAgICAgICAgICAgICAgICBzdGVwLm1vdmUgPSBg56e75YWlJHtzdGVwLmlucHV0WzBdfWA7XG4gICAgICAgICAgICAgICAgbmV4dC5zeW1ib2xzLnB1c2gobmV4dC5pbnB1dC5zaGlmdCgpISk7XG4gICAgICAgICAgICAgICAgbmV4dC5zdGFjay5wdXNoKE51bWJlcihjTW92ZS5zbGljZSgxKSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyByZWR1Y2VcbiAgICAgICAgICAgICAgICBzdGVwLm1vdmUgPSBg5qC55o2uJHtjTW92ZX3lvZLnuqZgO1xuICAgICAgICAgICAgICAgIGNvbnN0IGdyYW1tZXIgPSBjTW92ZS5zbGljZSgyLC0xKS5yZXBsYWNlQWxsKC9cXHMvZyxcIlwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBub25UZXJtaW5hbCA9IGdyYW1tZXIuc3BsaXQoXCI9PlwiKVswXTtcbiAgICAgICAgICAgICAgICBjb25zdCBkZXJpdmF0aW9uID0gdGhpcy5sZXhlci5zcGxpdERlcml2YXRpb24oZ3JhbW1lci5zcGxpdChcIj0+XCIpWzFdKTtcbiAgICAgICAgICAgICAgICBmb3IobGV0IGk9MDtpPGRlcml2YXRpb24ubGVuZ3RoO2krKykge1xuICAgICAgICAgICAgICAgICAgICBuZXh0LnN0YWNrLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBuZXh0LnN5bWJvbHMucG9wKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5leHQuc3ltYm9scy5wdXNoKG5vblRlcm1pbmFsKTtcbiAgICAgICAgICAgICAgICAvLyBnb3RvXG4gICAgICAgICAgICAgICAgY29uc3QgbGVmdFN0YXRlSWQgPSBzdGVwLnN0YWNrW25leHQuc3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgY29uc3QgalByZWRpY3RMaW5lID0gcHJlZGljdFRhYmxlW2xlZnRTdGF0ZUlkXTtcbiAgICAgICAgICAgICAgICBuZXh0LnN0YWNrLnB1c2goalByZWRpY3RMaW5lLmdvdG8uZ2V0KG5vblRlcm1pbmFsKSFbMF0gYXMgdW5rbm93biBhcyBudW1iZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYW5zLnB1c2gobmV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFucztcbiAgICB9XG4gICAgZ2VuZXJhdGVMUjBQcmVkaWN0VGFibGUoKSB7XG4gICAgICAgIGlmKCF0aGlzLmluaXRpYWxTdGF0ZU5vZGUgfHwgIXRoaXMuYWxsU3RhdGVOb2Rlc01hcCB8fCAhdGhpcy5sZXhlcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiW2dlbmVyYXRlUHJlZGljdFRhYmxlXSBtdXN0IGNhbGwgZ2VuZXJhdGVTdGF0ZSBiZWZvcmUgZ2VuZXJhdGVQcmVkaWN0VGFibGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcHJlZGljdFRhYmxlOiBMUlByZWRpY3RUYWJsZSA9IFtdO1xuICAgICAgICBmb3IobGV0IHN0YXRlTm9kZSBvZiB0aGlzLmFsbFN0YXRlTm9kZXNNYXAudmFsdWVzKCkpIHtcbiAgICAgICAgICAgIGxldCBwcmVkaWN0TGluZTogTFJQcmVkaWN0VGFibGVMaW5lID0ge1xuICAgICAgICAgICAgICAgIGlkOiBzdGF0ZU5vZGUuaWQsXG4gICAgICAgICAgICAgICAgYWN0aW9uOiBuZXcgTWFwKCksXG4gICAgICAgICAgICAgICAgZ290bzogbmV3IE1hcCgpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZm9yKGxldCBub25UZXJtaW5hbCAgb2YgdGhpcy5sZXhlci5ub25UZXJtaW5hbHMpIHtcbiAgICAgICAgICAgICAgICBwcmVkaWN0TGluZS5nb3RvLnNldChub25UZXJtaW5hbCxbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IobGV0IHRlcm1pbmFsICBvZiB0aGlzLmxleGVyLnRlcm1pbmFscykge1xuICAgICAgICAgICAgICAgIHByZWRpY3RMaW5lLmFjdGlvbi5zZXQodGVybWluYWxbMF0sW10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJlZGljdExpbmUuYWN0aW9uLnNldChFbmRpbmdDaGFyYWN0ZXIsW10pO1xuICAgICAgICAgICAgZm9yKGxldCBlZGdlIG9mIHN0YXRlTm9kZS5lZGdlcykge1xuICAgICAgICAgICAgICAgIGlmKGVkZ2UudG9ja2VuID09PSBFbmRpbmdDaGFyYWN0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJlZGljdExpbmUuYWN0aW9uLmdldChlZGdlLnRvY2tlbikhLnB1c2goXCJhY2NcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZih0aGlzLmxleGVyLmlzVGVybWluYWwoZWRnZS50b2NrZW4pKSB7XG4gICAgICAgICAgICAgICAgICAgIHByZWRpY3RMaW5lLmFjdGlvbi5nZXQoZWRnZS50b2NrZW4pIS5wdXNoKGBTJHtlZGdlLm5leHQuaWR9YCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcHJlZGljdExpbmUuZ290by5nZXQoZWRnZS50b2NrZW4pIS5wdXNoKGVkZ2UubmV4dC5pZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yKGxldCBpdGVtIG9mIHN0YXRlTm9kZS5pdGVtcykge1xuICAgICAgICAgICAgICAgIGlmKGl0ZW0ubWF0Y2hQb2ludCA9PT0gaXRlbS5kZXJpdmF0aW9uLmxlbmd0aCkgeyAvLyByZWR1Y2VcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCB0ZXJtaW5hbCBvZiB0aGlzLmxleGVyLnRlcm1pbmFscykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZGljdExpbmUuYWN0aW9uLmdldCh0ZXJtaW5hbFswXSkhLnB1c2goYHIoJHtpdGVtLm5vblRlcm1pbmFsfSA9PiAke2l0ZW0uZGVyaXZhdGlvbi5qb2luKFwiIFwiKX0pYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmVkaWN0VGFibGUucHVzaChwcmVkaWN0TGluZSk7XG4gICAgICAgIH0gICBcbiAgICAgICAgcHJlZGljdFRhYmxlLnNvcnQoKGEsYik9PntcbiAgICAgICAgICAgIHJldHVybiBhLmlkIC0gYi5pZDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwcmVkaWN0VGFibGU7XG4gICAgfVxuICAgIGdlbmVyYXRlU0xSMVByZWRpY3RUYWJsZSgpIHtcbiAgICAgICAgaWYoIXRoaXMuaW5pdGlhbFN0YXRlTm9kZSB8fCAhdGhpcy5hbGxTdGF0ZU5vZGVzTWFwIHx8ICF0aGlzLmxleGVyIHx8ICF0aGlzLmdyYW1tZXJzKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJbZ2VuZXJhdGVQcmVkaWN0VGFibGVdIG11c3QgY2FsbCBnZW5lcmF0ZVN0YXRlIGJlZm9yZSBnZW5lcmF0ZVByZWRpY3RUYWJsZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBmb2xsb3dTZXQgPSBnZW5lcmF0ZUZsbG93U2V0KHRoaXMubGV4ZXIsdGhpcy5ncmFtbWVycyk7XG4gICAgICAgIGNvbnN0IHByZWRpY3RUYWJsZTogTFJQcmVkaWN0VGFibGUgPSBbXTtcbiAgICAgICAgZm9yKGxldCBzdGF0ZU5vZGUgb2YgdGhpcy5hbGxTdGF0ZU5vZGVzTWFwLnZhbHVlcygpKSB7XG4gICAgICAgICAgICBsZXQgcHJlZGljdExpbmU6IExSUHJlZGljdFRhYmxlTGluZSA9IHtcbiAgICAgICAgICAgICAgICBpZDogc3RhdGVOb2RlLmlkLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogbmV3IE1hcCgpLFxuICAgICAgICAgICAgICAgIGdvdG86IG5ldyBNYXAoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvcihsZXQgbm9uVGVybWluYWwgIG9mIHRoaXMubGV4ZXIubm9uVGVybWluYWxzKSB7XG4gICAgICAgICAgICAgICAgcHJlZGljdExpbmUuZ290by5zZXQobm9uVGVybWluYWwsW10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yKGxldCB0ZXJtaW5hbCAgb2YgdGhpcy5sZXhlci50ZXJtaW5hbHMpIHtcbiAgICAgICAgICAgICAgICBwcmVkaWN0TGluZS5hY3Rpb24uc2V0KHRlcm1pbmFsWzBdLFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHByZWRpY3RMaW5lLmFjdGlvbi5zZXQoRW5kaW5nQ2hhcmFjdGVyLFtdKTtcbiAgICAgICAgICAgIGZvcihsZXQgZWRnZSBvZiBzdGF0ZU5vZGUuZWRnZXMpIHtcbiAgICAgICAgICAgICAgICBpZihlZGdlLnRvY2tlbiA9PT0gRW5kaW5nQ2hhcmFjdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHByZWRpY3RMaW5lLmFjdGlvbi5nZXQoZWRnZS50b2NrZW4pIS5wdXNoKFwiYWNjXCIpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYodGhpcy5sZXhlci5pc1Rlcm1pbmFsKGVkZ2UudG9ja2VuKSkge1xuICAgICAgICAgICAgICAgICAgICBwcmVkaWN0TGluZS5hY3Rpb24uZ2V0KGVkZ2UudG9ja2VuKSEucHVzaChgUyR7ZWRnZS5uZXh0LmlkfWApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByZWRpY3RMaW5lLmdvdG8uZ2V0KGVkZ2UudG9ja2VuKSEucHVzaChlZGdlLm5leHQuaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvcihsZXQgaXRlbSBvZiBzdGF0ZU5vZGUuaXRlbXMpIHtcbiAgICAgICAgICAgICAgICBpZihpdGVtLm1hdGNoUG9pbnQgPT09IGl0ZW0uZGVyaXZhdGlvbi5sZW5ndGgpIHsgLy8gcmVkdWNlXG4gICAgICAgICAgICAgICAgICAgIGxldCBmb2xsb3dDaDogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBzZXRMaW5lIG9mIGZvbGxvd1NldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0TGluZS50b2NrZW4gPT09IGl0ZW0ubm9uVGVybWluYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2xsb3dDaCA9IFsuLi5zZXRMaW5lLnRlcm1pbmFscy52YWx1ZXMoKV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCB0ZXJtaW5hbCBvZiBmb2xsb3dDaCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZGljdExpbmUuYWN0aW9uLmdldCh0ZXJtaW5hbFswXSkhLnB1c2goYHIoJHtpdGVtLm5vblRlcm1pbmFsfSA9PiAke2l0ZW0uZGVyaXZhdGlvbi5qb2luKFwiIFwiKX0pYCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmVkaWN0VGFibGUucHVzaChwcmVkaWN0TGluZSk7XG4gICAgICAgIH0gICBcbiAgICAgICAgcHJlZGljdFRhYmxlLnNvcnQoKGEsYik9PntcbiAgICAgICAgICAgIHJldHVybiBhLmlkIC0gYi5pZDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwcmVkaWN0VGFibGU7XG4gICAgfVxuICAgIGdldCBzdGF0ZUdyYXBoKCk6IExSU3RhdGVOb2RlRm9yU2hvdyB7XG4gICAgICAgIGNvbnN0IHZpczogYW55W10gPSBbXTtcbiAgICAgICAgY29uc3QgZGZzID0gKG5vZGU6IGFueSkgPT4ge1xuICAgICAgICAgICAgaWYodmlzW25vZGUuaWRdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZpc1tub2RlLmlkXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG5ld05vZGU6IGFueSA9IHt9O1xuICAgICAgICAgICAgdmlzW25vZGUuaWRdID0gbmV3Tm9kZTtcbiAgICAgICAgICAgIG5ld05vZGUuaWQgPSBub2RlLmlkO1xuICAgICAgICAgICAgbmV3Tm9kZS5pdGVtcyA9IG5vZGUuaXRlbXMubWFwKChpdGVtOiBhbnkpPT57XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlSXRlbVRvU3RyaW5nKGl0ZW0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIG5ld05vZGUuZWRnZXMgPSBbXTtcbiAgICAgICAgICAgIGZvcihsZXQgZWRnZSBvZiBub2RlLmVkZ2VzKSB7XG4gICAgICAgICAgICAgICAgbmV3Tm9kZS5lZGdlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgdG9ja2VuOiBlZGdlLnRvY2tlbixcbiAgICAgICAgICAgICAgICAgICAgbmV4dDogZGZzKGVkZ2UubmV4dClcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ld05vZGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRmcyh0aGlzLmluaXRpYWxTdGF0ZU5vZGUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc3RhdGVJdGVtc1RvU3RyaW5nKGl0ZW1zOiBMUlN0YXRlTm9kZUl0ZW1bXSk6IHN0cmluZyB7IFxuICAgIGl0ZW1zICA9IGl0ZW1zLnNvcnQoKGEsYik9PntcbiAgICAgICAgaWYoYTxiKSB7XG4gICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDE7XG4gICAgfSlcbiAgICBsZXQgYW5zID0gXCJcIjtcbiAgICBmb3IobGV0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgYW5zICs9IGAgJHtzdGF0ZUl0ZW1Ub1N0cmluZyhpdGVtKX1gO1xuICAgIH1cbiAgICByZXR1cm4gYW5zO1xufVxuZnVuY3Rpb24gc3RhdGVJdGVtVG9TdHJpbmcoaXRlbTogTFJTdGF0ZU5vZGVJdGVtKTogc3RyaW5nIHsgXG4gICAgbGV0IGFucyA9IGAke2l0ZW0ubm9uVGVybWluYWx9ID0+IGA7XG4gICAgZm9yKGxldCBpPTA7aTxpdGVtLmRlcml2YXRpb24ubGVuZ3RoO2krKykge1xuICAgICAgICBpZihpPT09aXRlbS5tYXRjaFBvaW50KSB7XG4gICAgICAgICAgICBpZighaSlhbnMgKz0gXCIgXCI7XG4gICAgICAgICAgICBhbnMgKz0gXCLCtyBcIjtcbiAgICAgICAgfVxuICAgICAgICBpZihpPT09aXRlbS5kZXJpdmF0aW9uLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIGFucyArPSBgJHtpdGVtLmRlcml2YXRpb25baV19YDtcbiAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgYW5zICs9IGAke2l0ZW0uZGVyaXZhdGlvbltpXX0gYDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYW5zO1xufVxuXG5mdW5jdGlvbiBleHBhbmRTdGF0ZUl0ZW1zKGl0ZW1zOiBMUlN0YXRlTm9kZUl0ZW1bXSxub25UZXJtaW5hbHMyRGVyaXZhdGlvbk1hcDogTWFwPHN0cmluZyxzdHJpbmdbXVtdPixsZXhlcjogTGV4ZXIpIHtcbiAgICBmb3IobGV0IGk9MDtpPGl0ZW1zLmxlbmd0aDtpKyspIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IGl0ZW1zW2ldO1xuICAgICAgICBjb25zdCB0b2NrZW4gPSBpdGVtLmRlcml2YXRpb25baXRlbS5tYXRjaFBvaW50XTtcbiAgICAgICAgaWYobGV4ZXIuaXNUZXJtaW5hbCh0b2NrZW4pKWNvbnRpbnVlO1xuICAgICAgICBjb25zdCBkZXJpdmF0aW9ucyA9IG5vblRlcm1pbmFsczJEZXJpdmF0aW9uTWFwLmdldCh0b2NrZW4pO1xuICAgICAgICBkZXJpdmF0aW9ucz8uZm9yRWFjaChkZXJpdmF0aW9uPT57XG4gICAgICAgICAgICBsZXQgaW5GbGFnID0gZmFsc2U7XG4gICAgICAgICAgICBmb3IobGV0IGpJdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICAgICAgaWYoakl0ZW0ubm9uVGVybWluYWwgPT09IHRvY2tlbiAmJiBqSXRlbS5tYXRjaFBvaW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKGpJdGVtLmRlcml2YXRpb24ubGVuZ3RoICE9PSBkZXJpdmF0aW9uLmxlbmd0aCljb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVxdWFsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7aTxkZXJpdmF0aW9uLmxlbmd0aDtpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGpJdGVtLmRlcml2YXRpb25baV0gIT09IGRlcml2YXRpb25baV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcXVhbCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKGVxdWFsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbkZsYWcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ICAgXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihpbkZsYWcpcmV0dXJuIDtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgICAgIG5vblRlcm1pbmFsOiB0b2NrZW4sXG4gICAgICAgICAgICAgICAgbWF0Y2hQb2ludDogMCxcbiAgICAgICAgICAgICAgICBkZXJpdmF0aW9uLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCJpbXBvcnQgZ2VuZXJhdGVGaXJzdFNldCwgeyBnZW5lcmF0ZUZpcnN0U2V0UHJvZ3Jlc3NpdmUgfSBmcm9tIFwiQC9maXJzdFNldFwiO1xyXG5pbXBvcnQgZ2VuZXJhdGVGbGxvd1NldCwgeyBnZW5lcmF0ZUZsbG93U2V0UHJvZ3Jlc3NpdmUgfSBmcm9tIFwiQC9mb2xsb3dTZXRcIjtcclxuaW1wb3J0IExleGVyIGZyb20gXCJAL2xleGVyXCI7XHJcbmltcG9ydCB7IEdyYW1tZXJTZXQsIFByZWRpY3RQcm9jZXNzTGluZSwgUHJlZGljdFRhYmxlLCBQcm9jZXNzLCBSdWxlIH0gZnJvbSBcIkAvdHlwZXMvdHlwZVwiO1xyXG5pbXBvcnQgZ2VuZXJhdG9yUHJlZGljdFRhYmxlLCB7IGNoZWNrUHJlZGlja1RhYmxlSXNWYWxpZCwgZ2VuZXJhdGVQcmVkaWN0VGFibGVQcm9ncmVzc2l2ZSwgcHJlZGljdCB9IGZyb20gXCIuL3ByZWRpY3RUYWJsZVwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTEwxUGFyc2VyIHtcclxuICAgIHB1YmxpYyBsZXhlcjogTGV4ZXI7XHJcbiAgICBwdWJsaWMgdGV4dEdyYW1tZXJzOiBBcnJheTxzdHJpbmc+O1xyXG4gICAgY29uc3RydWN0b3IodGVybWluYWxzOiBBcnJheTxbc3RyaW5nLCBSZWdFeHBdPiwgbm9uVGVybWluYWxzOiBBcnJheTxzdHJpbmc+LCBpbkdyYW1tZXJzOiBBcnJheTxzdHJpbmc+KSB7XHJcbiAgICAgICAgdGhpcy5sZXhlciA9IG5ldyBMZXhlcih0ZXJtaW5hbHMsIG5vblRlcm1pbmFscyk7XHJcbiAgICAgICAgdGhpcy50ZXh0R3JhbW1lcnMgPSBpbkdyYW1tZXJzO1xyXG4gICAgfVxyXG4gICAgZ2V0Rmlyc3RTZXQoKTogR3JhbW1lclNldCB7XHJcbiAgICAgICAgcmV0dXJuIGdlbmVyYXRlRmlyc3RTZXQodGhpcy5sZXhlciwgdGhpcy50ZXh0R3JhbW1lcnMpO1xyXG4gICAgfVxyXG4gICAgZ2V0Rm9sbG93U2V0KGZpcnN0U2V0PzogR3JhbW1lclNldCk6IEdyYW1tZXJTZXQge1xyXG4gICAgICAgIGlmICghZmlyc3RTZXQpIHtcclxuICAgICAgICAgICAgZmlyc3RTZXQgPSB0aGlzLmdldEZpcnN0U2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBnZW5lcmF0ZUZsbG93U2V0KHRoaXMubGV4ZXIsIHRoaXMudGV4dEdyYW1tZXJzLCBmaXJzdFNldCk7XHJcbiAgICB9XHJcbiAgICBnZXRQcmVkaWN0VGFibGUoZmlyc3RTZXQ/OiBHcmFtbWVyU2V0LCBmb2xsb3dTZXQ/OiBHcmFtbWVyU2V0KTogUHJlZGljdFRhYmxlIHtcclxuICAgICAgICBpZiAoIWZpcnN0U2V0KSB7XHJcbiAgICAgICAgICAgIGZpcnN0U2V0ID0gdGhpcy5nZXRGaXJzdFNldCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWZvbGxvd1NldCkge1xyXG4gICAgICAgICAgICBmb2xsb3dTZXQgPSB0aGlzLmdldEZvbGxvd1NldChmaXJzdFNldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBnZW5lcmF0b3JQcmVkaWN0VGFibGUodGhpcy5sZXhlciwgdGhpcy50ZXh0R3JhbW1lcnMsIGZpcnN0U2V0LCBmb2xsb3dTZXQpO1xyXG4gICAgfVxyXG4gICAgZ2V0UHJlZGljdFByb2Nlc3MoaW5wdXQ6IHN0cmluZywgcGFyc2VTdGFydE5vblRlcm1pbmFsOiBzdHJpbmcsIHByZWRpY3RUYWJsZT86IFByZWRpY3RUYWJsZSk6IEFycmF5PFByZWRpY3RQcm9jZXNzTGluZT4ge1xyXG4gICAgICAgIGlmICghcHJlZGljdFRhYmxlKSB7XHJcbiAgICAgICAgICAgIHByZWRpY3RUYWJsZSA9IGdlbmVyYXRvclByZWRpY3RUYWJsZSh0aGlzLmxleGVyLCB0aGlzLnRleHRHcmFtbWVycywgdGhpcy5nZXRGaXJzdFNldCgpLCB0aGlzLmdldEZvbGxvd1NldCgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoIXRoaXMubGV4ZXIubm9uVGVybWluYWxzLnNvbWUobm9uVGVybWluYWw9PntcclxuICAgICAgICAgICAgaWYocGFyc2VTdGFydE5vblRlcm1pbmFsID09PSBub25UZXJtaW5hbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIjFcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcmVkaWN0KHRoaXMubGV4ZXIsIHByZWRpY3RUYWJsZSwgaW5wdXQsIHBhcnNlU3RhcnROb25UZXJtaW5hbCk7XHJcbiAgICB9XHJcbiAgICBjaGVja1ByZWRpY2tUYWJsZUlzVmFsaWQocHJlZGljdFRhYmxlOiBQcmVkaWN0VGFibGUpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gY2hlY2tQcmVkaWNrVGFibGVJc1ZhbGlkKHRoaXMubGV4ZXIsIHByZWRpY3RUYWJsZSk7XHJcbiAgICB9XHJcbiAgICBjaGVja0lzTEwwKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBjaGVja1ByZWRpY2tUYWJsZUlzVmFsaWQodGhpcy5sZXhlciwgdGhpcy5nZXRQcmVkaWN0VGFibGUoKSk7XHJcbiAgICB9XHJcbiAgICBnZXRGaXJzdFNldFByb2dyZXNzaXZlKCk6IEl0ZXJhYmxlSXRlcmF0b3I8UnVsZSB8IFByb2Nlc3M8R3JhbW1lclNldD4+IHtcclxuICAgICAgICByZXR1cm4gZ2VuZXJhdGVGaXJzdFNldFByb2dyZXNzaXZlKHRoaXMubGV4ZXIsIHRoaXMudGV4dEdyYW1tZXJzKTtcclxuICAgIH1cclxuICAgIGdldEZvbGxvd1NldFByb2dyZXNzaXZlKGZpcnN0U2V0PzogR3JhbW1lclNldCk6IEl0ZXJhYmxlSXRlcmF0b3I8UnVsZSB8IFByb2Nlc3M8R3JhbW1lclNldD4+IHtcclxuICAgICAgICBpZiAoIWZpcnN0U2V0KSB7XHJcbiAgICAgICAgICAgIGZpcnN0U2V0ID0gdGhpcy5nZXRGaXJzdFNldCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZ2VuZXJhdGVGbGxvd1NldFByb2dyZXNzaXZlKHRoaXMubGV4ZXIsIHRoaXMudGV4dEdyYW1tZXJzLCBmaXJzdFNldCk7XHJcbiAgICB9XHJcbiAgICBnZXRQcmVkaWN0VGFibGVQcm9ncmVzc2l2ZShmaXJzdFNldD86IEdyYW1tZXJTZXQsIGZvbGxvd1NldD86IEdyYW1tZXJTZXQpOiBJdGVyYWJsZUl0ZXJhdG9yPFJ1bGUgfCBQcm9jZXNzPFByZWRpY3RUYWJsZT4+IHtcclxuICAgICAgICBpZiAoIWZpcnN0U2V0KSB7XHJcbiAgICAgICAgICAgIGZpcnN0U2V0ID0gdGhpcy5nZXRGaXJzdFNldCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWZvbGxvd1NldCkge1xyXG4gICAgICAgICAgICBmb2xsb3dTZXQgPSB0aGlzLmdldEZvbGxvd1NldChmaXJzdFNldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBnZW5lcmF0ZVByZWRpY3RUYWJsZVByb2dyZXNzaXZlKHRoaXMubGV4ZXIsIHRoaXMudGV4dEdyYW1tZXJzLCBmaXJzdFNldCwgZm9sbG93U2V0KTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbiJdLCJuYW1lcyI6WyJ0cmFuc2ZlclN0cmluZzJHcmFtbWVycyIsImxleGVyIiwiZ3JhbW1lcnMiLCJtYXAiLCJncmFtbWVyIiwicmVwbGFjZUFsbCIsImFyciIsInNwbGl0IiwiZmlsdGVyIiwidiIsImRlcml2YXRpb25zIiwiZGVyaXZhdGlvbiIsInNwbGl0RGVyaXZhdGlvbiIsIm5vblRlcm1pbmFsIiwic2FmZVJlZ0NoYXJhY3RlciIsImNoYXIiLCJFbXB0eUNoYXJhY3RlciIsIkVuZGluZ0NoYXJhY3RlciIsIkxvZ0xldmVsIiwiTm9ybWFsIiwibG9nTGV2ZWxfaW5pdCIsIkVycm9yIiwibG9nTGV2ZWwiLCJsb2dDaGFubmVsIiwiY29uc3RydWN0b3IiLCJjb25zb2xlIiwidGhpcyIsImxvZyIsImluZm8iLCJ3YXJuIiwiV2Fybm5pbmciLCJlcnJvciIsImdlbmVyYXRlRmlyc3RTZXQiLCJpbkdyYW1tZXJzIiwiZmlyc3RTZXQiLCJBcnJheSIsInRvY2tlbiIsInRlcm1pbmFscyIsIlNldCIsImdyYW1tZXJNYXAiLCJNYXAiLCJmb3JFYWNoIiwic2V0IiwicHVzaCIsInRlcm1pbmFsIiwiaXNUZXJtaW5hbCIsInNldExpbmUiLCJnZXQiLCJsZW5ndGgiLCJoYXMiLCJhZGQiLCJmaXJzdFNldE1hcCIsImhhc0NoYW5nZSIsImkiLCJuZXh0U2V0TGluZSIsInNvcnQiLCJhIiwiYiIsImZyb20iLCJnZXREZXJpdmF0aW9uRmlyc3RTZXQiLCJqb2luIiwiZ2VuZXJhdGVGbGxvd1NldCIsImZvbGxvd1NldCIsImZvbGxvd1NldE1hcCIsImoiLCJwU2V0TGluZSIsIkxleGVyIiwibm9uVGVybWluYWxzIiwiY3VycmVudExpbmUiLCJjdXJyZW50Q29sdW1uIiwic291cmNlIiwic2V0U291cmNlIiwicmVtYWluU3RyaW5nIiwic2xpY2UiLCJuZXh0Iiwib3JpZ2luIiwibWF0Y2hSZXN1bHQiLCJtYXRjaCIsInBvcCIsImUiLCJuZXh0Tm90RW1wdHlUZXJtaW5hbCIsIm5leHROb3RFbXB0eSIsInN0ZXAiLCJiYWNrIiwicG9wTm90RW1wdHlUZXJtaW5hbCIsInN0ciIsInNvbWUiLCJjb3VudFRpbWUiLCJpblN0ciIsIlJlZ0V4cCIsImdldE5ld05vblRlcm1pbmFsIiwidG1wIiwiaW5kZXhPZiIsInVuc2hpZnQiLCJnZW5lcmF0b3JQcmVkaWN0VGFibGUiLCJwcmVkaWN0VGFibGUiLCJub25UZXJtaW5hbDJUYWJsZVJvd01hcCIsInRhYmxlTGluZSIsInRlcm1pbmFsMkRlcml2YXRpb24iLCJub25UZXJtaW5hbDJGaXJzdFNldE1hcCIsIm5vblRlcm1pbmFsMkZvbGxvd1NldExpbmUiLCJkZXJpdmF0aW9uRmlyc3RTZXQiLCJoYXNTZXQiLCJjZWxsR3JhbW1lciIsImNoZWNrUHJlZGlja1RhYmxlSXNWYWxpZCIsInRhYmxlIiwidDJkIiwic2ltcGxlTm9uVGVybWluYWxSZWciLCJzaW1wbGVUZXJtaW5hbFJlZyIsImdldFRvY2tGcm9tU2ltcGxlR3JhbW1lcnMiLCJKU09OIiwic3RyaW5naWZ5IiwianNvbkRhdGEiLCJwYXJzZSIsInN0YXRlSXRlbXNUb1N0cmluZyIsIml0ZW1zIiwiYW5zIiwiaXRlbSIsInN0YXRlSXRlbVRvU3RyaW5nIiwibWF0Y2hQb2ludCIsImV4cGFuZFN0YXRlSXRlbXMiLCJub25UZXJtaW5hbHMyRGVyaXZhdGlvbk1hcCIsImluRmxhZyIsImpJdGVtIiwiZXF1YWwiLCJ0ZXh0R3JhbW1lcnMiLCJnZXRGaXJzdFNldCIsImdldEZvbGxvd1NldCIsImdldFByZWRpY3RUYWJsZSIsImdldFByZWRpY3RQcm9jZXNzIiwiaW5wdXQiLCJwYXJzZVN0YXJ0Tm9uVGVybWluYWwiLCJfaW5wdXQiLCJwcmVkaWN0UHJvY2VzcyIsImFzdElkeCIsImFzdE5vZGUiLCJpZCIsInRleHQiLCJjaGVjayIsImFzdFN0YWNrIiwiY3VycmVudFN0YXRlIiwicGFyc2VTdGFjayIsInJlbWFpbmluZ0lucHV0IiwicGFyc2VBY3Rpb24iLCJjaGlsZHJlbiIsInJldmVyc2UiLCJ0b1N0cmluZyIsInByZWRpY3QiLCJjaGVja0lzTEwwIiwiZ2V0Rmlyc3RTZXRQcm9ncmVzc2l2ZSIsInJ1bGVJbmRleCIsInJlc3VsdCIsImdlbmVyYXRlRmlyc3RTZXRQcm9ncmVzc2l2ZSIsImdldEZvbGxvd1NldFByb2dyZXNzaXZlIiwiZ2VuZXJhdGVGbGxvd1NldFByb2dyZXNzaXZlIiwiZ2V0UHJlZGljdFRhYmxlUHJvZ3Jlc3NpdmUiLCJnZW5lcmF0ZVByZWRpY3RUYWJsZVByb2dyZXNzaXZlIiwiaW5pdGlhbFN0YXRlTm9kZSIsImFsbFN0YXRlTm9kZXNNYXAiLCJnZW5lcmF0ZVN0YXRlIiwidG9ja2VuQW5hUmVzIiwiQXVndW1lbnRTdGFydCIsImVkZ2VzIiwidmlzIiwicHJlU2l6ZSIsInNpemUiLCJzdGF0ZSIsInZhbHVlcyIsIm1hdGNoSXRlbXMiLCJrZXkiLCJnZW5lcmF0ZVN0YXRlUHJvZ3Jlc3NpdmUiLCJwcmVkaWN0SW5wdXQiLCJzdGFjayIsInN5bWJvbHMiLCJtb3ZlIiwiYWN0aW9uIiwiY01vdmUiLCJzdGFydHNXaXRoIiwic2hpZnQiLCJOdW1iZXIiLCJqUHJlZGljdExpbmUiLCJnb3RvIiwiZ2VuZXJhdGVMUjBQcmVkaWN0VGFibGUiLCJzdGF0ZU5vZGUiLCJwcmVkaWN0TGluZSIsImVkZ2UiLCJnZW5lcmF0ZVNMUjFQcmVkaWN0VGFibGUiLCJmb2xsb3dDaCIsInN0YXRlR3JhcGgiLCJkZnMiLCJub2RlIiwibmV3Tm9kZSIsImdJIiwiZmlyc3RUb2NrZW4yRGVyaXZhdGlvbnNNYXAiLCJrZXlzIiwidW5pb25NYXAiLCJnSiIsImsiLCJqZ3JhbW1lciIsInNwbGljZSIsIm5lZWRIYW5kbGVJbmRleCIsIm5ld05vblRlcm1pbmFsVG9ja2VuIiwibmV3R3JhbW1lcnMiLCJuZXdOb25UZXJtaW5hbEdyYW1tZXJzIiwiaW5kZXgiLCJuZXdBZGRHcmFtbWVycyIsInRtcFJlc3VsdCIsIm5ld0Rlcml2YXRpb24iLCJuZXdVblRlcm1pbmFsIiwibmV3UmVzdWx0IiwiZGVyaSJdLCJtYXBwaW5ncyI6IjZPQUdnQixTQUFBQSxFQUF3QkMsRUFBY0MsR0FDbEQsT0FBT0EsRUFBU0MsS0FBSUMsR0FDVEEsRUFBUUMsV0FBVyxNQUFPLE1BQ2xDRixLQUFJQyxJQUNILE1BQU1FLEVBQU1GLEVBQVFHLE1BQU0sYUFBYUMsUUFBT0MsR0FBVyxPQUFOQSxHQUFvQixPQUFOQSxHQUFjQSxJQUN6RUMsRUFBY0osRUFBSSxHQUFHQyxNQUFNLEtBQUtDLFFBQU9DLEdBQUtBLEdBQVcsTUFBTkEsSUFBV04sS0FBSVEsR0FDM0RWLEVBQU1XLGdCQUFnQkQsS0FFakMsTUFBTyxDQUNIRSxZQUFhUCxFQUFJLEdBQ2pCSSxZQUFhQSxFQUNoQixHQUdULENBV00sU0FBVUksRUFBaUJDLEdBQzdCLE9BQVFBLEdBQ1IsSUFBSyxJQUNMLElBQUssSUFDTCxJQUFLLElBQ0wsSUFBSyxJQUNELE1BQU8sS0FBS0EsSUFDaEIsUUFDSSxPQUFPQSxFQUVmLENDcENPLE1BQU1DLEVBQWlCLElBQ2pCQyxFQUFrQixJQ0YvQixJQUFPQyxHQUNQLFNBQWdCQSxHQUVYQSxFQUtKQSxFQUFBLE9BQUEsR0FB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
